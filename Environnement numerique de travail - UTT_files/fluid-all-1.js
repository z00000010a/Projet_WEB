(function(A){A.each({focus:"focusin",blur:"focusout"},function(C,B){A.event.special[B]={setup:function(){if(A.browser.msie){return false}this.addEventListener(C,A.event.special[B].handler,true)},teardown:function(){if(A.browser.msie){return false}this.removeEventListener(C,A.event.special[B].handler,true)},handler:function(D){arguments[0]=A.event.fix(D);arguments[0].type=B;return A.event.handle.apply(this,arguments)}}});A.extend(A.fn,{delegate:function(D,C,B){return this.bind(D,function(E){var F=A(E.target);if(F.is(C)){return B.apply(F,arguments)}})},triggerEvent:function(B,C){return this.triggerHandler(B,[jQuery.event.fix({type:B,target:C})])}})})(jQuery);var fluid_1_1=fluid_1_1||{};var fluid=fluid||fluid_1_1;(function(F,E){E.version="Infusion 1.1.3";E.fail=function(H){E.setLogging(true);E.log(H.message?H.message:H);throw new Error(H)};E.wrap=function(H){return((!H||H.jquery)?H:F(H))};E.unwrap=function(H){return H&&H.jquery&&H.length===1?H[0]:H};E.keyForValue=function(J,I){for(var H in J){if(J[H]===I){return H}}return null};E.findKeyInObject=E.keyForValue;E.clear=function(I){if(I instanceof Array){I.length=0}else{for(var H in I){delete I[H]}}};E.container=function(I){var H=I;if(typeof I==="string"||I.nodeType&&(I.nodeType===1||I.nodeType===9)){H=F(I)}if(!H||!H.jquery||H.length!==1){if(typeof (I)!=="string"){I=H.selector}E.fail({name:"NotOne",message:"A single container element was not found for selector "+I})}return H};var C={};var B={};E.defaults=function(){var K=0;var I=C;if(typeof arguments[0]==="boolean"){I=B;K=1}var H=arguments[K];var J=arguments[K+1];if(J!==undefined){I[H]=J;return J}return I[H]};E.createDomBinder=function(I,K){var J={},L={};function M(O,N){return F.data(E.unwrap(N))+"-"+O}function H(P,O,N){J[M(P,O)]=N}L.locate=function(P,R){var N,O,Q;N=K[P];O=R?R:I;if(!O){E.fail("DOM binder invoked for selector "+P+" without container")}if(!N){return O}if(typeof (N)==="function"){Q=F(N.call(null,E.unwrap(O)))}else{Q=F(N,O)}if(Q.get(0)===document){Q=[]}if(!Q.selector){Q.selector=N;Q.context=O}Q.selectorName=P;H(P,O,Q);return Q};L.fastLocate=function(O,R){var N=R?R:I;var P=M(O,N);var Q=J[P];return Q?Q:L.locate(O,R)};L.clear=function(){J={}};L.refresh=function(Q,R){var O=R?R:I;if(typeof Q==="string"){Q=[Q]}if(O.length===undefined){O=[O]}for(var P=0;P<Q.length;++P){for(var N=0;N<O.length;++N){L.locate(Q[P],O[N])}}};return L};E.mergeListeners=function(J,M){if(M){for(var I in M){var N=M[I];var O=I.indexOf(".");var L;if(O!==-1){L=I.substring(O+1);I=I.substring(0,O)}if(!J[I]){J[I]=E.event.getEventFirer()}var K=J[I];if(typeof (N)==="function"){K.addListener(N,L)}else{if(N&&typeof N.length==="number"){for(var H=0;H<N.length;++H){K.addListener(N[H],L)}}}}}};E.instantiateFirers=function(K,H){K.events={};if(H.events){for(var J in H.events){var I=H.events[J];K.events[J]=E.event.getEventFirer(I==="unicast",I==="preventable")}}E.mergeListeners(K.events,H.listeners)};E.mergeComponentOptions=function(I,H,K){var J=E.defaults(H);I.options=E.merge(J?J.mergePolicy:null,{},J,K)};E.expectFilledSelector=function(H,I){if(H&&H.length===0&&H.jquery){E.fail(I+': selector "'+H.selector+'" with name '+H.selectorName+" returned no results in context "+E.dumpEl(H.context))}};E.initView=function(I,H,K){var J={};E.expectFilledSelector(H,'Error instantiating component with name "'+I);E.mergeComponentOptions(J,I,K);if(H){J.container=E.container(H);E.initDomBinder(J)}E.instantiateFirers(J,J.options);return J};E.COMPONENT_OPTIONS={};E.VALUE={};E.emptySubcomponent=function(H){var J={};H=F.makeArray(H);for(var I=0;I<H.length;++I){J[H[I]]=function(){}}return J};E.initLittleComponent=function(I,H){var J={};E.mergeComponentOptions(J,I,H);return J};E.initSubcomponent=function(J,I,H){return E.initSubcomponents(J,I,H)[0]};E.initSubcomponents=function(N,O,P){var Q=N.options[O];if(!Q){return }var M=F.makeArray(Q);var R=-1;var J=[];P=F.makeArray(P);for(var L=0;L<P.length;++L){if(P[L]===E.COMPONENT_OPTIONS){R=L}}for(L=0;L<M.length;++L){Q=M[L];if(R!==-1&&Q.options){P[R]=Q.options}if(typeof (Q)!=="function"){var K=typeof (Q)==="string"?Q:Q.type;var H=E.defaults(true,K);E.merge("reverse",N.options,H);J[L]=K==="fluid.emptySubcomponent"?E.emptySubcomponent(Q.options):E.invokeGlobalFunction(K,P,{fluid:E})}else{J[L]=Q.apply(null,P)}var I=J[L]?J[L].returnedOptions:null;if(I){E.merge(N.options.mergePolicy,N.options,I);if(I.listeners){E.mergeListeners(N.events,I.listeners)}}}return J};E.initDomBinder=function(H){H.dom=E.createDomBinder(H.container,H.options.selectors);H.locate=H.dom.locate};E.isPrimitive=function(H){var I=typeof (H);return !H||I==="string"||I==="boolean"||I==="number"};function G(M,O,L,H){var P=M&&typeof (M)!=="string"?M[O]:M;if(typeof (P)==="function"){P.apply(null,L,H);return L}if(P==="replace"){E.clear(L)}for(var J in H){var Q=(O?O+".":"")+J;var N=L[J];var K=H[J];var I=E.isPrimitive(N);if(K!==undefined){if(K!==null&&typeof K==="object"&&!K.nodeType&&!K.jquery&&K!==E.VALUE){if(I){L[J]=N=K instanceof Array?[]:{}}G(M,Q,N,K)}else{if(N===null||N===undefined||P!=="reverse"){L[J]=K}}}}return L}E.merge=function(L,K){var P="";for(var J=2;J<arguments.length;++J){var H=arguments[J];if(H!==null&&H!==undefined){G(L,P,K,H)}}if(L&&typeof (L)!=="string"){for(var N in L){var O=L[N];if(typeof (O)==="string"&&O!=="replace"){var I=E.model.getBeanValue(K,N);if(I===null||I===undefined){var M=E.model.getBeanValue(K,O);E.model.setBeanValue(K,N,M)}}}}return K};E.copy=function(H){if(E.isPrimitive(H)){return H}return F.extend(true,typeof (H.length)==="number"?[]:{},H)};E.invokeGlobalFunction=function(I,J,H){var K=E.model.getBeanValue(window,I,H);if(!K){E.fail("Error invoking global function: "+I+" could not be located")}else{return K.apply(null,J)}};E.event={};var A=1;E.event.getEventFirer=function(J,K){var I=E.log;var H={};return{addListener:function(N,M,L){if(!N){return }if(J){M="unicast"}if(!M){if(!N.$$guid){N.$$guid=A++}M=N.$$guid}H[M]={listener:N,predicate:L}},removeListener:function(L){if(typeof (L)==="string"){delete H[L]}else{if(typeof (L)==="object"&&L.$$guid){delete H[L.$$guid]}}},fire:function(){for(var N in H){var L=H[N];var O=L.listener;if(L.predicate&&!L.predicate(O,arguments)){continue}try{var M=O.apply(null,arguments);if(K&&M===false){return false}}catch(P){I("FireEvent received exception "+P.message+" e "+P+" firing to listener "+N);throw (P)}}}}};E.model={};E.model.copyModel=function(I,H){E.clear(I);F.extend(true,I,H)};E.model.parseEL=function(H){return String(H).split(".")};E.model.composePath=function(H,I){return H===""?I:H+"."+I};E.model.setBeanValue=function(I,K,L){var H=E.model.parseEL(K);for(var J=0;J<H.length-1;J+=1){if(!I[H[J]]){I[H[J]]={}}I=I[H[J]]}I[H[H.length-1]]=L};E.model.getBeanValue=function(J,M,H){if(M===""||M===null||M===undefined){return J}var I=E.model.parseEL(M);for(var K=0;K<I.length;++K){if(!J){return J}var L=I[K];if(H&&H[L]){J=H[L];H=null}else{J=J[L]}}return J};var D;E.setLogging=function(H){if(typeof H==="boolean"){D=H}else{D=false}};E.log=function(H){if(D){H=new Date().toTimeString()+":  "+H;if(typeof (console)!=="undefined"){if(console.debug){console.debug(H)}else{console.log(H)}}else{if(typeof (YAHOO)!=="undefined"){YAHOO.log(H)}else{if(typeof (opera)!=="undefined"){opera.postError(H)}}}}};E.dumpEl=function(I){var J;if(!I){return"null"}if(I.nodeType===3||I.nodeType===8){return"[data: "+I.data+"]"}if(I.nodeType===9){return"[document: location "+I.location+"]"}if(!I.nodeType&&typeof I.length==="number"){J="[";for(var H=0;H<I.length;++H){J+=E.dumpEl(I[H]);if(H<I.length-1){J+=", "}}return J+"]"}I=F(I);J=I.get(0).tagName;if(I.attr("id")){J+="#"+I.attr("id")}if(I.attr("class")){J+="."+I.attr("class")}return J};E.findAncestor=function(H,I){H=E.unwrap(H);while(H){if(I(H)){return H}H=H.parentNode}};E.jById=function(K,J){J=J&&J.nodeType===9?J:document;var H=E.byId(K,J);var I=H?F(H):[];I.selector="#"+K;I.context=J;return I};E.byId=function(J,I){I=I&&I.nodeType===9?I:document;var H=I.getElementById(J);if(H){if(H.getAttribute("id")!==J){E.fail("Problem in document structure - picked up element "+E.dumpEl(H)+" for id "+J+" without this id - most likely the element has a name which conflicts with this id")}return H}else{return null}};E.getId=function(H){return E.unwrap(H).getAttribute("id")};E.allocateSimpleId=function(H){H=E.unwrap(H);if(!H.id){H.id="fluid-id-"+(A++)}return H.id};E.transform=function(L){var K=[];for(var J=0;J<L.length;++J){var H=L[J];for(var I=0;I<arguments.length-1;++I){H=arguments[I+1](H,J)}K[K.length]=H}return K};E.find=function(K,J,L){for(var I=0;I<K.length;++I){var H=J(K[I],I);if(H!==null&&H!==undefined){return H}}return L};E.accumulate=function(K,J,H){for(var I=0;I<K.length;++I){H=J(K[I],H,I)}return H};E.remove_if=function(J,I){for(var H=0;H<J.length;++H){if(I(J[H],H)){J.splice(H,1);--H}}return J};E.formatMessage=function(J,H){if(!H){return J}if(typeof (H)==="string"){H=[H]}for(var I=0;I<H.length;++I){J=J.replace("{"+I+"}",H[I])}return J};E.messageLocator=function(H){return function(I,J){if(typeof (I)==="string"){I=[I]}for(var K=0;K<I.length;++K){var M=I[K];var L=H[M];if(L===undefined){continue}return E.formatMessage(L,J)}return"[Message string for key "+I[0]+" not found]"}};E.stringTemplate=function(L,I){var K=L;for(var J in I){if(I.hasOwnProperty(J)){var H="%"+J;K=K.replace(H,I[J])}}return K}})(jQuery,fluid_1_1);var fluid_1_1=fluid_1_1||{};(function(C,B){B.dom=B.dom||{};var A=function(D){if(D.node.firstChild){D.node=D.node.firstChild;D.depth+=1;return D}while(D.node){if(D.node.nextSibling){D.node=D.node.nextSibling;return D}D.node=D.node.parentNode;D.depth-=1}return D};B.dom.iterateDom=function(H,G,F){var E={node:H,depth:0};var D=H;var I;while(E.node!==null&&E.depth>=0&&E.depth<B.dom.iterateDom.DOM_BAIL_DEPTH){I=null;if(E.node.nodeType===1||F){I=G(E.node,E.depth)}if(I){if(I==="delete"){E.node.parentNode.removeChild(E.node);E.node=D}else{if(I==="stop"){return E.node}}}D=E.node;E=A(E)}};B.dom.iterateDom.DOM_BAIL_DEPTH=256;B.dom.computeAbsolutePosition=function(D){var F=0,E=0;if(D.offsetParent){do{F+=D.offsetLeft;E+=D.offsetTop;
D=D.offsetParent}while(D);return[F,E]}};B.dom.isContainer=function(D,E){for(;E;E=E.parentNode){if(D===E){return true}}return false};B.dom.insertAfter=function(D,E){var F=E.nextSibling;if(!F){E.parentNode.appendChild(D)}else{E.parentNode.insertBefore(D,F)}};B.dom.isWhitespaceNode=function(D){return !(/[^\t\n\r ]/.test(D.data))};B.dom.isIgnorableNode=function(D){return(D.nodeType===8)||((D.nodeType===3)&&B.dom.isWhitespaceNode(D))};B.dom.getElementText=function(F){var D=F.childNodes;var G="";for(var E=0;E<D.length;++E){var H=D[E];if(H.nodeType==3){G=G+H.nodeValue}}return G};B.dom.cleanseScripts=function(D){var E=C.data(D,B.dom.cleanseScripts.MARKER);if(!E){B.dom.iterateDom(D,function(F){return F.tagName.toLowerCase()==="script"?"delete":null});C.data(D,B.dom.cleanseScripts.MARKER,true)}};B.dom.cleanseScripts.MARKER="fluid-scripts-cleansed"})(jQuery,fluid_1_1);fluid_1_1=fluid_1_1||{};(function(D,C){C.VALUE={};C.BINDING_ROOT_KEY="fluid-binding-root";C.findData=function(H,G){while(H){var I=D.data(H,G);if(I){return I}H=H.parentNode}};C.bindFossils=function(H,I,G){D.data(H,C.BINDING_ROOT_KEY,{data:I,fossils:G})};C.findForm=function(G){return C.findAncestor(G,function(H){return H.nodeName.toLowerCase()==="form"})};C.value=function(L,I){var J=C.unwrap(L);var O=false;if(J.nodeType===undefined&&J.length>1){J=J[0];O=true}var K=D(J);if("input"!==J.nodeName.toLowerCase()||!/radio|checkbox/.test(J.type)){return D(J).val(I)}var H=J.name;if(H===undefined){C.fail("Cannot acquire value from node "+C.dumpEl(J)+" which does not have name attribute set")}var G;if(O){G=L}else{var G=document.getElementsByName(H);var N=C.findForm(J);G=D.grep(G,function(P){if(P.name!==H){return false}return !N||C.dom.isContainer(N,P)})}if(I!==undefined){if(typeof (I)==="boolean"){I=(I?"true":"false")}D.each(G,function(){this.checked=(I instanceof Array?D.inArray(this.value,I)!==-1:I===this.value)})}else{var M=D.map(G,function(P){return P.checked?P.value:null});return J.type==="radio"?M[0]:M}};C.applyChange=function(L,M,I){L=C.unwrap(L);if(M===undefined){M=C.value(L)}if(L.nodeType===undefined&&L.length>0){L=L[0]}var G=C.findData(L,C.BINDING_ROOT_KEY);if(!G){C.fail("Bound data could not be discovered in any node above "+C.dumpEl(L))}var H=L.name;var J=G.fossils[H];if(!J){C.fail("No fossil discovered for name "+H+" in fossil record above "+C.dumpEl(L))}if(typeof (J.oldvalue)==="boolean"){M=M[0]?true:false}var K=G.fossils[H].EL;if(I){I.fireChangeRequest({path:K,value:M,source:L.id})}else{C.model.setBeanValue(G.data,K,M)}};C.pathUtil={};var F=function(I,L,H){var J=null;if(I){J=""}var K=false;var G=L.length;for(;H<G;++H){var M=L.charAt(H);if(!K){if(M==="."){break}else{if(M==="\\"){K=true}else{if(J!==null){J+=M}}}}else{K=false;if(J!==null){I+=M}}}if(J!==null){I[0]=J}return H};var A=[];C.pathUtil.getPathSegment=function(H,G){F(A,H,G);return A[0]};C.pathUtil.getHeadPath=function(G){return C.pathUtil.getPathSegment(G,0)};C.pathUtil.getFromHeadPath=function(H){var G=F(null,H,0);return G===H.length?null:H.substring(G+1)};function E(G){return G.lastIndexOf(".")}C.pathUtil.getToTailPath=function(H){var G=E(H);return G==-1?null:H.substring(0,G)};C.pathUtil.getTailPath=function(H){var G=E(H);return C.pathUtil.getPathSegment(H,G+1)};var B=function(I,H){for(var G=0;G<H.length;++G){var J=H.charAt(G);if(J==="."||J==="\\"||J==="}"){I+="\\"}I+=J}return I};C.pathUtil.composePath=function(G,H){if(G.length!==0){G+="."}return B(G,H)};C.pathUtil.matchPath=function(G,J){var I="";while(true){if(!G){break}if(!J){return null}var H=C.pathUtil.getHeadPath(G);var K=C.pathUtil.getHeadPath(J);if(H!=="*"&&H!==K){return null}I=C.pathUtil.composePath(I,K);G=C.pathUtil.getFromHeadPath(G);J=C.pathUtil.getFromHeadPath(J)}return I};C.model.applyChangeRequest=function(H,K){if(K.type==="ADD"){C.model.setBeanValue(H,K.path,K.value)}else{if(K.type==="DELETE"){var I=C.pathUtil.getToTailPath(K.path);var G=C.pathUtil.getTailPath(K.path);var J=C.model.getBeanValue(H,J);delete J[G]}}};C.makeChangeApplier=function(H){var I={guards:C.event.getEventFirer(false,true),modelChanged:C.event.getEventFirer(false,false)};var J={model:H};function K(L,M){return function(P,N){var O=N[M];return C.pathUtil.matchPath(P[L],O.path)}}function G(O,N,M,P){var L=K(M,P);O[N]={addListener:function(Q,S,R){S[M]=Q;I[N].addListener(S,R,L)},removeListener:function(Q){I[N].removeListener(Q)}}}G(J,"guards","guardedPathSpec",1);G(J,"modelChanged","triggerPathSpec",2);J.fireChangeRequest=function(M){if(!M.type){M.type="ADD"}var L=I.guards.fire(H,M);if(L===false){return }var N={};C.model.copyModel(N,H);C.model.applyChangeRequest(H,M);I.modelChanged.fire(H,N,M)};J.requestChange=function(O,N,L){var M={path:O,value:N,type:L};J.fireChangeRequest(M)};return J};C.makeSuperApplier=function(){var H=[];var G={};G.addSubApplier=function(I,J){H.push({path:I,subApplier:J})};G.fireChangeRequest=function(L){for(var K=0;K<H.length;++K){var M=H[K].path;if(L.path.indexOf(M)===0){var J=L.path.substring(M.length+1);var I=C.copy(L);I.path=J;H[K].subApplier.fireChangeRequest(I)}}};return G};C.attachModel=function(G,M,K){var I=C.model.parseEL(M);for(var L=0;L<I.length-1;++L){var H=I[L];var J=G[H];if(!J){G[H]=J={}}G=J}G[I[I.length-1]]=K};C.assembleModel=function(G){var H={};var J=C.makeSuperApplier();var I={model:H,applier:J};for(path in G){var K=G[path];C.attachModel(H,path,K.model);if(K.applier){J.addSubApplier(path,K.applier)}}return I}})(jQuery,fluid_1_1);var fluid_1_1=fluid_1_1||{};var fluid=fluid||fluid_1_1;(function(T,P){P.thatistBridge=function(l,n){var m=function(o){var q=o.split(".");var p=n;for(var t=0;t<q.length;++t){p=p[q[t]]}var s=[this];if(arguments.length===2){s=s.concat(T.makeArray(arguments[1]))}var r=p.apply(null,s);this.that=function(){return r};var u=typeof (r);return !r||u==="string"||u==="number"||u==="boolean"||r&&r.length!==undefined?r:this};T.fn[l]=m;return m};P.thatistBridge("fluid",P);P.thatistBridge("fluid_1_1",fluid_1_1);var j="fluid-keyboard-a11y";var J=function(n,l){var m=T(n).data(j);return m?m[l]:undefined};var L=function(n,l,m){T(n).each(function(){var o=T.data(this,j)||{};o[l]=m;T.data(this,j,o)})};var M="disabled";if(T.event.special.focusin){M=null;T(document).bind("focusin",function(l){M=l.target})}P.getLastFocusedElement=function(){if(M==="disabled"){P.fail("Focus manager not enabled - please include jquery.delegate.js or equivalent for support of 'focusin' event")}return M};var i=function(){return T.browser.msie?"tabIndex":"tabindex"};var U=function(l){if(l.length<=0){return false}return T(l[0]).is("a, input, button, select, area, textarea, object")};var X=function(m){if(m.length<=0){return undefined}if(!P.tabindex.hasAttr(m)){return U(m)?Number(0):undefined}var l=m.attr(i());return Number(l)};var V=function(l,m){return l.each(function(n,o){T(o).attr(i(),m)})};P.tabindex=function(m,l){m=T(m);if(l!==null&&l!==undefined){return V(m,l)}else{return X(m)}};P.tabindex.remove=function(l){l=T(l);return l.each(function(m,n){T(n).removeAttr(i())})};P.tabindex.hasAttr=function(m){m=T(m);if(m.length<=0){return false}var l=m.map(function(){var n=this.getAttributeNode(i());return n?n.specified:false});return l.length===1?l[0]:l};P.tabindex.has=function(l){l=T(l);return P.tabindex.hasAttr(l)||U(l)};var G="enablement";P.enabled=function(m,l){m=T(m);if(l===undefined){return J(m,G)!==false}else{T("*",m).each(function(){if(J(this,G)!==undefined){L(this,G,l)}else{if(/select|textarea|input/i.test(this.nodeName)){T(this).attr("disabled",!l)}}});L(m,G,l)}};P.a11y=T.a11y||{};P.a11y.orientation={HORIZONTAL:0,VERTICAL:1,BOTH:2};var D={next:T.ui.keyCode.DOWN,previous:T.ui.keyCode.UP};var Q={next:T.ui.keyCode.RIGHT,previous:T.ui.keyCode.LEFT};var B=function(l){return l.jquery?l[0]:l};var N=function(l){l.each(function(m,n){n=T(n);if(!n.fluid("tabindex.has")||n.fluid("tabindex")<0){n.fluid("tabindex",0)}})};P.tabbable=function(l){l=T(l);N(l)};var d="selectionContext";var b=-32768;var K=function(l){if(l.options.onLeaveContainer){l.options.onLeaveContainer(l.selectables[l.activeItemIndex])}else{if(l.options.onUnselect){l.options.onUnselect(l.selectables[l.activeItemIndex])}}if(!l.options.rememberSelectionState){l.activeItemIndex=b}};var F=function(l,m){if(m){m(l)}};var W=function(m,l){if(l&&m){l(m)}};var I=function(m,l){W(m,l.options.onUnselect)};var S=function(l,m){I(m.selectedElement(),m);l=B(l);var n=m.selectables.index(l);if(n===-1){return }m.activeItemIndex=n;F(l,m.options.onSelect)};var g=function(l){return function(m){S(m.target,l);return m.stopPropagation()}};var R=function(l){return function(m){I(m.target,l);return m.stopPropagation()}};var k=function(l){var m=l.selectables;if(l.activeItemIndex>=m.length){l.activeItemIndex=0}if(l.activeItemIndex<0&&l.activeItemIndex!==b){l.activeItemIndex=m.length-1}if(l.activeItemIndex>=0){T(m[l.activeItemIndex]).focus()}};var C=function(l){I(l.selectedElement(),l);if(l.activeItemIndex===b){l.activeItemIndex=-1}};var O=function(l){C(l);++l.activeItemIndex;k(l)};var E=function(l){C(l);--l.activeItemIndex;k(l)};var Z=function(l,n,m){return function(o){if(o.which===n.next){O(l);o.preventDefault()}else{if(o.which===n.previous){E(l);o.preventDefault()}}}};var e=function(l){var m;if(l===P.a11y.orientation.HORIZONTAL){m=Q}else{if(l===P.a11y.orientation.VERTICAL){m=D}}return m};var h=function(l){return function(m){if(m.which!==T.ui.keyCode.TAB){return }K(l);if(m.shiftKey){l.focusIsLeavingContainer=true}}};var Y=function(l){return function(m){var o=l.options.autoSelectFirstItem;var n=typeof (o)==="function"?o():o;if(l.focusIsLeavingContainer){n=false}if(n&&m.target===l.container.get(0)){if(l.activeItemIndex===b){l.activeItemIndex=0}T(l.selectables[l.activeItemIndex]).focus()}return m.stopPropagation()}};var A=function(l){return function(m){l.focusIsLeavingContainer=false;return m.stopPropagation()}};var a=function(m,p,q){var n=T.extend(true,{},p,q);var r=e(n.direction);var l=n.selectableElements?n.selectableElements:m.find(n.selectableSelector);var o={container:m,activeItemIndex:b,selectables:l,focusIsLeavingContainer:false,options:n};
o.selectablesUpdated=function(s){if(typeof (o.options.selectablesTabindex)==="number"){o.selectables.fluid("tabindex",o.options.selectablesTabindex)}o.selectables.unbind("focus."+j);o.selectables.unbind("blur."+j);o.selectables.bind("focus."+j,g(o));o.selectables.bind("blur."+j,R(o));if(s){S(s,o)}else{k(o)}};o.refresh=function(){if(!o.options.selectableSelector){throw ("Cannot refresh selectable context which was not initialised by a selector")}o.selectables=m.find(n.selectableSelector);o.selectablesUpdated()};o.selectedElement=function(){return o.activeItemIndex<0?null:o.selectables[o.activeItemIndex]};if(r){m.keydown(Z(o,r))}m.keydown(h(o));m.focus(Y(o));m.blur(A(o));o.selectablesUpdated();return o};P.selectable=function(n,l){n=T(n);var m=a(n,P.selectable.defaults,l);L(n,d,m);return m};P.selectable.select=function(m,l){T(l).focus()};P.selectable.selectNext=function(l){l=T(l);O(J(l,d))};P.selectable.selectPrevious=function(l){l=T(l);E(J(l,d))};P.selectable.currentSelection=function(m){m=T(m);var l=J(m,d);return T(l.selectedElement())};P.selectable.defaults={direction:P.a11y.orientation.VERTICAL,selectablesTabindex:-1,autoSelectFirstItem:true,rememberSelectionState:true,selectableSelector:".selectable",selectableElements:null,onSelect:null,onUnselect:null,onLeaveContainer:null};var H=function(q,m){if(!q.modifier){return true}var n=q.modifier;var o=n&&m.ctrlKey;var l=n&&m.altKey;var p=n&&m.shiftKey;return o||l||p};var f=function(l){return function(m){var p=m.target;if(!P.enabled(m.target)){return }var o=m.which?m.which:m.keyCode;if(o===l.key&&l.activateHandler&&H(l,m)){var n=T.Event("fluid-activate");T(m.target).trigger(n,[l.activateHandler]);if(n.isDefaultPrevented()){m.preventDefault()}}}};var c=function(o,r,l,m){var q=[];T(l).each(function(s,t){q.push({modifier:null,key:t,activateHandler:r})});if(m&&m.additionalBindings){q=q.concat(m.additionalBindings)}L(o,G,true);for(var n=0;n<q.length;++n){var p=q[n];o.keydown(f(p))}o.bind("fluid-activate",function(s,t){t=t||r;return t?t(s):null})};P.activatable=function(n,m,l){n=T(n);c(n,m,P.activatable.defaults.keys,l)};P.activate=function(l){T(l).trigger("fluid-activate")};P.activatable.defaults={keys:[T.ui.keyCode.ENTER,T.ui.keyCode.SPACE]}})(jQuery,fluid_1_1);var whitespace="\n\r\t ";var closedTags={abbr:true,br:true,col:true,img:true,input:true,link:true,meta:true,param:true,hr:true,area:true,embed:true};XMLP=function(A){this.m_xml=A;this.m_iP=0;this.m_iState=XMLP._STATE_PROLOG;this.m_stack=[];this.m_attributes={};this.m_emitSynthetic=false};XMLP._NONE=0;XMLP._ELM_B=1;XMLP._ELM_E=2;XMLP._ELM_EMP=3;XMLP._ATT=4;XMLP._TEXT=5;XMLP._ENTITY=6;XMLP._PI=7;XMLP._CDATA=8;XMLP._COMMENT=9;XMLP._DTD=10;XMLP._ERROR=11;XMLP._CONT_XML=0;XMLP._CONT_ALT=1;XMLP._ATT_NAME=0;XMLP._ATT_VAL=1;XMLP._STATE_PROLOG=1;XMLP._STATE_DOCUMENT=2;XMLP._STATE_MISC=3;XMLP._errs=[];XMLP._errs[XMLP.ERR_CLOSE_PI=0]="PI: missing closing sequence";XMLP._errs[XMLP.ERR_CLOSE_DTD=1]="DTD: missing closing sequence";XMLP._errs[XMLP.ERR_CLOSE_COMMENT=2]="Comment: missing closing sequence";XMLP._errs[XMLP.ERR_CLOSE_CDATA=3]="CDATA: missing closing sequence";XMLP._errs[XMLP.ERR_CLOSE_ELM=4]="Element: missing closing sequence";XMLP._errs[XMLP.ERR_CLOSE_ENTITY=5]="Entity: missing closing sequence";XMLP._errs[XMLP.ERR_PI_TARGET=6]="PI: target is required";XMLP._errs[XMLP.ERR_ELM_EMPTY=7]="Element: cannot be both empty and closing";XMLP._errs[XMLP.ERR_ELM_NAME=8]='Element: name must immediatly follow "<"';XMLP._errs[XMLP.ERR_ELM_LT_NAME=9]='Element: "<" not allowed in element names';XMLP._errs[XMLP.ERR_ATT_VALUES=10]="Attribute: values are required and must be in quotes";XMLP._errs[XMLP.ERR_ATT_LT_NAME=11]='Element: "<" not allowed in attribute names';XMLP._errs[XMLP.ERR_ATT_LT_VALUE=12]='Attribute: "<" not allowed in attribute values';XMLP._errs[XMLP.ERR_ATT_DUP=13]="Attribute: duplicate attributes not allowed";XMLP._errs[XMLP.ERR_ENTITY_UNKNOWN=14]="Entity: unknown entity";XMLP._errs[XMLP.ERR_INFINITELOOP=15]="Infinite loop";XMLP._errs[XMLP.ERR_DOC_STRUCTURE=16]="Document: only comments, processing instructions, or whitespace allowed outside of document element";XMLP._errs[XMLP.ERR_ELM_NESTING=17]="Element: must be nested correctly";XMLP.prototype._checkStructure=function(C){var A=this.m_stack;if(XMLP._STATE_PROLOG==this.m_iState){this.m_iState=XMLP._STATE_DOCUMENT}if(XMLP._STATE_DOCUMENT===this.m_iState){if((XMLP._ELM_B==C)||(XMLP._ELM_EMP==C)){this.m_stack[A.length]=this.getName()}if((XMLP._ELM_E==C)||(XMLP._ELM_EMP==C)){if(A.length===0){return XMLP._NONE}var B=A[A.length-1];this.m_stack.length--;if(B===null||B!==this.getName()){return this._setErr(XMLP.ERR_ELM_NESTING)}}}return C};XMLP.prototype.getColumnNumber=function(){return SAXStrings.getColumnNumber(this.m_xml,this.m_iP)};XMLP.prototype.getContent=function(){return(this.m_cSrc==XMLP._CONT_XML)?this.m_xml:this.m_cAlt};XMLP.prototype.getContentBegin=function(){return this.m_cB};XMLP.prototype.getContentEnd=function(){return this.m_cE};XMLP.prototype.getLineNumber=function(){return SAXStrings.getLineNumber(this.m_xml,this.m_iP)};XMLP.prototype.getName=function(){return this.m_name};XMLP.prototype.next=function(){return this._checkStructure(this._parse())};XMLP.prototype._parse=function(){var C=this.m_iP;var A=this.m_xml;if(C===A.length){return XMLP._NONE}var D=A.charAt(C);if(D==="<"){var B=A.charAt(C+1);if(B==="?"){return this._parsePI(C+2)}else{if(B==="!"){if(C===A.indexOf("<!DOCTYPE",C)){return this._parseDTD(C+9)}else{if(C===A.indexOf("<!--",C)){return this._parseComment(C+4)}else{if(C===A.indexOf("<![CDATA[",C)){return this._parseCDATA(C+9)}}}}else{return this._parseElement(C+1)}}}else{return this._parseText(C)}};var nameRegex=/([^\s\/>]+)/g;var attrStartRegex=/\s*([\w:]+)/gm;var attrValRegex=/\"([^\"]*)\"\s*/gm;var attrValIERegex=/([^\>\s]+)\s*/gm;var closeRegex=/\s*<\//g;XMLP.prototype._parseElement=function(M){var J,D,G;var N,E,A;D=J=this.m_xml.indexOf(">",M);if(J==-1){return this._setErr(XMLP.ERR_CLOSE_ELM)}if(this.m_xml.charAt(M)=="/"){N=XMLP._ELM_E;M++}else{N=XMLP._ELM_B}if(this.m_xml.charAt(J-1)=="/"){if(N==XMLP._ELM_E){return this._setErr(XMLP.ERR_ELM_EMPTY)}N=XMLP._ELM_EMP;D--}nameRegex.lastIndex=M;var K=nameRegex.exec(this.m_xml);if(!K){return this._setErr(XMLP.ERR_ELM_NAME)}E=K[1].toLowerCase();if("li"===E&&N!==XMLP._ELM_E&&this.m_stack.length>0&&this.m_stack[this.m_stack.length-1]==="li"&&!this.m_emitSynthetic){this.m_name="li";this.m_emitSynthetic=true;return XMLP._ELM_E}this.m_attributes={};this.m_cAlt="";if(nameRegex.lastIndex<D){this.m_iP=nameRegex.lastIndex;while(this.m_iP<D){attrStartRegex.lastIndex=this.m_iP;var C=attrStartRegex.exec(this.m_xml);if(!C){return this._setErr(XMLP.ERR_ATT_VALUES)}var H=C[1].toLowerCase();var L;if(this.m_xml.charCodeAt(attrStartRegex.lastIndex)===61){var B=this.m_xml.charCodeAt(attrStartRegex.lastIndex+1)===34?attrValRegex:attrValIERegex;B.lastIndex=attrStartRegex.lastIndex+1;C=B.exec(this.m_xml);if(!C){return this._setErr(XMLP.ERR_ATT_VALUES)}L=C[1]}else{L=H;B=attrStartRegex}if(!this.m_attributes[H]){this.m_attributes[H]=L}else{return this._setErr(XMLP.ERR_ATT_DUP)}this.m_iP=B.lastIndex}}if(E.indexOf("<")!=-1){return this._setErr(XMLP.ERR_ELM_LT_NAME)}this.m_name=E;this.m_iP=J+1;if(closedTags[E]){closeRegex.lastIndex=J+1;var F=closeRegex.exec;if(F){var I=this.m_xml.indexOf(E,F.lastIndex);if(I===F.lastIndex){return N}else{return XMLP._ELM_EMP}}}this.m_emitSynthetic=false;return N};XMLP.prototype._parseCDATA=function(A){var B=this.m_xml.indexOf("]]>",A);if(B==-1){return this._setErr(XMLP.ERR_CLOSE_CDATA)}this._setContent(XMLP._CONT_XML,A,B);this.m_iP=B+3;return XMLP._CDATA};XMLP.prototype._parseComment=function(A){var B=this.m_xml.indexOf("-->",A);if(B==-1){return this._setErr(XMLP.ERR_CLOSE_COMMENT)}this._setContent(XMLP._CONT_XML,A-4,B+3);this.m_iP=B+3;return XMLP._COMMENT};XMLP.prototype._parseDTD=function(B){var E,A,C,D;E=this.m_xml.indexOf(">",B);if(E==-1){return this._setErr(XMLP.ERR_CLOSE_DTD)}C=this.m_xml.indexOf("[",B);A=((C!=-1)&&(C<E))?"]>":">";while(true){if(E==D){return this._setErr(XMLP.ERR_INFINITELOOP)}D=E;E=this.m_xml.indexOf(A,B);if(E==-1){return this._setErr(XMLP.ERR_CLOSE_DTD)}if(this.m_xml.substring(E-1,E+2)!="]]>"){break}}this.m_iP=E+A.length;return XMLP._DTD};XMLP.prototype._parsePI=function(B){var E,A,D,F,C;E=this.m_xml.indexOf("?>",B);if(E==-1){return this._setErr(XMLP.ERR_CLOSE_PI)}A=SAXStrings.indexOfNonWhitespace(this.m_xml,B,E);if(A==-1){return this._setErr(XMLP.ERR_PI_TARGET)}D=SAXStrings.indexOfWhitespace(this.m_xml,A,E);if(D==-1){D=E}F=SAXStrings.indexOfNonWhitespace(this.m_xml,D,E);if(F==-1){F=E}C=SAXStrings.lastIndexOfNonWhitespace(this.m_xml,F,E);if(C==-1){C=E-1}this.m_name=this.m_xml.substring(A,D);this._setContent(XMLP._CONT_XML,F,C+1);this.m_iP=E+2;return XMLP._PI};XMLP.prototype._parseText=function(A){var B=this.m_xml.indexOf("<",A);if(B==-1){B=this.m_xml.length}this._setContent(XMLP._CONT_XML,A,B);this.m_iP=B;return XMLP._TEXT};XMLP.prototype._setContent=function(B){var A=arguments;if(XMLP._CONT_XML==B){this.m_cAlt=null;this.m_cB=A[1];this.m_cE=A[2]}else{this.m_cAlt=A[1];this.m_cB=0;this.m_cE=A[1].length}this.m_cSrc=B};XMLP.prototype._setErr=function(B){var A=XMLP._errs[B];this.m_cAlt=A;this.m_cB=0;this.m_cE=A.length;this.m_cSrc=XMLP._CONT_ALT;return XMLP._ERROR};SAXStrings={};SAXStrings.WHITESPACE=" \t\n\r";SAXStrings.QUOTES="\"'";SAXStrings.getColumnNumber=function(D,C){if(!D){return -1}C=C||D.length;var A=D.substring(0,C).split("\n");A.length--;var B=A.join("\n").length;return C-B};SAXStrings.getLineNumber=function(B,A){if(!B){return -1}A=A||B.length;return B.substring(0,A).split("\n").length};SAXStrings.indexOfNonWhitespace=function(E,A,C){if(!E){return -1}A=A||0;C=C||E.length;for(var B=A;B<C;++B){var D=E.charAt(B);if(D!==" "&&D!=="\t"&&D!=="\n"&&D!=="\r"){return B}}return -1};SAXStrings.indexOfWhitespace=function(D,A,C){if(!D){return -1}A=A||0;C=C||D.length;for(var B=A;B<C;B++){if(SAXStrings.WHITESPACE.indexOf(D.charAt(B))!=-1){return B}}return -1};SAXStrings.lastIndexOfNonWhitespace=function(D,A,C){if(!D){return -1
}A=A||0;C=C||D.length;for(var B=C-1;B>=A;B--){if(SAXStrings.WHITESPACE.indexOf(D.charAt(B))==-1){return B}}return -1};SAXStrings.replace=function(E,A,D,C,B){if(!E){return""}A=A||0;D=D||E.length;return E.substring(A,D).split(C).join(B)};function __unescapeString(A){return A.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&apos;/g,"'")}function __escapeString(E){var F=/&/g;var C=/</g;var A=/>/g;var B=/"/g;var D=/'/g;E=E.replace(F,"&amp;");E=E.replace(C,"&lt;");E=E.replace(A,"&gt;");E=E.replace(B,"&quot;");E=E.replace(D,"&apos;");return E}fluid_1_1=fluid_1_1||{};(function(B,C){C.parseTemplate=function(s,p,Z,g,h){h=h||{};var e;var Q;var i;var V=0;var N=0;var f=false;var j=-1;var q=-1;var P=h;var p;var Y=false;var U=[];var S=[];XMLLump=function(v,t){return{nestingdepth:t,lumpindex:v,parent:e}};function n(x,t,w){e.rootlump=XMLLump(0,-1);i=[e.rootlump];V=0;N=0;f=false;j=-1;q=-1;p=x;Y=t;U=w;if(U){for(var v=0;v<U.length;++v){S[v]=[];U[v].tree=C.parseSelector(U[v].selector)}}}function d(){for(var t=i.length-1;t>=0;--t){var v=i[t];if(v.rsfID!==undefined){return v}}return e.rootlump}function r(){var t=XMLLump(V,N);if(Y){t.line=Q.getLineNumber();t.column=Q.getColumnNumber()}e.lumps[V]=t;++V;return t}function X(v,t,w){var x=v[t];if(!x){x=[];v[t]=x}x[x.length]=w}function k(t,v){if(t.indexOf("scr=contribute-")!==-1){var w=t.substring("scr=contribute-".length);X(e.collectmap,w,v)}}function T(v){v=C.rewriteUrlPrefix(P,v);if(!P.rebaseURLs){return v}var t=C.parseUri(v);if(t.protocol||v.charAt(0)==="/"){return v}else{return p+v}}function W(t){return"<"+t.tagname+">"}function b(v,t){if(!t){return false}return(" "+t+" ").indexOf(" "+v+" ")!==-1}function L(w,x){if(w.predList){for(var v=0;v<w.predList.length;++v){var t=w.predList[v];if(t.id&&x.attributemap.id!==t.id){return false}if(t.clazz&&!b(t.clazz,x.attributemap["class"])){return false}if(t.tag&&x.tagname!==t.tag){return false}}return true}}function l(AB){var y=undefined;if(U){for(var w=0;w<U.length;++w){var z=U[w];var AA=S[w];var t=AA.length;if(t<z.tree.length){var v=z.tree[t];if(t>0){if(z.tree[t-1].child&&AA[t-1]!==AB.nestingdepth-1){continue}}var x=L(v,AB);if(x){AA[AA.length]=AB.nestingdepth;if(AA.length===z.tree.length){if(y!==undefined){C.fail("Cutpoint specification error - node "+W(AB)+" has already matched with rsf:id of "+y)}if(z.id===undefined||z.id===null){C.fail("Error in cutpoints list - entry at position "+w+" does not have an id set")}y=z.id}}}}}return y}function M(){if(U){for(var t=0;t<U.length;++t){var v=S[t];if(v.length>0&&v[v.length-1]===N){v.length--}}}}function O(AC,AG){++N;if(f){f=false;var y=r();y.nestingdepth--}if(e.firstdocumentindex===-1){e.firstdocumentindex=V}var AB=r();var t=i[i.length-1];AB.uplump=t;var AE=Q.getName();AB.tagname=AE;var AF=AB.attributemap=Q.m_attributes;var AD=AF[C.ID_ATTRIBUTE];if(AD===undefined){AD=l(AB)}for(var x in AF){var AA=AF[x];if(/href|src|codebase|action/.test(x)){AA=T(AA);AF[x]=AA}else{if(AD===undefined&&/for|headers/.test(x)){AD=AF[C.ID_ATTRIBUTE]="scr=null"}}}if(AD){if(AD.charCodeAt(0)===126){AD=AD.substring(1);AB.elide=true}k(AD,AB);AB.rsfID=AD;var w=d();if(!w.downmap){w.downmap={}}X(w.downmap,AD,AB);X(e.globalmap,AD,AB);var v=AD.indexOf(":");if(v!==-1){var z=AD.substring(0,v);if(!t.finallump){t.finallump={}}t.finallump[z]=AB}}AB.text="<"+AE+C.dumpAttributes(AF)+">";i[i.length]=AB;if(AC){R()}}function R(){M();var t=r();--N;t.text="</"+Q.getName()+">";var v=i[i.length-1];v.close_tag=e.lumps[V-1];i.length--;f=true}function c(){if(j!==-1){if(e.firstdocumentindex===-1){e.firstdocumentindex=V}var v=Q.getContent().substr(j,q-j);f=false;var t=r();t.text=v;j=-1}}e=C.XMLViewTemplate();n(p,h.debugMode,g);var u=s.indexOf(C.ID_ATTRIBUTE);if(Z){var m=s.indexOf(">",u);Q=new XMLP(s.substring(m+1))}else{Q=new XMLP(s)}parseloop:while(true){var o=Q.next();switch(o){case XMLP._ELM_B:c();O(false,"");break;case XMLP._ELM_E:c();R();break;case XMLP._ELM_EMP:c();O(true,"");break;case XMLP._PI:case XMLP._DTD:j=-1;continue;case XMLP._TEXT:case XMLP._ENTITY:case XMLP._CDATA:case XMLP._COMMENT:if(j===-1){j=Q.m_cB}q=Q.m_cE;break;case XMLP._ERROR:C.setLogging(true);var a="Error parsing template: "+Q.m_cAlt+" at line "+Q.getLineNumber();C.log(a);C.log("Just read: "+Q.m_xml.substring(Q.m_iP-30,Q.m_iP));C.log("Still to read: "+Q.m_xml.substring(Q.m_iP,Q.m_iP+30));C.fail(a);break parseloop;case XMLP._NONE:break parseloop}}c();return e};C.debugLump=function(M){var L=M.text;L+=" at ";L+="lump line "+M.line+" column "+M.column+" index "+M.lumpindex;L+=M.parent.href===null?"":" in file "+M.parent.href;return L};C.rewriteUrlPrefix=function(M,L){var O=M.rewriteUrlPrefixes;if(O){for(var N=0;N<O.length;++N){if(L.indexOf(O[N].source)===0){return O[N].target+L.substring(O[N].source.length)}}}return L};C.parseUri=function(O){var P=C.parseUri.options,N=P.parser[P.strictMode?"strict":"loose"].exec(O);for(var L=0,M={};L<14;L++){M[P.key[L]]=N[L]||""}M[P.q.name]={};M[P.key[12]].replace(P.q.parser,function(R,Q,S){if(Q){M[P.q.name][Q]=S}});return M};C.parseUri.options={strictMode:false,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};C.ID_ATTRIBUTE="rsf:id";C.getPrefix=function(M){var L=M.indexOf(":");return L===-1?M:M.substring(0,L)};C.SplitID=function(N){var M={};var L=N.indexOf(":");if(L===-1){M.prefix=N}else{M.prefix=N.substring(0,L);M.suffix=N.substring(L+1)}return M};C.XMLViewTemplate=function(){return{globalmap:{},collectmap:{},lumps:[],firstdocumentindex:-1}};C.fetchResources=function(O,R){var S=function(U){return{success:function(V){U.resourceText=V;U.resourceKey=U.href;U.queued=false;C.fetchResources(O,R)},error:function(V,X,W){U.fetchError={status:V.status,textStatus:V.textStatus,errorThrown:W};U.queued=false;C.fetchResources(O,R)}}};var M=true;for(var Q in O){var P=O[Q];if(P.href&&!(P.resourceKey||P.fetchError)){if(!P.queued){var L=S(P);var T={url:P.href,success:L.success,error:L.error};B.extend(true,T,P.options);P.queued=true;B.ajax(T)}if(P.queued){M=false}}else{if(P.nodeId&&!P.resourceText){var N=document.getElementById(P.nodeId);P.resourceText=C.dom.getElementText(N);P.resourceKey=P.nodeId}}}if(M){if(B.browser.mozilla){setTimeout(function(){R(O)},1)}else{R(O)}}};C.XMLEncode=function(L){return L.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")};C.dumpAttributes=function(L){var N="";for(var O in L){var M=L[O];if(M!==null&&M!==undefined){N+=" "+O+'="'+M+'"'}}return N};C.aggregateMMap=function(O,N){for(var L in N){var M=O[L];if(!M){O[L]=[]}O[L]=O[L].concat(N[L])}};var H=/(\\u[\dabcdef]{4}|\\x[\dabcdef]{2})/g;C.unescapeProperties=function(M){M=M.replace(H,function(Q){var R=Q.substring(2);var P=parseInt(R,16);return String.fromCharCode(P)});var O=0;while(true){var L=M.indexOf("\\",O);if(L===-1){break}if(L===M.length-1){return[M.substring(0,M.length-1),true]}var N=M.charAt(L+1);if(N==="n"){N="\n"}if(N==="r"){N="\r"}if(N==="t"){N="\t"}M=M.substring(0,L)+N+M.substring(L+2);O=L+1}return[M,false]};var J=/[^\\][\s:=]/;C.parseJavaProperties=function(R){var M={};R=R.replace(/\r\n/g,"\n");R=R.replace(/\r/g,"\n");lines=R.split("\n");var S,Q,L,U,P;for(var N=0;N<lines.length;++N){var T=B.trim(lines[N]);if(!T||T.charAt(0)==="#"||T.charAt(0)==="!"){continue}if(!S){L="";var O=T.search(J);if(O===-1){Q=T;U=""}else{Q=B.trim(T.substring(0,O+1));U=B.trim(T.substring(O+2));if(U.charAt(0)===":"||U.charAt(0)==="="){U=B.trim(U.substring(1))}}Q=C.unescapeProperties(Q)[0];P=C.unescapeProperties(U)}else{P=C.unescapeProperties(T)}S=P[1];if(!P[1]){M[Q]=L+P[0]}else{L+=P[0]}}return M};C.parseTemplates=function(P,R,L){var N=[];N.globalmap={};for(var Q=0;Q<R.length;++Q){var O=P[R[Q]];var S=O.href.lastIndexOf("/");var M=S===-1?"":O.href.substring(0,S+1);var T=C.parseTemplate(O.resourceText,M,L.scanStart&&Q===0,O.cutpoints,L);if(Q===0){C.aggregateMMap(N.globalmap,T.globalmap)}T.href=O.href;T.baseURL=M;T.resourceKey=O.resourceKey;N[Q]=T;C.aggregateMMap(N.globalmap,T.rootlump.downmap)}return N};var E="(?:[\\w\u0128-\uFFFF*_-]|\\\\.)";var D=new RegExp("^>\\s*("+E+"+)");var A=new RegExp("^("+E+"+)(#)("+E+"+)");var I=new RegExp("^s*([#.]?)("+E+"*)");var G=new RegExp("([#.]?)("+E+"+)","g");var F=new RegExp("\\s*(>)?\\s*","g");var K=new RegExp("^\\w*$");C.parseSelector=function(R){var M=[];R=B.trim(R);G.lastIndex=0;var Q=0;while(true){var O=[];while(true){var U=G.exec(R);if(!U||U.index!==Q){break}var P={};var T=U[2];if(U[1]===""){P.tag=T}else{if(U[1]==="#"){P.id=T}else{if(U[1]==="."){P.clazz=T}}}O[O.length]=P;Q=G.lastIndex}F.lastIndex=Q;var L={predList:O};var N=F.exec(R);if(!N||N.index!==Q){var S=R.substring(Q);C.fail("Error in selector string - can not match child selector expression at "+S)}if(N[1]===">"){L.child=true}M[M.length]=L;if(F.lastIndex>=R.length){break}Q=F.lastIndex;G.lastIndex=F.lastIndex}return M}})(jQuery,fluid_1_1);fluid_1_1=fluid_1_1||{};(function(H,K){function O(P){return"as child of "+(P.parent.fullID?"component with full ID "+P.parent.fullID:"root")}function J(S){var U="";var Q=S;if(S.children===undefined){U=S.ID+(S.localID!==undefined?S.localID:"");Q=S.parent}while(Q.parent){var T=Q.parent;if(Q.fullID!==undefined){U=Q.fullID+U;return U}if(Q.noID===undefined){var P=Q.ID;if(P===undefined){K.fail("Error in component tree - component found with no ID "+O(T)+": please check structure")}var R=P.indexOf(":");var V=R===-1?P:P.substring(0,R);U=V+":"+(Q.localID===undefined?"":Q.localID)+":"+U}Q=T}return U}function E(P){return K.isPrimitive(P)||P instanceof Array&&(P.length===0||typeof (P[0])==="string")}function B(R,Q){if(E(R)){return{componentType:"UIBound",value:R,ID:Q}
}else{var P=G(R);if(P.ID){return{ID:Q,componentType:"UIContainer",children:[P]}}else{P.ID=Q;return P}}}function F(R){if(!(R instanceof Array)){var S=[];for(var Q in R){var T=R[Q];if(T instanceof Array){for(var P=0;P<T.length;++P){var U=B(T[P],Q);S[S.length]=U}}else{S[S.length]=B(T,Q)}}return S}else{return R}}function C(P,Q){if(P.value===undefined&&P.valuebinding!==undefined){if(!Q){K.fail("Cannot perform value fixup for valuebinding "+P.valuebinding+" since no model was supplied to rendering")}P.value=K.model.getBeanValue(Q,P.valuebinding)}}function N(Q,R,P){if(Q[R]!==undefined){if(E(Q[R])){Q[R]={value:Q[R]}}}else{Q[R]={value:null}}C(Q[R],P)}var L={children:"UIContainer",value:"UIBound",valuebinding:"UIBound",messagekey:"UIMessage",markup:"UIVerbatim",selection:"UISelect",target:"UILink",choiceindex:"UISelectChoice",functionname:"UIInitBlock"};function G(S,R){if(S){for(var T in L){if(S[T]!==undefined){S.componentType=L[T];break}}if(S.componentType===undefined&&S.ID!==undefined){S.componentType="UIBound"}}if(!S||S.componentType===undefined){var Q=S.decorators;if(Q){delete S.decorators}S={componentType:"UIContainer",children:S};S.decorators=Q}var P=S.componentType;if(P==="UIContainer"){S.children=F(S.children)}else{if(P==="UISelect"){N(S,"selection",R);N(S,"optionlist",R);N(S,"optionnames",R)}else{if(P==="UILink"){N(S,"target",R);N(S,"linktext",R)}}}return S}function I(Q,P){if(Q.submittingname===undefined&&Q.willinput!==false){Q.submittingname=P?P:Q.fullID}return Q.submittingname}function M(Y,V){if(Y.componentType===undefined){Y=G(Y,V)}if(Y.componentType!=="UIContainer"&&!Y.parent){Y={children:[Y]}}if(Y.children){Y.childmap={};for(var U=0;U<Y.children.length;++U){var Q=Y.children[U];if(Q.componentType===undefined){Q=G(Q,V);Y.children[U]=Q}Q.parent=Y;if(Q.ID===undefined){K.fail("Error in component tree: component found with no ID "+O(Q))}Y.childmap[Q.ID]=Q;var S=Q.ID.indexOf(":");if(S===-1){}else{var W=Q.ID.substring(0,S);var P=Y.childmap[W];if(!P){P=[];Y.childmap[W]=P}if(Q.localID===undefined&&P.length!==0){Q.localID=P.length}P[P.length]=Q}Q.fullID=J(Q);var R=Q.componentType;if(R=="UISelect"){Q.selection.fullID=Q.fullID+"-selection"}else{if(R=="UIInitBlock"){var X=Q.functionname+"(";for(var T=0;T<Q.arguments.length;++T){if(Q.arguments[T] instanceof K.ComponentReference){Q.arguments[T]=Q.parent.fullID+Q.arguments[T].reference}X+='"'+Q.arguments[T]+'"';if(T<Q.arguments.length-1){X+=", "}}Q.markup=X+")\n";Q.componentType="UIVerbatim"}else{if(R=="UIBound"){C(Q,V)}}}M(Q,V)}}return Y}K.NULL_STRING="\u25a9null\u25a9";var D={a:"href",link:"href",img:"src",frame:"src",script:"src",style:"src",input:"src",embed:"src",form:"action",applet:"codebase",object:"codebase"};K.renderer=function(Q,n,w,S){w=w||{};n=n||{};AY=w.debugMode;if(!w.messageLocator&&w.messageSource){w.messageLocator=K.resolveMessageSource(w.messageSource)}w.document=w.document||document;var e=S||{};var AA={};var AQ={};var AK={};var o={};var p={};var AJ="";var AY=false;var x=w;var AG=[];var g={};var AH={};function AV(Aa,AZ,Ab){return Aa.resourceKey+AZ.fullID+Ab}function m(Ae,AZ,Ab,Ag){var Af;var Ad=Ab?Ab[Ae]:null;if(Ad){for(var Aa=0;Aa<Ad.length;++Aa){var Ac=Ad[Aa];if(!Af&&Ac.rsfID==AZ){Af=Ac}if(Ac.rsfID==Ae){return Ac}}}return Af}function AS(Ac,Ae){var Ad=Ae.jointID?Ae.jointID:Ae.ID;var Ab=K.SplitID(Ad);var AZ=Ab.prefix+":";var Aa=m(Ad,AZ,Ac.downmap,Ae);if(Aa){return Aa}if(Ae.children){Aa=m(Ad,AZ,AA,Ae);if(Aa){return Aa}}return null}function k(AZ){if(!o[AZ.href]){K.aggregateMMap(p,AZ.collectmap);o[AZ.href]=true}}function r(Ae,Ab){for(var Ac=0;Ac<Ae.children.length;++Ac){var Af=Ae.children[Ac];if(Af.children){var Ah=AS(Ab,Af);if(Ah){AQ[Af.fullID]=Ah;var AZ=Ah.attributemap.id;if(AZ!==undefined){AK[AV(Ab.parent,Ae,AZ)]=Af.fullID}k(Ah.parent);r(Af,Ah)}}}if(Ab.downmap){for(var AZ in Ab.downmap){var Ag=Ab.downmap[AZ];for(var Ac=0;Ac<Ag.length;++Ac){var Ad=Ag[Ac];var Ai=Ad.attributemap.id;if(Ai!==undefined&&Ad.rsfID!==undefined){var Ah=AN(Ae,Ad.rsfID);if(Ah!==null){var Aa=Ah.fullID;if(Ah.componentType==="UISelect"){Aa=Aa+"-selection"}AK[AV(Ab.parent,Ae,Ai)]=Aa}}}}}}function l(Ab,Aa,AZ){AQ={};AK={};o={};p={};AA=Ab;AQ[Aa.fullID]=AZ;r(Aa,AZ)}function y(Ab,AZ){if(AZ.elide){return }var Aa={};H.extend(true,Aa,AZ.attributemap);d(Aa,Ab);h(Ab,Aa);AJ+="<"+AZ.tagname+" ";AJ+=K.dumpAttributes(Aa);AJ+=">"}function c(Aa,Ac,AZ){for(;Ac<AZ;++Ac){var Ab=Aa[Ac].text;if(Ab){AJ+=Aa[Ac].text}}}function z(Ab,Ae,AZ,Ad,Aa){var Af=Ae;while(true){if(Ae===Ab.length){break}var Ac=Ab[Ae];if(Ac.nestingdepth<AZ){break}if(Ac.rsfID!==undefined){if(!Aa){break}if(Aa&&Ac.nestingdepth>AZ+(Ad?0:1)){K.log("Error in component tree - leaf component found to contain further components - at "+Ac.toString())}else{break}}++Ae}if(!Ad&&(Ae==Ab.length||!Ab[Ae].rsfID)){--Ae}c(Ab,Af,Ae);return Ae}var i={};function X(){if(!i.iselide){AJ+="<"+i.uselump.tagname}}function AR(){if(!i.iselide){AJ+="</"+i.uselump.tagname+">"}}function AC(){c(i.uselump.parent.lumps,i.uselump.lumpindex+1,i.close.lumpindex+(i.iselide?0:1))}function AI(){if(!i.iselide){AJ+=K.dumpAttributes(i.attrcopy)}AF()}function AO(){if(i.iselide){AI()}else{AJ+=K.dumpAttributes(i.attrcopy);AJ+=">";i.nextpos=i.endopen.lumpindex}}function AF(){if(i.endopen.lumpindex===i.close.lumpindex){if(!i.iselide){AJ+="/>"}}else{if(!i.iselide){AJ+=">"}c(i.uselump.parent.lumps,i.endopen.lumpindex,i.close.lumpindex+(i.iselide?0:1))}}function AD(AZ){if(W(AZ)){AW(AZ)}else{AI()}}function AU(AZ){if(i.iselide){AD(i.value)}else{if(W(AZ)){AW(AZ)}else{AO()}}}function AW(AZ){AJ+=K.dumpAttributes(i.attrcopy);if(!i.iselide){AJ+=">"}AJ+=K.XMLEncode(AZ.toString());AR()}function W(AZ){return AZ!==null&&AZ!==undefined&&!V(AZ)}function V(AZ){return false}function AM(Aa,AZ){var Ab=AZ;return K.rewriteUrlPrefix(x,Ab)}function AT(Ab){AJ+='<input type="hidden" ';var Aa=Ab.virtual;var AZ={};AZ[Aa?"id":"name"]=Ab.name;AZ.value=Ab.value;AJ+=K.dumpAttributes(AZ);AJ+=" />\n"}function R(AZ,Aa){var Ae=i.uselump.tagname;var Ac=x.applier;function Ad(){K.applyChange(K.byId(Aa),undefined,Ac)}if(x.autoBind&&/input|select|textarea/.test(Ae)&&!g[Aa]){var Ab=[{jQuery:["change",Ad]}];if(H.browser.msie&&Ae==="input"&&/radio|checkbox/.test(i.attrcopy.type)){Ab.push({jQuery:["click",Ad]})}t(AZ,Ab,i.attrcopy,Aa)}}function j(AZ,Ab){if(AZ){var Aa=Ab?Ab:AZ;if(e&&Aa.submittingname&&Aa.valuebinding){e[Aa.submittingname]={name:Aa.submittingname,EL:Aa.valuebinding,oldvalue:Aa.value};R(AZ,AZ.fullID)}if(AZ.fossilizedbinding){AT(AZ.fossilizedbinding)}if(AZ.fossilizedshaper){AT(AZ.fossilizedshaper)}}}function b(AZ){if(!g[AZ.selection.fullID]){g[AZ.selection.fullID]=true;j(AZ.selection);j(AZ.optionlist);j(AZ.optionnames)}}function v(AZ,Ab){var Aa=AZ.selection;return Aa.value&&typeof (Aa.value)!=="string"&&typeof (Aa.value.length)==="number"?H.inArray(Ab,Aa.value,Ab)!==-1:Aa.value===Ab}function AL(AZ,Aa){AZ=AZ.parent;while(Aa.indexOf("..::")===0){Aa=Aa.substring(4);AZ=AZ.parent}return AZ.childmap[Aa]}function AP(Aa){var Ac=[];if(Aa.type){Ac[0]=Aa}else{for(var Ab in Aa){if(Ab==="$"){Ab="jQuery"}var Ad=Aa[Ab];var AZ={type:Ab};if(Ab==="jQuery"){AZ.func=Ad[0];AZ.args=Ad.slice(1)}else{if(Ab==="addClass"||Ab==="removeClass"){AZ.classes=Ad}else{if(Ab==="attrs"){AZ.attributes=Ad}else{if(Ab==="identify"){AZ.key=Ad}}}}Ac[Ac.length]=AZ}}return Ac}function t(Ad,Ah,Aa,Af){x.idMap=x.idMap||{};for(var Ac=0;Ac<Ah.length;++Ac){var Ab=Ah[Ac];var Ae=Ab.type;if(!Ae){var Ag=AP(Ab);t(Ad,Ag,Aa,Af);continue}if(Ae==="$"){Ae=Ab.type="jQuery"}if(Ae==="jQuery"||Ae==="event"||Ae==="fluid"){var AZ=d(Aa,Ad,true,Af);Ab.id=AZ;AG[AG.length]=Ab}else{if(Ae==="attrs"){H.extend(true,Aa,Ab.attributes)}else{if(Ae==="addClass"||Ae==="removeClass"){var Ai={nodeType:1,className:Aa["class"]||""};H(Ai)[Ae](Ab.classes);Aa["class"]=Ai.className}else{if(Ae==="identify"){var AZ=d(Aa,Ad,true,Af);x.idMap[Ab.key]=AZ}}}}}}function h(AZ,Aa){if(!AZ.decorators){return }if(AZ.decorators.length===undefined){AZ.decorators=AP(AZ.decorators)}t(AZ,AZ.decorators,Aa)}function q(Am){var Ae=i.attrcopy;var AZ=i.uselump.parent.lumps;var Ag=i.uselump.lumpindex;var Ak=Am.componentType;var Ap=i.uselump.tagname;h(Am,Ae);if(Ak==="UIMessage"){Ak="UIBound";if(!x.messageLocator){Am.value="[No messageLocator is configured in options - please consult documentation on options.messageSource]"}else{Am.value=x.messageLocator(Am.messagekey,Am.args)}}function Ab(At,Au){K.fail("Error in component tree - UISelectChoice with id "+At.fullID+Au)}if(Ak==="UIBound"||Ak==="UISelectChoice"){var Ah;if(Am.choiceindex!==undefined){if(Am.parentFullID){Ah=getAbsoluteComponent(view,Am.parentFullID);if(!Ah){Ab(Am," has parentFullID of "+Am.parentFullID+" which cannot be resolved")}}else{if(Am.parentRelativeID!==undefined){Ah=AL(Am,Am.parentRelativeID);if(!Ah){Ab(Am," has parentRelativeID of "+Am.parentRelativeID+" which cannot be resolved")}}else{Ab(Am," does not have either parentFullID or parentRelativeID set")}}I(Ah.selection);b(Ah)}var Ad=Ah?Ah.selection.submittingname:Am.submittingname;if(Ap==="input"||Ap==="textarea"){if(!Ah){Ad=I(Am)}if(Ad!==undefined){Ae.name=Ad}}j(Am,Ah?Ah.selection:null);if(typeof (Am.value)==="boolean"||Ae.type==="radio"||Ae.type==="checkbox"){var Af;var Ao=Am.value;if(Am.choiceindex!==undefined){if(!Ah.optionlist.value){K.fail("Error in component tree - selection control with full ID "+Ah.fullID+" has no values")}Af=Ah.optionlist.value[Am.choiceindex];Ao=v(Ah,Af)}if(W(Ao)){if(Ao){Ae.checked="checked"}else{delete Ae.checked}}Ae.value=Af?Af:"true";AD(null)}else{if(Am.value instanceof Array){AC()}else{var Al=Ah?Ah[Ap==="textarea"||Ap==="input"?"optionlist":"optionnames"].value[Am.choiceindex]:Am.value;if(Ap==="textarea"){if(V(Al)&&Am.willinput){Al=""}AD(Al)}else{if(Ap==="input"){if(Am.willinput||W(Al)){Ae.value=Al}AD(null)}else{delete Ae.name;AU(Al)}}}}}else{if(Ak==="UISelect"){R(Am,Am.selection.fullID);var As=Ap==="select";var Ac=false;if(Am.selection.value instanceof Array){Ac=true;if(As){Ae.multiple="multiple"}}I(Am.selection,Ae.id);if(As){if(Am.selection.willinput!==false){Ae.name=Am.selection.submittingname
}}AJ+=K.dumpAttributes(Ae);if(As){AJ+=">";var Aa=Am.optionlist.value;var Aj=Am.optionnames===null||Am.optionnames===undefined||!Am.optionnames.value?Aa:Am.optionnames.value;if(!Aj||!Aj.length){K.fail("Error in component tree - UISelect component with fullID "+Am.fullID+" does not have optionnames set")}for(var An=0;An<Aj.length;++An){AJ+='<option value="';var Al=Aa[An];if(Al===null){Al=K.NULL_STRING}AJ+=K.XMLEncode(Al);if(v(Am,Al)){AJ+='" selected="selected'}AJ+='">';AJ+=K.XMLEncode(Aj[An]);AJ+="</option>\n"}AR()}else{AF()}b(Am)}else{if(Ak==="UILink"){var Ai=D[Ap];if(Ai){var Ar=Am.target.value;if(!W(Ar)){Ar=Ae[attname]}else{Ar=AM(i.uselump.parent,Ar)}Ae[Ai]=Ar}var Al=Am.linktext.value;if(!W(Al)){AO()}else{AD(Al)}}else{if(Am.markup!==undefined){var Aq=Am.markup;if(Aq===null){AJ+=K.dumpAttributes(Ae);AJ+=">";AC()}else{if(!i.iselide){AJ+=K.dumpAttributes(Ae);AJ+=">"}AJ+=Aq;AR()}}else{}}}}}function d(Ac,Ab,Aa,Ae){if(!Aa){delete Ac["rsf:id"]}if(Ae!==undefined){Ac.id=Ae}else{if(Ac.id||Aa){Ac.id=Ab.fullID}}var Ad=1;var AZ=Ac.id;while(x.document.getElementById(Ac.id)){Ac.id=AZ+"-"+(Ad++)}return Ac.id}function U(AZ){var Ad;var Ab=i.attrcopy["for"];if(Ab!==undefined){Ad="for"}else{Ab=i.attrcopy.headers;if(Ab!==undefined){Ad="headers"}}if(!Ad){return }var Ac=i.uselump.tagname;if(Ad==="for"&&Ac!=="label"){return }if(Ad==="headers"&&Ac!=="td"&&Ac!=="th"){return }var Aa=AK[AV(i.uselump.parent,AZ,Ab)];if(Aa!==undefined){i.attrcopy[Ad]=Aa}}function AE(AZ){AJ+=("<!-- "+K.XMLEncode(AZ)+"-->")}function Y(AZ){AJ+='<span style="background-color:#FF466B;color:white;padding:1px;">';AJ+=AZ;AJ+="</span><br/>"}function u(AZ){var Aa=AZ.fullID;return !Aa?"component tree root":"full path "+Aa}function f(Aa,Aj,Af){var Ah=Af.lumpindex;var An=Af.parent.lumps;var Ag=-1;var Ai=An[Ah+1];var AZ=Af.close_tag;Ag=AZ.lumpindex+1;var Ae=Af.downmap?Af.downmap["payload-component"]:null;var Am=Ae?Ae[0]:null;var Al=Af.rsfID.charCodeAt(0)===126;var Ad=Ai;var Ao=AZ;var Ac=Af;var Ab={};H.extend(true,Ab,(Am===null?Af:Am).attributemap);i.attrcopy=Ab;i.uselump=Ac;i.endopen=Ad;i.close=Ao;i.nextpos=Ag;i.iselide=Al;U(Aa);if(Aj===null){if(Af.rsfID.indexOf("scr=")===(Al?1:0)){var Ak=Af.rsfID.substring(4+(Al?1:0));if(Ak==="ignore"){Ag=i.close.lumpindex+1}else{X();AO();Ag=i.endopen.lumpindex}}}else{if(Am){i.endopen=An[Am.lumpindex+1];i.close=Am.close_tag;i.uselump=Am;c(An,Ah,Am.lumpindex);Ah=Am.lumpindex}d(Ab,Aj);X();q(Aj);if(Am!==null){if(i.nextpos===Ag){c(An,i.close.lumpindex+1,AZ.lumpindex+1)}}Ag=i.nextpos}return Ag}function a(Ac,AZ){var Ab=AZ.parent;var Aa=Ab.lumps[AZ.lumpindex+1];if(Ac.children!==undefined){y(Ac,AZ)}else{f(Ac.parent,Ac,AZ)}AB(Ac,AZ,Aa)}function AN(Ac,Ad,Ab){if(Ad.indexOf("msg=")===0){var AZ=Ad.substring(4);return{componentType:"UIMessage",messagekey:AZ}}while(Ac){var Aa=Ac.childmap[Ad];if(Aa){return Aa}Ac=Ac.parent}return null}function AX(Aa,Ab){var AZ;while(Aa){AZ=Aa.childmap[Ab];if(AZ){break}Aa=Aa.parent}return AZ}function s(Ab,Ac){var Aa=K.SplitID(Ac.ID);var AZ=Ab.downmap[Ac.ID];if(AZ===null){AZ=Ab.downmap[Aa.prefix+":"]}return AZ===null?null:AZ[0]}function AB(Ae,At,Ak){var An=Ak.lumpindex;var Aq=At.nestingdepth;var Af=At.parent;if(AY){var Ar={}}while(true){An=z(Af.lumps,An,Aq,!At.elide,false);if(An===Af.lumps.length){break}var Ai=Af.lumps[An];var Aj=Ai.rsfID;if(Ai.nestingdepth<Aq||Aj===undefined){break}if(Aj.charCodeAt(0)===126){Aj=Aj.substring(1)}if(Aj.indexOf(":")!==-1){var Al=K.getPrefix(Aj);var AZ=AX(Ae,Al);var Ab=Ai.uplump.finallump[Al];var Ac=Ab.close_tag;if(AZ){for(var Am=0;Am<AZ.length;++Am){var Aa=AZ[Am];if(Aa.children){var Ao=AQ[Aa.fullID];if(Ao){if(AY){AE("Branching for "+Aa.fullID+" from "+K.debugLump(Ai)+" to "+K.debugLump(Ao))}a(Aa,Ao);if(AY){AE("Branch returned for "+Aa.fullID+K.debugLump(Ai)+" to "+K.debugLump(Ao))}}else{if(AY){Y("No matching template branch found for branch container with full ID "+Aa.fullID+" rendering from parent template branch "+K.debugLump(Ak))}}}else{var Ao=s(At,Aa);if(!Ao){if(AY){Y("Repetitive leaf with full ID "+Aa.fullID+" could not be rendered from parent template branch "+K.debugLump(Ak))}continue}var Ap=f(Ae,Aa,Ao);var Ah=Ap<Af.lumps.lengtn&&Af.lumps[Ap].nestingdepth>=Ao.nestingdepth;var Ad=Aa.children?Aa:Ae;if(Ah){AB(Ad,Ao,Af.lumps[Ap]);Ap=Ao.close_tag.lumpindex+1}if(Am!==AZ.length-1){if(Ap<Ac.lumpindex){z(Af.lumps,Ap,Ao.nestingdepth-1,false,false)}}else{z(Af.lumps,Ap,Ao.nestingdepth,true,false)}}}}else{if(AY){Y("No branch container with prefix "+Al+": found in container "+u(Ae)+" rendering at template position "+K.debugLump(Ak)+", skipping")}}An=Ac.lumpindex+1;if(AY){AE("Stack returned from branch for ID "+Aj+" to "+K.debugLump(Ak)+": skipping from "+K.debugLump(Ai)+" to "+K.debugLump(Ac))}}else{var Ag;if(Aj){if(AY){Ar[Aj]=true}Ag=AN(Ae,Aj,Ai)}if(Ag&&Ag.children!==undefined){a(Ag);An=Ai.close_tag.lumpindex+1}else{An=f(Ae,Ag,Ai)}}if(An===Af.lumps.length){break}}if(AY){var AZ=Ae.children;for(var As=0;As<AZ.length;++As){var Aa=AZ[As];if(!(Aa.ID.indexOf(":")!==-1)&&!Ar[Aa.ID]){Y("Leaf child component "+Aa.componentType+" with full ID "+Aa.fullID+" could not be found within template "+K.debugLump(Ak))}}}}function T(AZ){c(AZ.parent.lumps,AZ.lumpindex,AZ.close_tag.lumpindex+1)}function P(){for(var Ab in p){var AZ=p[Ab];for(var Aa=0;Aa<AZ.length;++Aa){T(AZ[Aa])}}}function Z(){for(var Ac=0;Ac<AG.length;++Ac){var AZ=AG[Ac];var Ae=K.byId(AZ.id,x.document);if(!Ae){K.fail("Error during rendering - component with id "+AZ.id+" which has a queued decorator was not found in the output markup")}if(AZ.type==="jQuery"){var Ab=H(Ae);Ab[AZ.func].apply(Ab,H.makeArray(AZ.args))}else{if(AZ.type==="fluid"){var Aa=AZ.args;if(!Aa){if(!AZ.container){AZ.container=Ae}Aa=[AZ.container,AZ.options]}var Ad=K.invokeGlobalFunction(AZ.func,Aa,K);AZ.that=Ad}else{if(AZ.type==="event"){Ae[AZ.event]=AZ.handler}}}}}AH.renderTemplates=function(){n=M(n,w.model);var AZ=Q[0];l(Q.globalmap,n,AZ.rootlump);g={};P();AB(n,AZ.rootlump,AZ.lumps[AZ.firstdocumentindex]);return AJ};AH.processDecoratorQueue=function(){Z()};return AH};K.ComponentReference=function(P){this.reference=P};K.explode=function(S,P){var R=[];for(var Q in S){var T=P===undefined?Q:P+"."+Q;R[R.length]={ID:Q,value:S[Q],valuebinding:T}}return R};K.explodeSelectionToInputs=function(P,Q){return K.transform(P,function(S,R){return{ID:Q.rowID,children:[{ID:Q.inputID,parentRelativeID:"..::"+Q.selectID,choiceindex:R},{ID:Q.labelID,parentRelativeID:"..::"+Q.selectID,choiceindex:R}]}})};K.resolveMessageSource=function(P){if(P.type==="data"){if(P.url===undefined){return K.messageLocator(P.messages)}else{}}};K.makeBranches=function(){var S;var Q;for(var P=0;P<arguments.length;++P){var R=arguments[P];var T;if(typeof (R)==="string"){T={ID:R}}else{if(R instanceof Array){T={ID:R[0],jointID:R[1]}}else{H.extend(true,Q,R);T=Q}}if(Q&&T!==Q){if(!Q.children){Q.children=[]}Q.children[Q.children.length]=T}Q=T;if(!S){S=T}}return S};K.renderTemplates=function(S,P,Q,R){var T=K.renderer(S,P,Q,R);var U=T.renderTemplates();return U};K.reRender=function(W,R,Y,X){X=X||{};R=K.unwrap(R);var T=K.getLastFocusedElement?K.getLastFocusedElement():null;var P;if(T&&K.dom.isContainer(R,T)){P=T.id}if(H.browser.msie){H(R).empty()}else{R.innerHTML=""}var U={};var V=K.renderer(W,Y,X,U);var Q=V.renderTemplates();if(X.renderRaw){Q=K.XMLEncode(Q);Q=Q.replace(/\n/g,"<br/>")}if(X.model){K.bindFossils(R,X.model,U)}if(H.browser.msie){H(R).html(Q)}else{R.innerHTML=Q}V.processDecoratorQueue();if(P){var S=K.byId(P);if(S){H(S).focus()}}return W};function A(P){var Q=K.dom.iterateDom(P,function(S){return S.nodeType===8||S.nodeType===4?"stop":null},true);var R=Q.nodeValue;if(R.indexOf("[CDATA[")===0){return R.substring(6,R.length-2)}else{return R}}K.extractTemplate=function(Q,P){if(!P){return Q.innerHTML}else{return A(Q)}};K.selfRender=function(T,P,R){R=R||{};T=K.unwrap(T);var Q={base:{resourceText:K.extractTemplate(T,R.armouring),href:".",resourceKey:".",cutpoints:R.cutpoints}};var S=K.parseTemplates(Q,["base"],R);return K.reRender(S,T,P,R)}})(jQuery,fluid_1_1);fluid_1_1=fluid_1_1||{};(function(D,B){var F=function(H){var G=D("<a name='"+H.text()+"' />",H[0].ownerDocument);H.before(G)};var E=function(H){var G={ID:H,children:[]};return G};var A=function(K,J){var I=function(M,L,S){if(L.length===0){return }var P=L[0];if(S===P.level){M[M.length-1].push(P.leaf);L.shift();return I(M,L,S)}if(S<P.level){var Q=S>-1?"level"+(S+1)+":":"";var R=S===-1?"s:":"s";var N=Q+"level"+(S+2)+R;var O=E(N);M[M.length-1].push(O);M.push(O.children);return I(M,L,S+1)}if(S>P.level){M.pop();return I(M,L,S-1)}};var G={children:[]};var H=B.transform(K,function(L){var N=D.inArray(L.tagName,J);var M=D(L).text();return{level:N,leaf:{ID:"level"+(N+1)+":item",children:[{ID:"link",linktext:M,target:"#"+M}]}}});I([G.children],H,-1);return G};var C=function(G,K,H,J,L){K.each(function(M,N){F(D(N))});var I={toc:{href:J}};B.fetchResources(I,function(){var M=B.parseTemplates(I,["toc"],{});var N=D("<div></div>",G[0].ownerDocument);B.reRender(M,N,A(K,H),{});G.prepend(N);L.fire(N)})};B.tableOfContents=function(G,H){var I=B.initView("fluid.tableOfContents",G,H);I.events.afterRender.addListener(function(J){I.tocNode=D(J)});C(I.container,I.locate("headings"),I.options.levels,I.options.templateUrl,I.events.afterRender);I.hide=function(){if(I.tocNode){I.tocNode.hide()}};I.show=function(){if(I.tocNode){I.tocNode.show()}};return I};B.defaults("fluid.tableOfContents",{selectors:{headings:":header"},events:{afterRender:null},templateUrl:"../html/TableOfContents.html",levels:["H1","H2","H3","H4","H5","H6"]})})(jQuery,fluid_1_1);if(!this.JSON){JSON=function(){function f(n){return n<10?"0"+n:n}Date.prototype.toJSON=function(){return this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z"};var m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function stringify(value,whitelist){var a,i,k,l,r=/["\\\x00-\x1f\x7f-\x9f]/g,v;switch(typeof value){case"string":return r.test(value)?'"'+value.replace(r,function(a){var c=m[a];
if(c){return c}c=a.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)})+'"':'"'+value+'"';case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}if(typeof value.toJSON==="function"){return stringify(value.toJSON())}a=[];if(typeof value.length==="number"&&!(value.propertyIsEnumerable("length"))){l=value.length;for(i=0;i<l;i+=1){a.push(stringify(value[i],whitelist)||"null")}return"["+a.join(",")+"]"}if(whitelist){l=whitelist.length;for(i=0;i<l;i+=1){k=whitelist[i];if(typeof k==="string"){v=stringify(value[k],whitelist);if(v){a.push(stringify(k)+":"+v)}}}}else{for(k in value){if(typeof k==="string"){v=stringify(value[k],whitelist);if(v){a.push(stringify(k)+":"+v)}}}}return"{"+a.join(",")+"}"}}return{stringify:stringify,parse:function(text,filter){var j;function walk(k,v){var i,n;if(v&&typeof v==="object"){for(i in v){if(Object.prototype.hasOwnProperty.apply(v,[i])){n=walk(i,v[i]);if(n!==undefined){v[i]=n}}}}return filter(k,v)}if(/^[\],:{}\s]*$/.test(text.replace(/\\./g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(:?[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof filter==="function"?walk("",j):j}throw new SyntaxError("parseJSON")}}}()}fluid_1_1=fluid_1_1||{};(function(D,F){var J=function(Q,P,S,R){R=R||"";D(P,Q).andSelf().each(function(U){var T=(D.browser.msie===false)?"class":"className";if(this.getAttribute(T)){this.setAttribute(T,this.getAttribute(T).replace(S,R))}})};var N=function(R,Q,T,U){var P=U[Q]||{};var S=P[T];if(S){R.addClass(S)}};var O=function(P){return P&&(P===true||P==="true")};var H=function(P,Q){if(O(Q)){if(P.tableOfContents){P.tableOfContents.show()}else{P.tableOfContents=F.initSubcomponent(P,"tableOfContents",[P.container,F.COMPONENT_OPTIONS])}}else{if(P.tableOfContents){P.tableOfContents.hide()}}};var B=function(P,Q){Q=Q&&Q>0?Q:1;P.css("line-height",Q+"em")};var K=function(P,Q){if(Q&&Q>0){P.css("font-size",Q+"pt");J(P,"[class*=fl-font-size-]",/\bfl-font-size-[0-9]{1,2}\s+/g,"fl-font-size-100")}else{P.css("font-size","")}};var E=function(P,Q,R){N(P,"textFont",Q.textFont,R);N(P,"textSpacing",Q.textSpacing,R);N(P,"theme",Q.theme,R);N(P,"layout",Q.layout,R)};var M=function(Q,P,R){if(P){Q.addClass(R)}else{Q.removeClass(R)}};var A=function(P,R,S){var Q=D("a",P);M(Q,R.linksUnderline,S.linksUnderline);M(Q,R.linksBold,S.linksBold);M(Q,R.linksLarger,S.linksLarger)};var L=function(P,Q,R){M(D("input",P),Q.inputsLarger,R.inputsLarger)};var C=function(P){if(P.options.savedSettings){P.model=P.options.savedSettings;return }P.model=P.settingsStore.fetch()||F.copy(P.defaultSiteSettings)};var G=function(P,Q){var S=["textFont","textSpacing","theme","layout"];var X="fl-noBackgroundImages";var V=".fl-noBackgroundImages";for(var W=0;W<S.length;W++){var T=Q[S[W]];for(var R in T){var U=T[R];if(U){X=X+" "+U;V=V+",."+U}}}D(V,P).removeClass(X);return X};var I=function(P){P.settingsStore=F.initSubcomponent(P,"settingsStore",[F.COMPONENT_OPTIONS]);C(P);P.refreshView()};F.uiEnhancer=function(S,Q){S=S||document;var R=F.initView("fluid.uiEnhancer",S,Q);D(S).data("uiEnhancer",R);R.container=D("body",S);R.defaultSiteSettings=R.options.defaultSiteSettings;var P;R.refreshView=function(){R.container.removeClass(P);E(R.container,R.model,R.options.classnameMap);M(R.container,!O(R.model.backgroundImages),R.options.classnameMap.noBackgroundImages);K(R.container,R.model.textSize);B(R.container,R.model.lineSpacing);H(R,R.model.toc);A(R.container,R.model,R.options.classnameMap);L(R.container,R.model,R.options.classnameMap)};R.updateModel=function(T,U){R.events.modelChanged.fire(T,R.model,U);F.clear(R.model);F.model.copyModel(R.model,T);R.settingsStore.save(R.model);R.refreshView()};P=G(R.container,R.options.classnameMap);I(R);return R};F.defaults("fluid.uiEnhancer",{tableOfContents:{type:"fluid.tableOfContents",options:{templateUrl:"../../tableOfContents/html/TableOfContents.html"}},settingsStore:{type:"fluid.uiEnhancer.cookieStore"},events:{modelChanged:null},classnameMap:{textFont:{serif:"fl-font-serif",sansSerif:"fl-font-sans",arial:"fl-font-arial",verdana:"fl-font-verdana",monospace:"fl-font-monospace",courier:"fl-font-courier",times:"fl-font-times"},textSpacing:{"default":"",wide0:"fl-font-spacing-0",wide1:"fl-font-spacing-1",wide2:"fl-font-spacing-2",wide3:"fl-font-spacing-3",wide4:"fl-font-spacing-4",wide5:"fl-font-spacing-5",wide6:"fl-font-spacing-6"},theme:{mist:"fl-theme-mist",rust:"fl-theme-rust",highContrast:"fl-theme-hc",highContrastInverted:"fl-theme-hci",lowContrast:"fl-theme-slate",mediumContrast:"fl-theme-coal","default":""},layout:{simple:"fl-layout-linear","default":""},noBackgroundImages:"fl-noBackgroundImages",linksUnderline:"fl-text-underline",linksBold:"fl-text-bold",linksLarger:"fl-text-larger",inputsLarger:"fl-text-larger"},defaultSiteSettings:{textFont:"",textSpacing:"",theme:"default",layout:"default",textSize:"",lineSpacing:"",backgroundImages:true,toc:false,linksUnderline:false,linksBold:false,linksLarger:false,inputsLarger:false}});F.uiEnhancer.cookieStore=function(P){var Q={};F.mergeComponentOptions(Q,"fluid.uiEnhancer.cookieStore",P);Q.fetch=function(){var S=document.cookie;var R=Q.options.cookieName+"=";var U,V,T;if(S.length>0){V=S.indexOf(R);if(V>-1){V=V+R.length;T=S.indexOf(";",V);if(T<V){T=S.length}U=JSON.parse(decodeURIComponent(S.substring(V,T)))}}return U};Q.save=function(R){document.cookie=Q.options.cookieName+"="+encodeURIComponent(JSON.stringify(R))};return Q};F.defaults("fluid.uiEnhancer.cookieStore",{cookieName:"fluid-ui-settings"});F.uiEnhancer.tempStore=function(P){var Q={};Q.model=null;Q.fetch=function(){return Q.model};Q.save=function(R){Q.model=R};return Q}})(jQuery,fluid_1_1);fluid_1_1=fluid_1_1||{};(function(G,E){var H=function(I,K){var J={role:"slider","aria-valuenow":K.value,"aria-valuemin":K.min,"aria-valuemax":K.max};I.attr(J)};var F=function(J){var K=J.options.sliderOptions;K.value=J.model;K.min=J.min;K.max=J.max;var I=J.locate("slider").slider(K);H(J.locate("thumb"),K);return I};var A=function(K,J,I){I.bind("slide",function(M,L){J.val(L.value);K.updateModel(L.value,I)})};var C=function(K,J){var I=K.locate("textfield");I.val(K.model);return I};var B=function(K,J,I){J.change(function(){if(K.isValid(this.value)){if(!K.isInRange(this.value)){this.value=(this.value<K.min)?K.min:K.max}I.slider("value",this.value);K.updateModel(this.value,this)}else{this.value=K.model}});J.keypress(function(L){if(L.keyCode!==G.ui.keyCode.ENTER){return true}else{G(L.target).change();G(E.findForm(L.target)).submit();return false}})};var D=function(K){var J=F(K);var I=C(K,J);A(K,I,J);B(K,I,J)};E.textfieldSlider=function(I,J){var K=E.initView("fluid.textfieldSlider",I,J);K.model=K.options.value||K.locate("textfield").val();K.min=K.options.min;K.max=K.options.max;K.isInRange=function(L){return(L>=K.min&&L<=K.max)};K.isValid=function(L){return !(isNaN(parseInt(L,10))||isNaN(L))};K.updateModel=function(L,M){if(K.isInRange(L)){K.events.modelChanged.fire(L,K.model,M);K.model=L;K.locate("thumb").attr("aria-valuenow",K.model)}};D(K);return K};E.defaults("fluid.textfieldSlider",{selectors:{textfield:".flc-textfieldSlider-field",slider:".flc-textfieldSlider-slider",thumb:".ui-slider-handle"},events:{modelChanged:null},sliderOptions:{orientation:"horizontal"},min:0,max:100,value:null})})(jQuery,fluid_1_1);(function(D,G){var J=function(P,M,N,O){return{ID:P,selection:{valuebinding:M},optionlist:{valuebinding:N},optionnames:{valuebinding:O}}};var A=function(N,M){return{ID:N,valuebinding:M}};var K=function(P,R){var O=[];O.push(J("text-font","selections.textFont","labelMap.textFont.values","labelMap.textFont.names"));O.push(J("text-spacing","selections.textSpacing","labelMap.textSpacing.values","labelMap.textSpacing.names"));O.push(J("theme","selections.theme","labelMap.theme.values","labelMap.theme.names"));var N={selectID:"background-images",rowID:"background-images-row:",inputID:"background-images-choice",labelID:"background-images-label"};O.push(J("background-images","selections.backgroundImages","labelMap.backgroundImages.values","labelMap.backgroundImages.names"));O=O.concat(G.explodeSelectionToInputs(P.options.controlValues.backgroundImages,N));var Q={selectID:"layout",rowID:"layout-row:",inputID:"layout-choice",labelID:"layout-label"};O.push(J("layout","selections.layout","labelMap.layout.values","labelMap.layout.names"));O=O.concat(G.explodeSelectionToInputs(P.options.controlValues.layout,Q));var M={selectID:"toc",rowID:"toc-row:",inputID:"toc-choice",labelID:"toc-label"};O.push(J("toc","selections.toc","labelMap.toc.values","labelMap.toc.names"));O=O.concat(G.explodeSelectionToInputs(P.options.controlValues.layout,M));O.push(A("links-underline","selections.linksUnderline"));O.push(A("links-bold","selections.linksBold"));O.push(A("links-larger","selections.linksLarger"));O.push(A("inputs-larger","selections.inputsLarger"));return{children:O}};var H=function(N){var O=N.locate("save");O.click(N.save);N.locate("reset").click(N.reset);N.locate("cancel").click(N.cancel);var M=G.findForm(O);D(M).submit(function(){N.save()})};var I=function(M){var O=M.locate("previewFrame");var N;M.events.modelChanged.addListener(function(P){setTimeout(function(){if(N){N.updateModel(P)}},0)});O.load(function(){var P=O.contents();var Q={savedSettings:M.model,tableOfContents:M.uiEnhancer.options.tableOfContents,settingsStore:{type:"fluid.uiEnhancer.tempStore"}};N=G.uiEnhancer(P,Q)})};var E=function(M){var O={};for(var N in M.controlValues){O[N]={names:M.strings[N],values:M.controlValues[N]}}return O};var C=function(N){N.model.toc=String(N.model.toc);N.model.backgroundImages=String(N.model.backgroundImages);var M=G.assembleModel({selections:{model:N.model,applier:N.applier},labelMap:{model:E(N.options)}});return{model:M.model,applier:M.applier,autoBind:true}};var F=function(O){var N=function(P){return{listeners:{modelChanged:function(Q){O.applier.requestChange(P,Q)}},value:O.model[P]}
};var M=N("textSize");G.merge(null,M,O.options.textMinSize.options);G.initSubcomponents(O,"textMinSize",[O.options.selectors.textMinSizeCtrl,M]);M=N("lineSpacing");G.merge(null,M,O.options.lineSpacing.options);G.initSubcomponents(O,"lineSpacing",[O.options.selectors.lineSpacingCtrl,M])};var B=function(O,S){for(var P in O.controlValues){var Q=String(S[P]);var M=O.controlValues[P];if(Q){var N=D.inArray(Q,M);if(N===-1){var R=D.inArray("default",M);if(R===-1){M.push(Q)}else{M[R]=Q}}}}};var L=function(N){N.applier.modelChanged.addListener("*",function(P,R,Q){N.events.modelChanged.fire(P,R,Q.source)});B(N.options,N.uiEnhancer.defaultSiteSettings);N.events.afterRender.addListener(function(){F(N);H(N);I(N)});var O=C(N);var M=G.selfRender(N.container,K(N,O.model),O);N.events.afterRender.fire();return M};G.uiOptions=function(M,O){var Q=G.initView("fluid.uiOptions",M,O);Q.uiEnhancer=D(document).data("uiEnhancer");Q.model=G.copy(Q.uiEnhancer.model);Q.applier=G.makeChangeApplier(Q.model);var N=Q.uiEnhancer.model;var P;Q.save=function(){Q.events.onSave.fire(Q.model);N=G.copy(Q.model);Q.uiEnhancer.updateModel(N)};Q.reset=function(){Q.events.onReset.fire();Q.updateModel(G.copy(Q.uiEnhancer.defaultSiteSettings),Q);Q.refreshView()};Q.cancel=function(){Q.events.onCancel.fire();Q.updateModel(G.copy(N),Q);Q.refreshView()};Q.refreshView=function(){var R=C(Q);G.reRender(P,Q.container,K(Q,R.model),R);Q.events.afterRender.fire()};Q.updateModel=function(R,S){Q.events.modelChanged.fire(R,Q.model,S);G.clear(Q.model);G.model.copyModel(Q.model,R)};P=L(Q);return Q};G.defaults("fluid.uiOptions",{textMinSize:{type:"fluid.textfieldSlider",options:{min:6,max:30}},lineSpacing:{type:"fluid.textfieldSlider",options:{min:1,max:10}},selectors:{controls:".flc-uiOptions-control",textMinSizeCtrl:".flc-uiOptions-min-text-size",lineSpacingCtrl:".flc-uiOptions-line-spacing",cancel:".flc-uiOptions-cancel",reset:".flc-uiOptions-reset",save:".flc-uiOptions-save",previewFrame:".flc-uiOptions-preview-frame"},events:{modelChanged:null,onSave:null,onCancel:null,onReset:null,afterRender:null},strings:{textFont:["Serif","Sans-Serif","Arial","Verdana","Courier","Times"],textSpacing:["Regular","Wide","Wider","Widest"],theme:["Low Contrast","Medium Contrast","Medium Contrast Grey Scale","High Contrast","High Contrast Inverted"],backgroundImages:["Yes","No"],layout:["Yes","No"],toc:["Yes","No"]},controlValues:{textFont:["serif","sansSerif","arial","verdana","courier","times"],textSpacing:["default","wide1","wide2","wide3"],theme:["lowContrast","default","mediumContrast","highContrast","highContrastInverted"],backgroundImages:["true","false"],layout:["simple","default"],toc:["true","false"]}})})(jQuery,fluid_1_1);
/*	SWFObject v2.2 <http://code.google.com/p/swfobject/> 
	is released under the MIT License <http://www.opensource.org/licenses/mit-license.php> 
*/
var swfobject=function(){var d="undefined",R="object",s="Shockwave Flash",w="ShockwaveFlash.ShockwaveFlash",Q="application/x-shockwave-flash",r="SWFObjectExprInst",X="onreadystatechange",o=window,J=document,T=navigator,t=false,u=[H],O=[],n=[],i=[],L,q,e,b,j=false,A=false,N,g,M=true,m=function(){var AA=typeof J.getElementById!=d&&typeof J.getElementsByTagName!=d&&typeof J.createElement!=d,AH=T.userAgent.toLowerCase(),y=T.platform.toLowerCase(),AE=y?/win/.test(y):/win/.test(AH),AC=y?/mac/.test(y):/mac/.test(AH),AF=/webkit/.test(AH)?parseFloat(AH.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,x=!+"\v1",AG=[0,0,0],AB=null;if(typeof T.plugins!=d&&typeof T.plugins[s]==R){AB=T.plugins[s].description;if(AB&&!(typeof T.mimeTypes!=d&&T.mimeTypes[Q]&&!T.mimeTypes[Q].enabledPlugin)){t=true;x=false;AB=AB.replace(/^.*\s+(\S+\s+\S+$)/,"$1");AG[0]=parseInt(AB.replace(/^(.*)\..*$/,"$1"),10);AG[1]=parseInt(AB.replace(/^.*\.(.*)\s.*$/,"$1"),10);AG[2]=/[a-zA-Z]/.test(AB)?parseInt(AB.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else{if(typeof o.ActiveXObject!=d){try{var AD=new ActiveXObject(w);if(AD){AB=AD.GetVariable("$version");if(AB){x=true;AB=AB.split(" ")[1].split(",");AG=[parseInt(AB[0],10),parseInt(AB[1],10),parseInt(AB[2],10)]}}}catch(z){}}}return{w3:AA,pv:AG,wk:AF,ie:x,win:AE,mac:AC}}(),K=function(){if(!m.w3){return }if((typeof J.readyState!=d&&J.readyState=="complete")||(typeof J.readyState==d&&(J.getElementsByTagName("body")[0]||J.body))){F()}if(!j){if(typeof J.addEventListener!=d){J.addEventListener("DOMContentLoaded",F,false)}if(m.ie&&m.win){J.attachEvent(X,function(){if(J.readyState=="complete"){J.detachEvent(X,arguments.callee);F()}});if(o==top){(function(){if(j){return }try{J.documentElement.doScroll("left")}catch(x){setTimeout(arguments.callee,0);return }F()})()}}if(m.wk){(function(){if(j){return }if(!/loaded|complete/.test(J.readyState)){setTimeout(arguments.callee,0);return }F()})()}S(F)}}();function F(){if(j){return }try{var z=J.getElementsByTagName("body")[0].appendChild(c("span"));z.parentNode.removeChild(z)}catch(AA){return }j=true;var x=u.length;for(var y=0;y<x;y++){u[y]()}}function k(x){if(j){x()}else{u[u.length]=x}}function S(y){if(typeof o.addEventListener!=d){o.addEventListener("load",y,false)}else{if(typeof J.addEventListener!=d){J.addEventListener("load",y,false)}else{if(typeof o.attachEvent!=d){I(o,"onload",y)}else{if(typeof o.onload=="function"){var x=o.onload;o.onload=function(){x();y()}}else{o.onload=y}}}}}function H(){if(t){v()}else{h()}}function v(){var x=J.getElementsByTagName("body")[0];var AA=c(R);AA.setAttribute("type",Q);var z=x.appendChild(AA);if(z){var y=0;(function(){if(typeof z.GetVariable!=d){var AB=z.GetVariable("$version");if(AB){AB=AB.split(" ")[1].split(",");m.pv=[parseInt(AB[0],10),parseInt(AB[1],10),parseInt(AB[2],10)]}}else{if(y<10){y++;setTimeout(arguments.callee,10);return }}x.removeChild(AA);z=null;h()})()}else{h()}}function h(){var AG=O.length;if(AG>0){for(var AF=0;AF<AG;AF++){var y=O[AF].id;var AB=O[AF].callbackFn;var AA={success:false,id:y};if(m.pv[0]>0){var AE=C(y);if(AE){if(f(O[AF].swfVersion)&&!(m.wk&&m.wk<312)){W(y,true);if(AB){AA.success=true;AA.ref=Z(y);AB(AA)}}else{if(O[AF].expressInstall&&a()){var AI={};AI.data=O[AF].expressInstall;AI.width=AE.getAttribute("width")||"0";AI.height=AE.getAttribute("height")||"0";if(AE.getAttribute("class")){AI.styleclass=AE.getAttribute("class")}if(AE.getAttribute("align")){AI.align=AE.getAttribute("align")}var AH={};var x=AE.getElementsByTagName("param");var AC=x.length;for(var AD=0;AD<AC;AD++){if(x[AD].getAttribute("name").toLowerCase()!="movie"){AH[x[AD].getAttribute("name")]=x[AD].getAttribute("value")}}p(AI,AH,y,AB)}else{P(AE);if(AB){AB(AA)}}}}}else{W(y,true);if(AB){var z=Z(y);if(z&&typeof z.SetVariable!=d){AA.success=true;AA.ref=z}AB(AA)}}}}}function Z(AA){var x=null;var y=C(AA);if(y&&y.nodeName=="OBJECT"){if(typeof y.SetVariable!=d){x=y}else{var z=y.getElementsByTagName(R)[0];if(z){x=z}}}return x}function a(){return !A&&f("6.0.65")&&(m.win||m.mac)&&!(m.wk&&m.wk<312)}function p(AA,AB,x,z){A=true;e=z||null;b={success:false,id:x};var AE=C(x);if(AE){if(AE.nodeName=="OBJECT"){L=G(AE);q=null}else{L=AE;q=x}AA.id=r;if(typeof AA.width==d||(!/%$/.test(AA.width)&&parseInt(AA.width,10)<310)){AA.width="310"}if(typeof AA.height==d||(!/%$/.test(AA.height)&&parseInt(AA.height,10)<137)){AA.height="137"}J.title=J.title.slice(0,47)+" - Flash Player Installation";var AD=m.ie&&m.win?"ActiveX":"PlugIn",AC="MMredirectURL="+o.location.toString().replace(/&/g,"%26")+"&MMplayerType="+AD+"&MMdoctitle="+J.title;if(typeof AB.flashvars!=d){AB.flashvars+="&"+AC}else{AB.flashvars=AC}if(m.ie&&m.win&&AE.readyState!=4){var y=c("div");x+="SWFObjectNew";y.setAttribute("id",x);AE.parentNode.insertBefore(y,AE);AE.style.display="none";(function(){if(AE.readyState==4){AE.parentNode.removeChild(AE)}else{setTimeout(arguments.callee,10)}})()}U(AA,AB,x)}}function P(y){if(m.ie&&m.win&&y.readyState!=4){var x=c("div");y.parentNode.insertBefore(x,y);x.parentNode.replaceChild(G(y),x);y.style.display="none";(function(){if(y.readyState==4){y.parentNode.removeChild(y)}else{setTimeout(arguments.callee,10)}})()}else{y.parentNode.replaceChild(G(y),y)}}function G(AB){var AA=c("div");if(m.win&&m.ie){AA.innerHTML=AB.innerHTML}else{var y=AB.getElementsByTagName(R)[0];if(y){var AC=y.childNodes;if(AC){var x=AC.length;for(var z=0;z<x;z++){if(!(AC[z].nodeType==1&&AC[z].nodeName=="PARAM")&&!(AC[z].nodeType==8)){AA.appendChild(AC[z].cloneNode(true))}}}}}return AA}function U(AI,AG,y){var x,AA=C(y);if(m.wk&&m.wk<312){return x}if(AA){if(typeof AI.id==d){AI.id=y}if(m.ie&&m.win){var AH="";for(var AE in AI){if(AI[AE]!=Object.prototype[AE]){if(AE.toLowerCase()=="data"){AG.movie=AI[AE]}else{if(AE.toLowerCase()=="styleclass"){AH+=' class="'+AI[AE]+'"'}else{if(AE.toLowerCase()!="classid"){AH+=" "+AE+'="'+AI[AE]+'"'}}}}}var AF="";for(var AD in AG){if(AG[AD]!=Object.prototype[AD]){AF+='<param name="'+AD+'" value="'+AG[AD]+'" />'}}AA.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+AH+">"+AF+"</object>";n[n.length]=AI.id;x=C(AI.id)}else{var z=c(R);z.setAttribute("type",Q);for(var AC in AI){if(AI[AC]!=Object.prototype[AC]){if(AC.toLowerCase()=="styleclass"){z.setAttribute("class",AI[AC])}else{if(AC.toLowerCase()!="classid"){z.setAttribute(AC,AI[AC])}}}}for(var AB in AG){if(AG[AB]!=Object.prototype[AB]&&AB.toLowerCase()!="movie"){E(z,AB,AG[AB])}}AA.parentNode.replaceChild(z,AA);x=z}}return x}function E(z,x,y){var AA=c("param");AA.setAttribute("name",x);AA.setAttribute("value",y);z.appendChild(AA)}function Y(y){var x=C(y);if(x&&x.nodeName=="OBJECT"){if(m.ie&&m.win){x.style.display="none";(function(){if(x.readyState==4){B(y)}else{setTimeout(arguments.callee,10)}})()}else{x.parentNode.removeChild(x)}}}function B(z){var y=C(z);if(y){for(var x in y){if(typeof y[x]=="function"){y[x]=null}}y.parentNode.removeChild(y)}}function C(z){var x=null;try{x=J.getElementById(z)}catch(y){}return x}function c(x){return J.createElement(x)}function I(z,x,y){z.attachEvent(x,y);i[i.length]=[z,x,y]}function f(z){var y=m.pv,x=z.split(".");x[0]=parseInt(x[0],10);x[1]=parseInt(x[1],10)||0;x[2]=parseInt(x[2],10)||0;
return(y[0]>x[0]||(y[0]==x[0]&&y[1]>x[1])||(y[0]==x[0]&&y[1]==x[1]&&y[2]>=x[2]))?true:false}function V(AC,y,AD,AB){if(m.ie&&m.mac){return }var AA=J.getElementsByTagName("head")[0];if(!AA){return }var x=(AD&&typeof AD=="string")?AD:"screen";if(AB){N=null;g=null}if(!N||g!=x){var z=c("style");z.setAttribute("type","text/css");z.setAttribute("media",x);N=AA.appendChild(z);if(m.ie&&m.win&&typeof J.styleSheets!=d&&J.styleSheets.length>0){N=J.styleSheets[J.styleSheets.length-1]}g=x}if(m.ie&&m.win){if(N&&typeof N.addRule==R){N.addRule(AC,y)}}else{if(N&&typeof J.createTextNode!=d){N.appendChild(J.createTextNode(AC+" {"+y+"}"))}}}function W(z,x){if(!M){return }var y=x?"visible":"hidden";if(j&&C(z)){C(z).style.visibility=y}else{V("#"+z,"visibility:"+y)}}function l(y){var z=/[\\\"<>\.;]/;var x=z.exec(y)!=null;return x&&typeof encodeURIComponent!=d?encodeURIComponent(y):y}var D=function(){if(m.ie&&m.win){window.attachEvent("onunload",function(){var AC=i.length;for(var AB=0;AB<AC;AB++){i[AB][0].detachEvent(i[AB][1],i[AB][2])}var z=n.length;for(var AA=0;AA<z;AA++){Y(n[AA])}for(var y in m){m[y]=null}m=null;for(var x in swfobject){swfobject[x]=null}swfobject=null})}}();return{registerObject:function(AB,x,AA,z){if(m.w3&&AB&&x){var y={};y.id=AB;y.swfVersion=x;y.expressInstall=AA;y.callbackFn=z;O[O.length]=y;W(AB,false)}else{if(z){z({success:false,id:AB})}}},getObjectById:function(x){if(m.w3){return Z(x)}},embedSWF:function(AB,AH,AE,AG,y,AA,z,AD,AF,AC){var x={success:false,id:AH};if(m.w3&&!(m.wk&&m.wk<312)&&AB&&AH&&AE&&AG&&y){W(AH,false);k(function(){AE+="";AG+="";var AJ={};if(AF&&typeof AF===R){for(var AL in AF){AJ[AL]=AF[AL]}}AJ.data=AB;AJ.width=AE;AJ.height=AG;var AM={};if(AD&&typeof AD===R){for(var AK in AD){AM[AK]=AD[AK]}}if(z&&typeof z===R){for(var AI in z){if(typeof AM.flashvars!=d){AM.flashvars+="&"+AI+"="+z[AI]}else{AM.flashvars=AI+"="+z[AI]}}}if(f(y)){var AN=U(AJ,AM,AH);if(AJ.id==AH){W(AH,true)}x.success=true;x.ref=AN}else{if(AA&&a()){AJ.data=AA;p(AJ,AM,AH,AC);return }else{W(AH,true)}}if(AC){AC(x)}})}else{if(AC){AC(x)}}},switchOffAutoHideShow:function(){M=false},ua:m,getFlashPlayerVersion:function(){return{major:m.pv[0],minor:m.pv[1],release:m.pv[2]}},hasFlashPlayerVersion:f,createSWF:function(z,y,x){if(m.w3){return U(z,y,x)}else{return undefined}},showExpressInstall:function(z,AA,x,y){if(m.w3&&a()){p(z,AA,x,y)}},removeSWF:function(x){if(m.w3){Y(x)}},createCSS:function(AA,z,y,x){if(m.w3){V(AA,z,y,x)}},addDomLoadEvent:k,addLoadEvent:S,getQueryParamValue:function(AA){var z=J.location.search||J.location.hash;if(z){if(/\?/.test(z)){z=z.split("?")[1]}if(AA==null){return l(z)}var y=z.split("&");for(var x=0;x<y.length;x++){if(y[x].substring(0,y[x].indexOf("="))==AA){return l(y[x].substring((y[x].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(A){var x=C(r);if(x&&L){x.parentNode.replaceChild(L,x);if(q){W(q,true);if(m.ie&&m.win){L.style.display="block"}}if(e){e(b)}}A=false}}}}();var SWFUpload;if(SWFUpload==undefined){SWFUpload=function(A){this.initSWFUpload(A)}}SWFUpload.prototype.initSWFUpload=function(B){try{this.customSettings={};this.settings=B;this.eventQueue=[];this.movieName="SWFUpload_"+SWFUpload.movieCount++;this.movieElement=null;SWFUpload.instances[this.movieName]=this;this.initSettings();this.loadFlash();this.displayDebugInfo()}catch(A){delete SWFUpload.instances[this.movieName];throw A}};SWFUpload.instances={};SWFUpload.movieCount=0;SWFUpload.version="2.2.0 2009-03-25";SWFUpload.QUEUE_ERROR={QUEUE_LIMIT_EXCEEDED:-100,FILE_EXCEEDS_SIZE_LIMIT:-110,ZERO_BYTE_FILE:-120,INVALID_FILETYPE:-130};SWFUpload.UPLOAD_ERROR={HTTP_ERROR:-200,MISSING_UPLOAD_URL:-210,IO_ERROR:-220,SECURITY_ERROR:-230,UPLOAD_LIMIT_EXCEEDED:-240,UPLOAD_FAILED:-250,SPECIFIED_FILE_ID_NOT_FOUND:-260,FILE_VALIDATION_FAILED:-270,FILE_CANCELLED:-280,UPLOAD_STOPPED:-290};SWFUpload.FILE_STATUS={QUEUED:-1,IN_PROGRESS:-2,ERROR:-3,COMPLETE:-4,CANCELLED:-5};SWFUpload.BUTTON_ACTION={SELECT_FILE:-100,SELECT_FILES:-110,START_UPLOAD:-120};SWFUpload.CURSOR={ARROW:-1,HAND:-2};SWFUpload.WINDOW_MODE={WINDOW:"window",TRANSPARENT:"transparent",OPAQUE:"opaque"};SWFUpload.completeURL=function(A){if(typeof (A)!=="string"||A.match(/^https?:\/\//i)||A.match(/^\//)){return A}var C=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");var B=window.location.pathname.lastIndexOf("/");if(B<=0){path="/"}else{path=window.location.pathname.substr(0,B)+"/"}return path+A};SWFUpload.prototype.initSettings=function(){this.ensureDefault=function(B,A){this.settings[B]=(this.settings[B]==undefined)?A:this.settings[B]};this.ensureDefault("upload_url","");this.ensureDefault("preserve_relative_urls",false);this.ensureDefault("file_post_name","Filedata");this.ensureDefault("post_params",{});this.ensureDefault("use_query_string",false);this.ensureDefault("requeue_on_error",false);this.ensureDefault("http_success",[]);this.ensureDefault("assume_success_timeout",0);this.ensureDefault("file_types","*.*");this.ensureDefault("file_types_description","All Files");this.ensureDefault("file_size_limit",0);this.ensureDefault("file_upload_limit",0);this.ensureDefault("file_queue_limit",0);this.ensureDefault("flash_url","swfupload.swf");this.ensureDefault("prevent_swf_caching",true);this.ensureDefault("button_image_url","");this.ensureDefault("button_width",1);this.ensureDefault("button_height",1);this.ensureDefault("button_text","");this.ensureDefault("button_text_style","color: #000000; font-size: 16pt;");this.ensureDefault("button_text_top_padding",0);this.ensureDefault("button_text_left_padding",0);this.ensureDefault("button_action",SWFUpload.BUTTON_ACTION.SELECT_FILES);this.ensureDefault("button_disabled",false);this.ensureDefault("button_placeholder_id","");this.ensureDefault("button_placeholder",null);this.ensureDefault("button_cursor",SWFUpload.CURSOR.ARROW);this.ensureDefault("button_window_mode",SWFUpload.WINDOW_MODE.WINDOW);this.ensureDefault("debug",false);this.settings.debug_enabled=this.settings.debug;this.settings.return_upload_start_handler=this.returnUploadStart;this.ensureDefault("swfupload_loaded_handler",null);this.ensureDefault("file_dialog_start_handler",null);this.ensureDefault("file_queued_handler",null);this.ensureDefault("file_queue_error_handler",null);this.ensureDefault("file_dialog_complete_handler",null);this.ensureDefault("upload_start_handler",null);this.ensureDefault("upload_progress_handler",null);this.ensureDefault("upload_error_handler",null);this.ensureDefault("upload_success_handler",null);this.ensureDefault("upload_complete_handler",null);this.ensureDefault("debug_handler",this.debugMessage);this.ensureDefault("custom_settings",{});this.customSettings=this.settings.custom_settings;if(!!this.settings.prevent_swf_caching){this.settings.flash_url=this.settings.flash_url+(this.settings.flash_url.indexOf("?")<0?"?":"&")+"preventswfcaching="+new Date().getTime()}if(!this.settings.preserve_relative_urls){this.settings.upload_url=SWFUpload.completeURL(this.settings.upload_url);this.settings.button_image_url=SWFUpload.completeURL(this.settings.button_image_url)}delete this.ensureDefault};SWFUpload.prototype.loadFlash=function(){var A,B;if(document.getElementById(this.movieName)!==null){throw"ID "+this.movieName+" is already in use. The Flash Object could not be added"}A=document.getElementById(this.settings.button_placeholder_id)||this.settings.button_placeholder;if(A==undefined){throw"Could not find the placeholder element: "+this.settings.button_placeholder_id}B=document.createElement("div");B.innerHTML=this.getFlashHTML();A.parentNode.replaceChild(B.firstChild,A);if(window[this.movieName]==undefined){window[this.movieName]=this.getMovieElement()}};SWFUpload.prototype.getFlashHTML=function(){return['<object id="',this.movieName,'" type="application/x-shockwave-flash" data="',this.settings.flash_url,'" width="',this.settings.button_width,'" height="',this.settings.button_height,'" class="swfupload">','<param name="wmode" value="',this.settings.button_window_mode,'" />','<param name="movie" value="',this.settings.flash_url,'" />','<param name="quality" value="high" />','<param name="menu" value="false" />','<param name="allowScriptAccess" value="always" />','<param name="flashvars" value="'+this.getFlashVars()+'" />',"</object>"].join("")};SWFUpload.prototype.getFlashVars=function(){var B=this.buildParamString();var A=this.settings.http_success.join(",");return["movieName=",encodeURIComponent(this.movieName),"&amp;uploadURL=",encodeURIComponent(this.settings.upload_url),"&amp;useQueryString=",encodeURIComponent(this.settings.use_query_string),"&amp;requeueOnError=",encodeURIComponent(this.settings.requeue_on_error),"&amp;httpSuccess=",encodeURIComponent(A),"&amp;assumeSuccessTimeout=",encodeURIComponent(this.settings.assume_success_timeout),"&amp;params=",encodeURIComponent(B),"&amp;filePostName=",encodeURIComponent(this.settings.file_post_name),"&amp;fileTypes=",encodeURIComponent(this.settings.file_types),"&amp;fileTypesDescription=",encodeURIComponent(this.settings.file_types_description),"&amp;fileSizeLimit=",encodeURIComponent(this.settings.file_size_limit),"&amp;fileUploadLimit=",encodeURIComponent(this.settings.file_upload_limit),"&amp;fileQueueLimit=",encodeURIComponent(this.settings.file_queue_limit),"&amp;debugEnabled=",encodeURIComponent(this.settings.debug_enabled),"&amp;buttonImageURL=",encodeURIComponent(this.settings.button_image_url),"&amp;buttonWidth=",encodeURIComponent(this.settings.button_width),"&amp;buttonHeight=",encodeURIComponent(this.settings.button_height),"&amp;buttonText=",encodeURIComponent(this.settings.button_text),"&amp;buttonTextTopPadding=",encodeURIComponent(this.settings.button_text_top_padding),"&amp;buttonTextLeftPadding=",encodeURIComponent(this.settings.button_text_left_padding),"&amp;buttonTextStyle=",encodeURIComponent(this.settings.button_text_style),"&amp;buttonAction=",encodeURIComponent(this.settings.button_action),"&amp;buttonDisabled=",encodeURIComponent(this.settings.button_disabled),"&amp;buttonCursor=",encodeURIComponent(this.settings.button_cursor)].join("")
};SWFUpload.prototype.getMovieElement=function(){if(this.movieElement==undefined){this.movieElement=document.getElementById(this.movieName)}if(this.movieElement===null){throw"Could not find Flash element"}return this.movieElement};SWFUpload.prototype.buildParamString=function(){var C=this.settings.post_params;var B=[];if(typeof (C)==="object"){for(var A in C){if(C.hasOwnProperty(A)){B.push(encodeURIComponent(A.toString())+"="+encodeURIComponent(C[A].toString()))}}}return B.join("&amp;")};SWFUpload.prototype.destroy=function(){try{this.cancelUpload(null,false);var A=null;A=this.getMovieElement();if(A&&typeof (A.CallFunction)==="unknown"){for(var C in A){try{if(typeof (A[C])==="function"){A[C]=null}}catch(E){}}try{A.parentNode.removeChild(A)}catch(B){}}window[this.movieName]=null;SWFUpload.instances[this.movieName]=null;delete SWFUpload.instances[this.movieName];this.movieElement=null;this.settings=null;this.customSettings=null;this.eventQueue=null;this.movieName=null;return true}catch(D){return false}};SWFUpload.prototype.displayDebugInfo=function(){this.debug(["---SWFUpload Instance Info---\n","Version: ",SWFUpload.version,"\n","Movie Name: ",this.movieName,"\n","Settings:\n","\t","upload_url:               ",this.settings.upload_url,"\n","\t","flash_url:                ",this.settings.flash_url,"\n","\t","use_query_string:         ",this.settings.use_query_string.toString(),"\n","\t","requeue_on_error:         ",this.settings.requeue_on_error.toString(),"\n","\t","http_success:             ",this.settings.http_success.join(", "),"\n","\t","assume_success_timeout:   ",this.settings.assume_success_timeout,"\n","\t","file_post_name:           ",this.settings.file_post_name,"\n","\t","post_params:              ",this.settings.post_params.toString(),"\n","\t","file_types:               ",this.settings.file_types,"\n","\t","file_types_description:   ",this.settings.file_types_description,"\n","\t","file_size_limit:          ",this.settings.file_size_limit,"\n","\t","file_upload_limit:        ",this.settings.file_upload_limit,"\n","\t","file_queue_limit:         ",this.settings.file_queue_limit,"\n","\t","debug:                    ",this.settings.debug.toString(),"\n","\t","prevent_swf_caching:      ",this.settings.prevent_swf_caching.toString(),"\n","\t","button_placeholder_id:    ",this.settings.button_placeholder_id.toString(),"\n","\t","button_placeholder:       ",(this.settings.button_placeholder?"Set":"Not Set"),"\n","\t","button_image_url:         ",this.settings.button_image_url.toString(),"\n","\t","button_width:             ",this.settings.button_width.toString(),"\n","\t","button_height:            ",this.settings.button_height.toString(),"\n","\t","button_text:              ",this.settings.button_text.toString(),"\n","\t","button_text_style:        ",this.settings.button_text_style.toString(),"\n","\t","button_text_top_padding:  ",this.settings.button_text_top_padding.toString(),"\n","\t","button_text_left_padding: ",this.settings.button_text_left_padding.toString(),"\n","\t","button_action:            ",this.settings.button_action.toString(),"\n","\t","button_disabled:          ",this.settings.button_disabled.toString(),"\n","\t","custom_settings:          ",this.settings.custom_settings.toString(),"\n","Event Handlers:\n","\t","swfupload_loaded_handler assigned:  ",(typeof this.settings.swfupload_loaded_handler==="function").toString(),"\n","\t","file_dialog_start_handler assigned: ",(typeof this.settings.file_dialog_start_handler==="function").toString(),"\n","\t","file_queued_handler assigned:       ",(typeof this.settings.file_queued_handler==="function").toString(),"\n","\t","file_queue_error_handler assigned:  ",(typeof this.settings.file_queue_error_handler==="function").toString(),"\n","\t","upload_start_handler assigned:      ",(typeof this.settings.upload_start_handler==="function").toString(),"\n","\t","upload_progress_handler assigned:   ",(typeof this.settings.upload_progress_handler==="function").toString(),"\n","\t","upload_error_handler assigned:      ",(typeof this.settings.upload_error_handler==="function").toString(),"\n","\t","upload_success_handler assigned:    ",(typeof this.settings.upload_success_handler==="function").toString(),"\n","\t","upload_complete_handler assigned:   ",(typeof this.settings.upload_complete_handler==="function").toString(),"\n","\t","debug_handler assigned:             ",(typeof this.settings.debug_handler==="function").toString(),"\n"].join(""))};SWFUpload.prototype.addSetting=function(B,C,A){if(C==undefined){return(this.settings[B]=A)}else{return(this.settings[B]=C)}};SWFUpload.prototype.getSetting=function(A){if(this.settings[A]!=undefined){return this.settings[A]}return""};SWFUpload.prototype.callFlash=function(functionName,argumentArray){argumentArray=argumentArray||[];var movieElement=this.getMovieElement();var returnValue,returnString;try{returnString=movieElement.CallFunction('<invoke name="'+functionName+'" returntype="javascript">'+__flash__argumentsToXML(argumentArray,0)+"</invoke>");returnValue=eval(returnString)}catch(ex){throw"Call to "+functionName+" failed"}if(returnValue!=undefined&&typeof returnValue.post==="object"){returnValue=this.unescapeFilePostParams(returnValue)}return returnValue};SWFUpload.prototype.selectFile=function(){this.callFlash("SelectFile")};SWFUpload.prototype.selectFiles=function(){this.callFlash("SelectFiles")};SWFUpload.prototype.startUpload=function(A){this.callFlash("StartUpload",[A])};SWFUpload.prototype.cancelUpload=function(A,B){if(B!==false){B=true}this.callFlash("CancelUpload",[A,B])};SWFUpload.prototype.stopUpload=function(){this.callFlash("StopUpload")};SWFUpload.prototype.getStats=function(){return this.callFlash("GetStats")};SWFUpload.prototype.setStats=function(A){this.callFlash("SetStats",[A])};SWFUpload.prototype.getFile=function(A){if(typeof (A)==="number"){return this.callFlash("GetFileByIndex",[A])}else{return this.callFlash("GetFile",[A])}};SWFUpload.prototype.addFileParam=function(A,B,C){return this.callFlash("AddFileParam",[A,B,C])};SWFUpload.prototype.removeFileParam=function(A,B){this.callFlash("RemoveFileParam",[A,B])};SWFUpload.prototype.setUploadURL=function(A){this.settings.upload_url=A.toString();this.callFlash("SetUploadURL",[A])};SWFUpload.prototype.setPostParams=function(A){this.settings.post_params=A;this.callFlash("SetPostParams",[A])};SWFUpload.prototype.addPostParam=function(A,B){this.settings.post_params[A]=B;this.callFlash("SetPostParams",[this.settings.post_params])};SWFUpload.prototype.removePostParam=function(A){delete this.settings.post_params[A];this.callFlash("SetPostParams",[this.settings.post_params])};SWFUpload.prototype.setFileTypes=function(A,B){this.settings.file_types=A;this.settings.file_types_description=B;this.callFlash("SetFileTypes",[A,B])};SWFUpload.prototype.setFileSizeLimit=function(A){this.settings.file_size_limit=A;this.callFlash("SetFileSizeLimit",[A])};SWFUpload.prototype.setFileUploadLimit=function(A){this.settings.file_upload_limit=A;this.callFlash("SetFileUploadLimit",[A])};SWFUpload.prototype.setFileQueueLimit=function(A){this.settings.file_queue_limit=A;this.callFlash("SetFileQueueLimit",[A])};SWFUpload.prototype.setFilePostName=function(A){this.settings.file_post_name=A;this.callFlash("SetFilePostName",[A])};SWFUpload.prototype.setUseQueryString=function(A){this.settings.use_query_string=A;this.callFlash("SetUseQueryString",[A])};SWFUpload.prototype.setRequeueOnError=function(A){this.settings.requeue_on_error=A;this.callFlash("SetRequeueOnError",[A])};SWFUpload.prototype.setHTTPSuccess=function(A){if(typeof A==="string"){A=A.replace(" ","").split(",")}this.settings.http_success=A;this.callFlash("SetHTTPSuccess",[A])};SWFUpload.prototype.setAssumeSuccessTimeout=function(A){this.settings.assume_success_timeout=A;this.callFlash("SetAssumeSuccessTimeout",[A])};SWFUpload.prototype.setDebugEnabled=function(A){this.settings.debug_enabled=A;this.callFlash("SetDebugEnabled",[A])};SWFUpload.prototype.setButtonImageURL=function(A){if(A==undefined){A=""}this.settings.button_image_url=A;this.callFlash("SetButtonImageURL",[A])};SWFUpload.prototype.setButtonDimensions=function(C,A){this.settings.button_width=C;this.settings.button_height=A;var B=this.getMovieElement();if(B!=undefined){B.style.width=C+"px";B.style.height=A+"px"}this.callFlash("SetButtonDimensions",[C,A])};SWFUpload.prototype.setButtonText=function(A){this.settings.button_text=A;this.callFlash("SetButtonText",[A])};SWFUpload.prototype.setButtonTextPadding=function(B,A){this.settings.button_text_top_padding=A;this.settings.button_text_left_padding=B;this.callFlash("SetButtonTextPadding",[B,A])};SWFUpload.prototype.setButtonTextStyle=function(A){this.settings.button_text_style=A;this.callFlash("SetButtonTextStyle",[A])};SWFUpload.prototype.setButtonDisabled=function(A){this.settings.button_disabled=A;this.callFlash("SetButtonDisabled",[A])};SWFUpload.prototype.setButtonAction=function(A){this.settings.button_action=A;this.callFlash("SetButtonAction",[A])};SWFUpload.prototype.setButtonCursor=function(A){this.settings.button_cursor=A;this.callFlash("SetButtonCursor",[A])};SWFUpload.prototype.queueEvent=function(B,C){if(C==undefined){C=[]}else{if(!(C instanceof Array)){C=[C]}}var A=this;if(typeof this.settings[B]==="function"){this.eventQueue.push(function(){this.settings[B].apply(this,C)});setTimeout(function(){A.executeNextEvent()},0)}else{if(this.settings[B]!==null){throw"Event handler "+B+" is unknown or is not a function"}}};SWFUpload.prototype.executeNextEvent=function(){var A=this.eventQueue?this.eventQueue.shift():null;if(typeof (A)==="function"){A.apply(this)}};SWFUpload.prototype.unescapeFilePostParams=function(C){var E=/[$]([0-9a-f]{4})/i;var F={};var D;if(C!=undefined){for(var A in C.post){if(C.post.hasOwnProperty(A)){D=A;var B;while((B=E.exec(D))!==null){D=D.replace(B[0],String.fromCharCode(parseInt("0x"+B[1],16)))}F[D]=C.post[A]}}C.post=F}return C};SWFUpload.prototype.testExternalInterface=function(){try{return this.callFlash("TestExternalInterface")
}catch(A){return false}};SWFUpload.prototype.flashReady=function(){var A=this.getMovieElement();if(!A){this.debug("Flash called back ready but the flash movie can't be found.");return }this.cleanUp(A);this.queueEvent("swfupload_loaded_handler")};SWFUpload.prototype.cleanUp=function(A){try{if(this.movieElement&&typeof (A.CallFunction)==="unknown"){this.debug("Removing Flash functions hooks (this should only run in IE and should prevent memory leaks)");for(var C in A){try{if(typeof (A[C])==="function"){A[C]=null}}catch(B){}}}}catch(D){}window.__flash__removeCallback=function(E,F){try{if(E){E[F]=null}}catch(G){}}};SWFUpload.prototype.fileDialogStart=function(){this.queueEvent("file_dialog_start_handler")};SWFUpload.prototype.fileQueued=function(A){A=this.unescapeFilePostParams(A);this.queueEvent("file_queued_handler",A)};SWFUpload.prototype.fileQueueError=function(A,C,B){A=this.unescapeFilePostParams(A);this.queueEvent("file_queue_error_handler",[A,C,B])};SWFUpload.prototype.fileDialogComplete=function(B,C,A){this.queueEvent("file_dialog_complete_handler",[B,C,A])};SWFUpload.prototype.uploadStart=function(A){A=this.unescapeFilePostParams(A);this.queueEvent("return_upload_start_handler",A)};SWFUpload.prototype.returnUploadStart=function(A){var B;if(typeof this.settings.upload_start_handler==="function"){A=this.unescapeFilePostParams(A);B=this.settings.upload_start_handler.call(this,A)}else{if(this.settings.upload_start_handler!=undefined){throw"upload_start_handler must be a function"}}if(B===undefined){B=true}B=!!B;this.callFlash("ReturnUploadStart",[B])};SWFUpload.prototype.uploadProgress=function(A,C,B){A=this.unescapeFilePostParams(A);this.queueEvent("upload_progress_handler",[A,C,B])};SWFUpload.prototype.uploadError=function(A,C,B){A=this.unescapeFilePostParams(A);this.queueEvent("upload_error_handler",[A,C,B])};SWFUpload.prototype.uploadSuccess=function(B,A,C){B=this.unescapeFilePostParams(B);this.queueEvent("upload_success_handler",[B,A,C])};SWFUpload.prototype.uploadComplete=function(A){A=this.unescapeFilePostParams(A);this.queueEvent("upload_complete_handler",A)};SWFUpload.prototype.debug=function(A){this.queueEvent("debug_handler",A)};SWFUpload.prototype.debugMessage=function(C){if(this.settings.debug){var A,D=[];if(typeof C==="object"&&typeof C.name==="string"&&typeof C.message==="string"){for(var B in C){if(C.hasOwnProperty(B)){D.push(B+": "+C[B])}}A=D.join("\n")||"";D=A.split("\n");A="EXCEPTION: "+D.join("\nEXCEPTION: ");SWFUpload.Console.writeLine(A)}else{SWFUpload.Console.writeLine(C)}}};SWFUpload.Console={};SWFUpload.Console.writeLine=function(D){var B,A;try{B=document.getElementById("SWFUpload_Console");if(!B){A=document.createElement("form");document.getElementsByTagName("body")[0].appendChild(A);B=document.createElement("textarea");B.id="SWFUpload_Console";B.style.fontFamily="monospace";B.setAttribute("wrap","off");B.wrap="off";B.style.overflow="auto";B.style.width="700px";B.style.height="350px";B.style.margin="5px";A.appendChild(B)}B.value+=D+"\n";B.scrollTop=B.scrollHeight-B.clientHeight}catch(C){alert("Exception: "+C.name+" Message: "+C.message)}};fluid_1_1=fluid_1_1||{};(function(F,G){var E=function(R,Q,P){Q=(Q)?Q:P;R.animate(Q.params,Q.duration,Q.callback)};var L=function(R,P,Q){R.queue("fx",[]);R.animate({width:P,queue:false},Q)};var I=function(P,Q){if(Q===false){P.displayElement.show()}else{E(P.displayElement,Q,P.options.showAnimation)}};var A=function(R,Q,S){Q=(Q===null||isNaN(Q))?R.options.delay:Q;if(Q){var P=setTimeout(function(){A(R,0,S)},Q)}else{if(S===false){R.displayElement.hide()}else{E(R.displayElement,S,R.options.hideAnimation)}}};var O=function(R,Q,T){T=T||false;var P=R.indicator.width();var S=R.options.animate;if((Q>P)&&(S==="both"||S==="forward")&&!T){L(R.indicator,Q,R.options.speed)}else{if((Q<P)&&(S==="both"||S==="backward")&&!T){L(R.indicator,Q,R.options.speed)}else{R.indicator.width(Q)}}};var J=function(Q,P){return Math.round((Math.min(P,100)*Q.progressBar.width())/100)};var N=function(P){var Q=Math.max(J(P,parseFloat(P.storedPercent)),P.options.minWidth);O(P,Q,true)};var K=function(P){P.attr("role","progressbar");P.attr("aria-valuemin","0");P.attr("aria-valuemax","100");P.attr("aria-valuenow","0");P.attr("aria-valuetext","");P.attr("aria-busy","false")};var H=function(S,R){var Q=R<100&&R>0;S.ariaElement.attr("aria-busy",Q);S.ariaElement.attr("aria-valuenow",R);if(Q){var P=G.stringTemplate(S.options.ariaBusyText,{percentComplete:R});S.ariaElement.attr("aria-valuetext",P)}else{if(R===100){S.ariaElement.attr("aria-valuetext",S.options.ariaDoneText)}}};var D=function(P,Q){P.html(Q)};var M=function(P){P.indicator.css("top",P.progressBar.position().top).css("left",0).height(P.progressBar.height());N(P)};var B=function(R,Q,P,T){I(R,T);if(Q!==null){R.storedPercent=Q;var S=Math.max(J(R,parseFloat(Q)),R.options.minWidth);O(R,S)}if(P!==null){D(R.label,P)}if(R.ariaElement){H(R,Q)}};var C=function(P){P.displayElement=P.locate("displayElement");if(P.options.initiallyHidden){P.displayElement.hide()}P.progressBar=P.locate("progressBar");P.label=P.locate("label");P.indicator=P.locate("indicator");P.ariaElement=P.locate("ariaElement");P.indicator.width(P.options.minWidth);P.storedPercent=0;if(P.ariaElement){K(P.ariaElement)}};G.progress=function(P,Q){var R=G.initView("fluid.progress",P,Q);C(R);R.show=function(S){I(R,S)};R.hide=function(S,T){A(R,S,T)};R.update=function(S,T,U){B(R,S,T,U)};R.refreshView=function(){M(R)};return R};G.defaults("fluid.progress",{selectors:{displayElement:".flc-progress",progressBar:".flc-progress-bar",indicator:".flc-progress-indicator",label:".flc-progress-label",ariaElement:".flc-progress-bar"},showAnimation:{params:{opacity:"show"},duration:"slow",callback:null},hideAnimation:{params:{opacity:"hide"},duration:"slow",callback:null},minWidth:5,delay:0,speed:200,animate:"forward",initiallyHidden:true,updatePosition:false,ariaBusyText:"Progress is %percentComplete percent complete",ariaDoneText:"Progress is complete."})})(jQuery,fluid_1_1);fluid_1_1=fluid_1_1||{};(function(E,F){var A=function(N,M,O,K){if(!K){return }var L=Math.min(O.chunkSize,N.size);O.bytesUploaded=Math.min(O.bytesUploaded+L,N.size);M.onFileProgress.fire(N,O.bytesUploaded,N.size)};var H=function(L,K){if(L.swfUploadSettings){L.swfUploadSettings.upload_complete_handler(K)}else{L.events.afterFileComplete.fire(K)}};var D=function(L,K){L.queueManager.finishFile(K);if(L.queueManager.shouldUploadNextFile()){I(L)}else{L.queueManager.complete()}};var C=function(L){if(!L.queue.isUploading){return }var K=L.demoState.currentFile;K.filestatus=F.uploader.fileStatusConstants.COMPLETE;L.events.onFileSuccess.fire(K);L.demoState.fileIdx++;D(L,K)};var G=function(L){if(!L.queue.isUploading){return }var K=L.demoState.currentFile;if(L.demoState.bytesUploaded<K.size){L.invokeAfterRandomDelay(function(){A(K,L.events,L.demoState,L.queue.isUploading);G(L)})}else{C(L)}};var I=function(K){K.demoState.currentFile=K.queue.files[K.demoState.fileIdx];K.demoState.chunksForCurrentFile=Math.ceil(K.demoState.currentFile/K.demoState.chunkSize);K.demoState.bytesUploaded=0;K.queue.isUploading=true;K.events.onFileStart.fire(K.demoState.currentFile);K.demoState.currentFile.filestatus=F.uploader.fileStatusConstants.IN_PROGRESS;G(K)};var J=function(L){var K=L.demoState.currentFile;K.filestatus=F.uploader.fileStatusConstants.CANCELLED;L.queue.shouldStop=true;L.events.onFileError.fire(K,F.uploader.errorConstants.UPLOAD_STOPPED,"The demo upload was paused by the user.");D(L,K);L.events.onUploadStop.fire()};var B=function(K){if(K.options.simulateDelay===undefined||K.options.simulateDelay===null){K.options.simulateDelay=true}K.demoState={fileIdx:0,chunkSize:200000};return K};F.demoUploadManager=function(K){var L=K;L.start=function(){L.queueManager.start();I(L)};L.stop=function(){J(L)};L.invokeAfterRandomDelay=function(N){var M;if(L.options.simulateDelay){M=Math.floor(Math.random()*1000+100);setTimeout(N,M)}else{N()}};B(L);return L}})(jQuery,fluid_1_1);fluid_1_1=fluid_1_1||{};(function(E,F){var H=function(N,O){var K=[];for(var M=0;M<N.length;M++){var L=N[M];if(O(L)===true){K.push(L)}}return K};var C=function(K){return H(K.files,function(L){return(L.filestatus===F.uploader.fileStatusConstants.COMPLETE)})};var I=function(K){return H(K.files,function(L){return(L.filestatus===F.uploader.fileStatusConstants.QUEUED||L.filestatus===F.uploader.fileStatusConstants.CANCELLED)})};var J=function(K){return H(K.files,function(L){return(L.filestatus===F.uploader.fileStatusConstants.ERROR)})};var B=function(M,L){var K=E.inArray(L,M.files);M.files.splice(K,1)};var G=function(K){K.currentBatch={fileIdx:-1,files:[],totalBytes:0,numFilesCompleted:0,numFilesErrored:0,bytesUploadedForFile:0,previousBytesUploadedForFile:0,totalBytesUploaded:0}};var A=function(K){var L=K.getReadyFiles();K.currentBatch.files=L;K.currentBatch.totalBytes=F.fileQueue.sizeOfFiles(L)};var D=function(K){G(K);A(K)};F.fileQueue=function(){var K={};K.files=[];K.isUploading=false;K.addFile=function(L){K.files.push(L)};K.removeFile=function(L){B(K,L)};K.totalBytes=function(){return F.fileQueue.sizeOfFiles(K.files)};K.getReadyFiles=function(){return I(K)};K.getErroredFiles=function(){return J(K)};K.sizeOfReadyFiles=function(){return F.fileQueue.sizeOfFiles(K.getReadyFiles())};K.getUploadedFiles=function(){return C(K)};K.sizeOfUploadedFiles=function(){return F.fileQueue.sizeOfFiles(K.getUploadedFiles())};K.setupCurrentBatch=function(){D(K)};K.clearCurrentBatch=function(){G(K)};K.updateCurrentBatch=function(){A(K)};return K};F.fileQueue.sizeOfFiles=function(M){var N=0;for(var L=0;L<M.length;L++){var K=M[L];N+=K.size}return N};F.fileQueue.manager=function(K,L){var M={};M.queue=K;M.events=L;M.start=function(){M.queue.setupCurrentBatch();M.queue.isUploading=true;M.queue.shouldStop=false;M.events.onUploadStart.fire(M.queue.currentBatch.files)};M.startFile=function(){M.queue.currentBatch.fileIdx++;M.queue.currentBatch.bytesUploadedForFile=0;M.queue.currentBatch.previousBytesUploadedForFile=0};M.finishFile=function(O){var N=M.queue.currentBatch;
N.numFilesCompleted++;M.events.afterFileComplete.fire(O)};M.shouldUploadNextFile=function(){return !M.queue.shouldStop&&M.queue.isUploading&&M.queue.currentBatch.numFilesCompleted<M.queue.currentBatch.files.length};M.complete=function(){M.events.afterUploadComplete.fire(M.queue.currentBatch.files);M.queue.clearCurrentBatch()};return M}})(jQuery,fluid_1_1);fluid_1_1=fluid_1_1||{};(function(F,D){var A=function(I){var H=I.options.maxHeight;var J=(I.scrollingElm.children().eq(0).height()>H);var G=(J)?H:"";I.scrollingElm.height(G)};var E=function(G){G.scrollingElm[0].scrollTop=G.scrollingElm[0].scrollHeight};var C=function(K,J){if(!J||J.length<1){return }var L=0;var H=0;var P=J[0].offsetTop;var I=J.height();var M=K.scrollingElm[0].scrollTop;var O=K.scrollingElm.height();if(K.options.padScroll){var G=J.prev().height();L=(G+I<=O)?G:0;var N=J.next().height();H=(N+I<=O)?N:0}if((P-L)<M){K.scrollingElm[0].scrollTop=P-L}if(((P+I)+H)>(M+O)){I=(I<O)?I:O;K.scrollingElm[0].scrollTop=(P-O+I+H)}};var B=function(G){G.scrollingElm=G.container.parents(G.options.selectors.wrapper);if(!G.scrollingElm.length){D.fail({name:"Missing Scroller",message:"The scroller wrapper element was not found."})}if(!F.browser.msie||F.browser.version>6){G.scrollingElm.css("max-height",G.options.maxHeight)}};D.scroller=function(G,H){var I=D.initView("fluid.scroller",G,H);B(I);I.scrollTo=function(J){C(I,J)};I.scrollBottom=function(){E(I)};I.refreshView=function(){if(F.browser.msie&&F.browser.version<7){A(I)}};I.refreshView();return I};D.defaults("fluid.scroller",{selectors:{wrapper:".flc-scroller"},maxHeight:180,padScroll:true})})(jQuery,fluid_1_1);fluid_1_1=fluid_1_1||{};(function(H,J){var B=function(){var R=function(){};SWFUpload.prototype.selectFile=R;SWFUpload.prototype.selectFiles=R};var F=function(R,S){R.returnedOptions={uploadManager:{type:S.options.uploadManager.type||S.options.uploadManager}}};var G=function(S){var R=H("<div><span></span></div>");R.addClass(S.options.styles.flash9Container);H("body").append(R);return R};var A=function(R){var S=G(R);R.returnedOptions.uploadManager.options={flashURL:R.options.flash9URL||undefined,flashButtonPeerId:J.allocateSimpleId(S.children().eq(0))}};var C=function(S,R){R.wrap("<div class='"+S.options.styles.uploaderWrapperFlash10+"'></div>");var T=H("<div><span></span></div>");T.addClass(S.options.styles.browseButtonOverlay);R.after(T);B();return T};var O=function(S,U){var V=S.options,T=C(S,U.container),R=U.locate("browseButton");J.tabindex(R,-1);S.isTransparent=V.flashButtonAlwaysVisible?false:(!H.browser.msie||V.transparentEvenInIE);S.returnedOptions.uploadManager.options={flashURL:V.flash10URL||undefined,flashButtonImageURL:S.isTransparent?undefined:V.flashButtonImageURL,flashButtonPeerId:J.allocateSimpleId(T.children().eq(0)),flashButtonHeight:V.flashButtonHeight||R.outerHeight(),flashButtonWidth:V.flashButtonWidth||R.outerWidth(),flashButtonWindowMode:S.isTransparent?SWFUpload.WINDOW_MODE.TRANSPARENT:SWFUpload.WINDOW_MODE.OPAQUE,flashButtonCursorEffect:SWFUpload.CURSOR.HAND,listeners:{onUploadStart:function(){U.uploadManager.swfUploader.setButtonDisabled(true)},afterUploadComplete:function(){U.uploadManager.swfUploader.setButtonDisabled(false)}}}};J.swfUploadSetupDecorator=function(T,R){var S={};J.mergeComponentOptions(S,"fluid.swfUploadSetupDecorator",R);S.flashVersion=swfobject.getFlashPlayerVersion().major;F(S,T);if(S.flashVersion===9){A(S,T)}else{O(S,T)}return S};J.defaults("fluid.swfUploadSetupDecorator",{flashButtonAlwaysVisible:false,transparentEvenInIE:true,flashButtonImageURL:"../images/browse.png",styles:{browseButtonOverlay:"fl-uploader-browse-overlay",flash9Container:"fl-uploader-flash9-container",uploaderWrapperFlash10:"fl-uploader-flash10-wrapper"}});var M={uploadURL:"upload_url",flashURL:"flash_url",postParams:"post_params",fileSizeLimit:"file_size_limit",fileTypes:"file_types",fileTypesDescription:"file_types_description",fileUploadLimit:"file_upload_limit",fileQueueLimit:"file_queue_limit",flashButtonPeerId:"button_placeholder_id",flashButtonImageURL:"button_image_url",flashButtonHeight:"button_height",flashButtonWidth:"button_width",flashButtonWindowMode:"button_window_mode",flashButtonCursorEffect:"button_cursor",debug:"debug"};var Q={afterReady:"swfupload_loaded_handler",onFileDialog:"file_dialog_start_handler",afterFileQueued:"file_queued_handler",onQueueError:"file_queue_error_handler",afterFileDialog:"file_dialog_complete_handler",onFileStart:"upload_start_handler",onFileProgress:"upload_progress_handler",onFileError:"upload_error_handler",onFileSuccess:"upload_success_handler"};var P=function(W,U,V){var R=V||{};for(var S in U){var T=W[S];if(T){R[T]=U[S]}}return R};var K=function(V,X,W){var S=W||{};for(var T in V.events){var R=V.events[T].fire;var U=X[T];if(U){S[U]=R}}S.upload_complete_handler=function(Y){V.queueManager.finishFile(Y);if(V.queueManager.shouldUploadNextFile()){V.swfUploader.startUpload()}else{if(V.queueManager.queue.shouldStop){V.swfUploader.stopUpload()}V.queueManager.complete()}};return S};var L=function(R){if(R.queue.isUploading){return }if(R.options.fileQueueLimit===1){R.swfUploader.selectFile()}else{R.swfUploader.selectFiles()}};var I=function(R){R.queue.shouldStop=true;R.events.onUploadStop.fire()};var E=function(R){var S=function(T){J.find(R.queue.files,function(U){if(U.id===T.id){U.filestatus=T.filestatus;return true}})};R.events.afterFileQueued.addListener(function(T){R.queue.addFile(T)});R.events.onFileStart.addListener(function(T){R.queueManager.startFile();S(T)});R.events.onFileProgress.addListener(function(U,X,V){var T=R.queue.currentBatch;var W=X-T.previousBytesUploadedForFile;T.totalBytesUploaded+=W;T.bytesUploadedForFile+=W;T.previousBytesUploadedForFile=X;S(U)});R.events.onFileError.addListener(function(U,T){if(T===J.uploader.errorConstants.UPLOAD_STOPPED){R.queue.isUploading=false}else{if(R.queue.isUploading){R.queue.currentBatch.totalBytesUploaded+=U.size;R.queue.currentBatch.numFilesErrored++}}S(U)});R.events.onFileSuccess.addListener(function(T){if(R.queue.currentBatch.bytesUploadedForFile===0){R.queue.currentBatch.totalBytesUploaded+=T.size}S(T)});R.events.afterUploadComplete.addListener(function(){R.queue.isUploading=false})};var D=function(S,R){S.queue.removeFile(R);S.swfUploader.cancelUpload(R.id);S.events.afterFileRemoved.fire(R)};var N=function(S,R){S.events=R;S.queue=J.fileQueue();S.queueManager=J.fileQueue.manager(S.queue,S.events);S.swfUploadSettings=P(M,S.options);K(S,Q,S.swfUploadSettings);S.swfUploader=new SWFUpload(S.swfUploadSettings);E(S)};J.swfUploadManager=function(S,R){var T={};J.mergeComponentOptions(T,"fluid.swfUploadManager",R);J.mergeListeners(S,T.options.listeners);T.browseForFiles=function(){L(T)};T.removeFile=function(U){D(T,U)};T.start=function(){T.queueManager.start();T.swfUploader.startUpload()};T.stop=function(){I(T)};N(T,S);return T};J.defaults("fluid.swfUploadManager",{uploadURL:"",flashURL:"../../../lib/swfupload/flash/swfupload.swf",flashButtonPeerId:"",postParams:{},fileSizeLimit:"20480",fileTypes:"*",fileTypesDescription:null,fileUploadLimit:0,fileQueueLimit:0,debug:false})})(jQuery,fluid_1_1);fluid_1_1=fluid_1_1||{};(function(G,I){var d=function(g,f){return g.locate("fileQueue").find("#"+f.id)};var F=function(g,f){return G("#"+f.id+"_error",g.container)};var E=function(j,k){var h=j.uploadManager.queue.files;for(var g=0;g<h.length;g++){var f=h[g];if(f.id.toString()===k.attr("id")){return f}}return null};var U=function(g,f){var h=f.id+"_progress";return g.fileProgressors[h]};var a=function(h,f){var g=d(h,f);h.scroller.scrollTo(g);var i=U(h,f);i.refreshView();i.show()};var R=function(i,g,h,f){var j=I.uploader.derivePercent(h,f);var k=j+"%";U(i,g).update(j,k)};var N=function(h,f){var g=d(h,f);U(h,f).hide();if(f.filestatus===I.uploader.fileStatusConstants.COMPLETE){h.locate("fileIconBtn",g).removeClass(h.options.styles.dim)}};var C=function(h,g){var i=U(h,g);if(!i){return }var f=i.displayElement;f.remove()};var b=function(f,g){g.fadeOut("fast",function(){g.remove();f.refreshView()})};var e=function(g,f){if(f.filestatus===I.uploader.fileStatusConstants.ERROR){b(g,F(g,f))}};var B=function(g,f,h){C(g,f);e(g,f);g.uploadManager.removeFile(f);b(g,h)};var L=function(g,h){var f=E(g,h);if(!f||f.filestatus===I.uploader.fileStatusConstants.COMPLETE){return }B(g,f,h)};var W=function(g,f){var h=d(g,f);B(g,f,h)};var K=function(i,g){var h=function(){if(i.hasClass(g.ready)&&!i.hasClass(g.uploading)){i.addClass(g.hover)}};var f=function(){if(i.hasClass(g.ready)&&!i.hasClass(g.uploading)){i.removeClass(g.hover)}};i.hover(h,f)};var J=function(f,h){var g=function(){L(f,h)};I.activatable(h,null,{additionalBindings:[{key:G.ui.keyCode.DELETE,activateHandler:g}]})};var M=function(f,g){if(G.browser.msie&&G.browser.version<7){K(g,f.options.styles)}f.locate("fileIconBtn",g).click(function(){L(f,g)});J(f,g)};var Q=function(g,f){var h=g.rowTemplate.clone();h.removeClass(g.options.styles.hiddenTemplate);g.locate("fileName",h).text(f.name);g.locate("fileSize",h).text(I.uploader.formatFileSize(f.size));g.locate("fileIconBtn",h).addClass(g.options.styles.remove);h.attr("id",f.id);h.addClass(g.options.styles.ready);M(g,h);return h};var S=function(g,j){var f=g.rowProgressorTemplate.clone();var h=j.attr("id");var i=h+"_progress";f.attr("id",i);f.css("top",j.position().top);f.height(j.height()).width(5);g.container.after(f);g.fileProgressors[i]=I.progress(g.uploadContainer,{selectors:{progressBar:"#"+h,displayElement:"#"+i,label:"#"+i+" .fl-uploader-file-progress-text",indicator:"#"+i}})};var V=function(g,f){var h=Q(g,f);if(!(G.browser.msie&&(G.browser.version>=8))){h.hide()}g.container.append(h);h.fadeIn("slow");g.scroller.scrollBottom();S(g,h);g.refreshView()};var Z=function(f){var g=f.locate("fileIconBtn",f.locate("fileRows"));g.attr("disabled","disabled");g.addClass(f.options.styles.dim)};var H=function(f){var g=f.locate("fileIconBtn",f.locate("fileRows"));g.removeAttr("disabled");g.removeClass(f.options.styles.dim)};var P=function(f,h,g){h.removeClass(f.options.styles.ready).removeClass(f.options.styles.error).addClass(g)
};var A=function(h,g){var i=d(h,g);P(h,i,h.options.styles.uploaded);i.attr("title",h.options.strings.status.success);I.enabled(i,false);var f=h.locate("fileIconBtn",i);f.unbind("click");f.removeClass(h.options.styles.remove);f.attr("title",h.options.strings.status.success)};var X=function(i,k,f){var h=i.errorInfoRowTemplate.clone();h.attr("id",k.attr("id")+"_error");var j=I.keyForValue(I.uploader.errorConstants,f);var g=i.options.strings.errors[j];i.locate("errorText",h).text(g);k.after(h);i.scroller.scrollTo(h)};var c=function(i,g,f){N(i,g);if(g.filestatus===I.uploader.fileStatusConstants.ERROR){var h=d(i,g);P(i,h,i.options.styles.error);X(i,h,f)}};var T=function(f){f.returnedOptions={listeners:{afterFileQueued:f.addFile,onUploadStart:f.prepareForUpload,onFileStart:f.showFileProgress,onFileProgress:f.updateFileProgress,onFileSuccess:f.markFileComplete,onFileError:f.showErrorForFile,afterFileComplete:f.hideFileProgress,afterUploadComplete:f.refreshAfterUpload}}};var Y=function(f){I.tabbable(f.container);f.selectableContext=I.selectable(f.container,{selectableSelector:f.options.selectors.fileRows,onSelect:function(g){G(g).addClass(f.options.styles.selected)},onUnselect:function(g){G(g).removeClass(f.options.styles.selected)}})};var O=function(f){f.rowTemplate=f.locate("rowTemplate").remove();f.errorInfoRowTemplate=f.locate("errorInfoRowTemplate").remove();f.errorInfoRowTemplate.removeClass(f.options.styles.hiddenTemplate);f.rowProgressorTemplate=f.locate("rowProgressorTemplate",f.uploadContainer).remove()};var D=function(g,f){g.uploadManager=f;g.scroller=I.scroller(g.container);O(g);Y(g);T(g)};I.fileQueueView=function(g,j,f,h){var i=I.initView("fluid.fileQueueView",g,h);i.uploadContainer=j;i.fileProgressors={};i.addFile=function(k){V(i,k)};i.removeFile=function(k){W(i,k)};i.prepareForUpload=function(){Z(i)};i.refreshAfterUpload=function(){H(i)};i.showFileProgress=function(k){a(i,k)};i.updateFileProgress=function(l,m,k){R(i,l,m,k)};i.markFileComplete=function(k){U(i,k).update(100,"100%");A(i,k)};i.showErrorForFile=function(l,k){c(i,l,k)};i.hideFileProgress=function(k){N(i,k)};i.refreshView=function(){i.scroller.refreshView();i.selectableContext.refresh()};D(i,f);return i};I.defaults("fluid.fileQueueView",{selectors:{fileRows:".flc-uploader-file",fileName:".flc-uploader-file-name",fileSize:".flc-uploader-file-size",fileIconBtn:".flc-uploader-file-action",errorText:".flc-uploader-file-error",rowTemplate:".flc-uploader-file-tmplt",errorInfoRowTemplate:".flc-uploader-file-error-tmplt",rowProgressorTemplate:".flc-uploader-file-progressor-tmplt"},styles:{hover:"fl-uploader-file-hover",selected:"fl-uploader-file-focus",ready:"fl-uploader-file-state-ready",uploading:"fl-uploader-file-state-uploading",uploaded:"fl-uploader-file-state-uploaded",error:"fl-uploader-file-state-error",remove:"fl-uploader-file-action-remove",dim:"fl-uploader-dim",hiddenTemplate:"fl-uploader-hidden-templates"},strings:{progress:{toUploadLabel:"To upload: %fileCount %fileLabel (%totalBytes)",singleFile:"file",pluralFiles:"files"},status:{success:"File Uploaded",error:"File Upload Error"},errors:{HTTP_ERROR:"File upload error: a network error occured or the file was rejected (reason unknown).",IO_ERROR:"File upload error: a network error occured.",UPLOAD_LIMIT_EXCEEDED:"File upload error: you have uploaded as many files as you are allowed during this session",UPLOAD_FAILED:"File upload error: the upload failed for an unknown reason.",QUEUE_LIMIT_EXCEEDED:"You have as many files in the queue as can be added at one time. Removing files from the queue may allow you to add different files.",FILE_EXCEEDS_SIZE_LIMIT:"One or more of the files that you attempted to add to the queue exceeded the limit of %fileSizeLimit.",ZERO_BYTE_FILE:"One or more of the files that you attempted to add contained no data.",INVALID_FILETYPE:"One or more files were not added to the queue because they were of the wrong type."}}})})(jQuery,fluid_1_1);(function(H,L){var N=function(d,e){return(e===1)?d.options.strings.progress.singleFile:d.options.strings.progress.pluralFiles};var U=function(d,e){e.removeAttr("disabled");e.removeClass(d.options.styles.dim)};var O=function(d,e){e.attr("disabled","disabled");e.addClass(d.options.styles.dim)};var A=function(d,e){e.removeClass(d.options.styles.hidden)};var F=function(d,e){e.addClass(d.options.styles.hidden)};var a=function(f,e){e=e||false;var d=f.totalProgress.indicator;d.toggleClass(f.options.styles.totalProgress,!e);d.toggleClass(f.options.styles.totalProgressError,e)};var G=function(d){O(d,d.locate("uploadButton"));if(d.uploadManager.queue.files.length===0){d.locate("browseButton").text(d.options.strings.buttons.browse);A(d,d.locate("instructions"))}};var C=function(d){O(d,d.locate("uploadButton"));U(d,d.locate("browseButton"));F(d,d.locate("pauseButton"));A(d,d.locate("uploadButton"))};var M=function(d){d.locate("browseButton").text(d.options.strings.buttons.addMore);F(d,d.locate("pauseButton"));A(d,d.locate("uploadButton"));U(d,d.locate("uploadButton"));U(d,d.locate("browseButton"));F(d,d.locate("instructions"));d.totalProgress.hide()};var D=function(d){d.totalProgress.hide(false,false);a(d);F(d,d.locate("uploadButton"));O(d,d.locate("browseButton"));U(d,d.locate("pauseButton"));A(d,d.locate("pauseButton"));d.locate(d.options.focusWithEvent.afterUploadStart).focus()};var X=function(g){var e=g.uploadManager.queue.getReadyFiles().length;var h=g.uploadManager.queue.sizeOfReadyFiles();var d=N(g,e);var f=L.stringTemplate(g.options.strings.progress.toUploadLabel,{fileCount:e,fileLabel:d,totalBytes:L.uploader.formatFileSize(h)});g.locate("totalFileStatusText").html(f)};var B=function(i){var g=i.uploadManager.queue.currentBatch;var d=L.uploader.derivePercent(g.totalBytesUploaded,g.totalBytes);var f=g.files.length;var h=N(i,f);var e=L.stringTemplate(i.options.strings.progress.totalProgressLabel,{curFileN:g.fileIdx+1,totalFilesN:f,fileLabel:h,currBytes:L.uploader.formatFileSize(g.totalBytesUploaded),totalBytes:L.uploader.formatFileSize(g.totalBytes)});i.totalProgress.update(d,e)};var S=function(h){var j=h.uploadManager.queue.getErroredFiles().length;var i=h.uploadManager.queue.files.length;var f=N(h,i);var g="";if(j>0){var e=(j===1)?h.options.strings.progress.singleError:h.options.strings.progress.pluralErrors;a(h,true);g=L.stringTemplate(h.options.strings.progress.numberOfErrors,{errorsN:j,errorLabel:e})}var d=L.stringTemplate(h.options.strings.progress.completedLabel,{curFileN:h.uploadManager.queue.getUploadedFiles().length,totalFilesN:i,errorString:g,fileLabel:f,totalCurrBytes:L.uploader.formatFileSize(h.uploadManager.queue.sizeOfUploadedFiles())});h.totalProgress.update(100,d)};var T=function(d){d.locate("browseButton").click(function(e){d.uploadManager.browseForFiles();e.preventDefault()});d.locate("uploadButton").click(function(){d.uploadManager.start()});d.locate("pauseButton").click(function(){d.uploadManager.stop()})};var c=function(d){if(d.uploadManager.queue.getReadyFiles().length>0){M(d);X(d);d.locate(d.options.focusWithEvent.afterFileDialog).focus()}};var I=function(d){if(d.uploadManager.queue.getReadyFiles().length===0){G(d)}X(d)};var J=function(d){};var P=function(e){var d=e.uploadManager.queue.shouldStop;if(e.uploadManager.queue.getReadyFiles().length===0){C(e)}else{M(e)}S(e)};var W=function(d){d.events.afterFileDialog.addListener(function(){c(d)});d.events.afterFileRemoved.addListener(function(){I(d)});d.events.onUploadStart.addListener(function(){D(d)});d.events.onUploadStop.addListener(function(){d.locate(d.options.focusWithEvent.afterUploadStop).focus()});d.events.onFileProgress.addListener(function(){B(d)});d.events.onFileSuccess.addListener(function(){B(d)});d.events.onFileError.addListener(function(f,e,g){if(e===L.uploader.errorConstants.UPLOAD_STOPPED){J(d)}});d.events.afterUploadComplete.addListener(function(){P(d)})};var Z=function(e){var d=L.initSubcomponent(e,"uploadManager",[e.events,L.COMPONENT_OPTIONS]);return e.options.demo?L.demoUploadManager(d):d};var K=function(d){d.decorators=L.initSubcomponents(d,"decorators",[d,L.COMPONENT_OPTIONS]);d.uploadManager=Z(d);d.fileQueueView=L.initSubcomponent(d,"fileQueueView",[d.locate("fileQueue"),d.container,d.uploadManager,L.COMPONENT_OPTIONS]);d.totalProgress=L.initSubcomponent(d,"totalProgressBar",[d.container,L.COMPONENT_OPTIONS]);O(d,d.locate("uploadButton"));T(d);W(d)};L.uploader=function(d,e){var f=L.initView("fluid.uploader",d,e);K(f);return f};L.progressiveEnhanceableUploader=function(d,f,e){f=L.container(f);d=L.container(d);if(swfobject.getFlashPlayerVersion().major<9){f.show()}else{d.show();return L.uploader(d,e)}};L.uploader.formatFileSize=function(d){if(typeof d==="number"){if(d===0){return"0.0 KB"}else{if(d>0){if(d<1048576){return(Math.ceil(d/1024*10)/10).toFixed(1)+" KB"}else{return(Math.ceil(d/1048576*10)/10).toFixed(1)+" MB"}}}}return""};L.uploader.derivePercent=function(d,e){return Math.round((d*100)/e)};L.defaults("fluid.uploader",{demo:false,decorators:[{type:"fluid.swfUploadSetupDecorator"},{type:"fluid.manuallyDegrade",options:{selectors:{enhanceable:".fl-uploader.fl-progEnhance-basic"}}}],uploadManager:{type:"fluid.swfUploadManager"},fileQueueView:{type:"fluid.fileQueueView"},totalProgressBar:{type:"fluid.progress",options:{selectors:{progressBar:".flc-uploader-queue-footer",displayElement:".flc-uploader-total-progress",label:".flc-uploader-total-progress-text",indicator:".flc-uploader-total-progress",ariaElement:".flc-uploader-total-progress"}}},selectors:{fileQueue:".flc-uploader-queue",browseButton:".flc-uploader-button-browse",uploadButton:".flc-uploader-button-upload",pauseButton:".flc-uploader-button-pause",totalFileStatusText:".flc-uploader-total-progress-text",instructions:".flc-uploader-browse-instructions"},focusWithEvent:{afterFileDialog:"uploadButton",afterUploadStart:"pauseButton",afterUploadStop:"uploadButton"},styles:{disabled:"fl-uploader-disabled",hidden:"fl-uploader-hidden",dim:"fl-uploader-dim",totalProgress:"fl-uploader-total-progress-okay",totalProgressError:"fl-uploader-total-progress-errored"},events:{afterReady:null,onFileDialog:null,afterFileQueued:null,afterFileRemoved:null,onQueueError:null,afterFileDialog:null,onUploadStart:null,onUploadStop:null,onFileStart:null,onFileProgress:null,onFileError:null,onFileSuccess:null,afterFileComplete:null,afterUploadComplete:null},strings:{progress:{toUploadLabel:"To upload: %fileCount %fileLabel (%totalBytes)",totalProgressLabel:"Uploading: %curFileN of %totalFilesN %fileLabel (%currBytes of %totalBytes)",completedLabel:"Uploaded: %curFileN of %totalFilesN %fileLabel (%totalCurrBytes)%errorString",numberOfErrors:", %errorsN %errorLabel",singleFile:"file",pluralFiles:"files",singleError:"error",pluralErrors:"errors"},buttons:{browse:"Browse Files",addMore:"Add More",stopUpload:"Stop Upload",cancelRemaning:"Cancel remaining Uploads",resumeUpload:"Resume Upload"}}});
L.uploader.errorConstants={HTTP_ERROR:-200,MISSING_UPLOAD_URL:-210,IO_ERROR:-220,SECURITY_ERROR:-230,UPLOAD_LIMIT_EXCEEDED:-240,UPLOAD_FAILED:-250,SPECIFIED_FILE_ID_NOT_FOUND:-260,FILE_VALIDATION_FAILED:-270,FILE_CANCELLED:-280,UPLOAD_STOPPED:-290};L.uploader.fileStatusConstants={QUEUED:-1,IN_PROGRESS:-2,ERROR:-3,COMPLETE:-4,CANCELLED:-5};var b=function(d,h,e,g){var f=H("<a href='#'>"+h+"</a>");f.addClass(e);if(d==="before"){g.before(f)}else{g.after(f)}return f};var E=function(d,e){if(window.opera){d.show().removeClass("hideUploaderForOpera");e.show().addClass("hideUploaderForOpera")}else{d.show();e.hide()}};var Y=function(d){var f=b(d.options.defaultRenderLocation,d.options.strings.degradeLinkText,d.options.styles.degradeLinkClass,d.enhancedContainer);f.addClass("flc-manuallyDegrade-degrade");var e=b(d.options.defaultRenderLocation,d.options.strings.enhanceLinkText,d.options.styles.enhanceLinkClass,d.degradedContainer);e.addClass("flc-manuallyDegrade-enhance")};var V=function(d){d.degradeControl=d.locate("degradeControl");d.enhanceControl=d.locate("enhanceControl")};var R=function(d){if(!d.degradedContainer.length){return }V(d);if(!d.degradeControl.length&&!d.enhanceControl.length){d.options.controlRenderer(d);V(d)}d.degradeControl.click(d.degrade);d.enhanceControl.click(d.enhance);d.enhanceControl.hide()};var Q=function(d){var e=L.defaults("fluid.manuallyDegrade");return(d&&d.container)?d.container:e.container};L.manuallyDegrade=function(f,e){var d=Q(e);var h=L.initView("fluid.manuallyDegrade",d,e);var g=false;h.enhancedContainer=f.container;h.degradedContainer=h.locate("enhanceable");h.degrade=function(){E(h.enhanceControl,h.degradeControl);E(h.degradedContainer,h.enhancedContainer);g=true};h.enhance=function(){E(h.degradeControl,h.enhanceControl);E(h.enhancedContainer,h.degradedContainer);g=false};h.isDegraded=function(){return g};R(h);return h};L.defaults("fluid.manuallyDegrade",{container:"body",controlRenderer:Y,defaultRenderLocation:"before",strings:{degradeLinkText:"Switch to the standard single-file Uploader",enhanceLinkText:"Switch to the Flash-based multi-file Uploader"},selectors:{enhanceable:".fl-ProgEnhance-basic",degradeControl:".flc-manuallyDegrade-degrade",enhanceControl:".flc-manuallyDegrade-enhance"},styles:{degradeLinkClass:"fl-uploader-manually-degrade",enhanceLinkClass:"fl-uploader-manually-enhance"}})})(jQuery,fluid_1_1);(function(A){A.fn.bgIframe=A.fn.bgiframe=function(C){if(A.browser.msie&&parseInt(A.browser.version)<=6){C=A.extend({top:"auto",left:"auto",width:"auto",height:"auto",opacity:true,src:"javascript:false;"},C||{});var D=function(E){return E&&E.constructor==Number?E+"px":E},B='<iframe class="bgiframe"frameborder="0"tabindex="-1"src="'+C.src+'"style="display:block;position:absolute;z-index:-1;'+(C.opacity!==false?"filter:Alpha(Opacity='0');":"")+"top:"+(C.top=="auto"?"expression(((parseInt(this.parentNode.currentStyle.borderTopWidth)||0)*-1)+'px')":D(C.top))+";left:"+(C.left=="auto"?"expression(((parseInt(this.parentNode.currentStyle.borderLeftWidth)||0)*-1)+'px')":D(C.left))+";width:"+(C.width=="auto"?"expression(this.parentNode.offsetWidth+'px')":D(C.width))+";height:"+(C.height=="auto"?"expression(this.parentNode.offsetHeight+'px')":D(C.height))+';"/>';return this.each(function(){if(A("> iframe.bgiframe",this).length==0){this.insertBefore(document.createElement(B),this.firstChild)}})}return this};if(!A.browser.version){A.browser.version=navigator.userAgent.toLowerCase().match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)[1]}})(jQuery);(function(E){var B={},K,M,O,J=E.browser.msie&&/MSIE\s(5\.5|6\.)/.test(navigator.userAgent),A=false;E.tooltip={blocked:false,defaults:{delay:200,showURL:true,extraClass:"",top:15,left:15,id:"tooltip"},block:function(){E.tooltip.blocked=!E.tooltip.blocked}};E.fn.extend({tooltip:function(P){P=E.extend({},E.tooltip.defaults,P);H(P);return this.each(function(){E.data(this,"tooltip-settings",P);this.tooltipText=this.title;E(this).removeAttr("title");this.alt=""}).hover(L,F).click(F)},fixPNG:J?function(){return this.each(function(){var P=E(this).css("backgroundImage");if(P.match(/^url\(["']?(.*\.png)["']?\)$/i)){P=RegExp.$1;E(this).css({backgroundImage:"none",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop, src='"+P+"')"}).each(function(){var Q=E(this).css("position");if(Q!="absolute"&&Q!="relative"){E(this).css("position","relative")}})}})}:function(){return this},unfixPNG:J?function(){return this.each(function(){E(this).css({filter:"",backgroundImage:""})})}:function(){return this},hideWhenEmpty:function(){return this.each(function(){E(this)[E(this).html()?"show":"hide"]()})},url:function(){return this.attr("href")||this.attr("src")}});function H(P){if(B.parent){return }B.parent=E('<div id="'+P.id+'"><h3></h3><div class="body"></div><div class="url"></div></div>').appendTo(document.body).hide();if(E.fn.bgiframe){B.parent.bgiframe()}B.title=E("h3",B.parent);B.body=E("div.body",B.parent);B.url=E("div.url",B.parent)}function C(P){return E.data(P,"tooltip-settings")}function G(P){if(C(this).delay){O=setTimeout(N,C(this).delay)}else{N()}A=!!C(this).track;E(document.body).bind("mousemove",D);D(P)}function L(){if(E.tooltip.blocked||this==K||(!this.tooltipText&&!C(this).bodyHandler)){return }K=this;M=this.tooltipText;if(C(this).bodyHandler){B.title.hide();var S=C(this).bodyHandler.call(this);if(S.nodeType||S.jquery){B.body.empty().append(S)}else{B.body.html(S)}B.body.show()}else{if(C(this).showBody){var R=M.split(C(this).showBody);B.title.html(R.shift()).show();B.body.empty();for(var Q=0,P;P=R[Q];Q++){if(Q>0){B.body.append("<br/>")}B.body.append(P)}B.body.hideWhenEmpty()}else{B.title.html(M).show();B.body.hide()}}if(C(this).showURL&&E(this).url()){B.url.html(E(this).url().replace("http://","")).show()}else{B.url.hide()}B.parent.addClass(C(this).extraClass);if(C(this).fixPNG){B.parent.fixPNG()}G.apply(this,arguments)}function N(){O=null;B.parent.show();D()}function D(R){if(E.tooltip.blocked){return }if(!A&&B.parent.is(":visible")){E(document.body).unbind("mousemove",D)}if(K==null||!C(K)){return }B.parent.removeClass("viewport-right").removeClass("viewport-bottom");var T=B.parent[0].offsetLeft;var S=B.parent[0].offsetTop;if(R){T=R.pageX+C(K).left;S=R.pageY+C(K).top;B.parent.css({left:T+"px",top:S+"px"})}var P=I(),Q=B.parent[0];if(P.x+P.cx<Q.offsetLeft+Q.offsetWidth){T-=Q.offsetWidth+20+C(K).left;B.parent.css({left:T+"px"}).addClass("viewport-right")}if(P.y+P.cy<Q.offsetTop+Q.offsetHeight){S-=Q.offsetHeight+20+C(K).top;B.parent.css({top:S+"px"}).addClass("viewport-bottom")}}function I(){return{x:E(window).scrollLeft(),y:E(window).scrollTop(),cx:E(window).width(),cy:E(window).height()}}function F(P){if(E.tooltip.blocked){return }if(O){clearTimeout(O)}K=null;B.parent.hide().removeClass(C(this).extraClass);if(C(this).fixPNG){B.parent.unfixPNG()}}E.fn.Tooltip=E.fn.tooltip})(jQuery);fluid_1_1=fluid_1_1||{};(function(H,F){var D="state_initial",C="state_changed",B="state_reverted";function G(L,J){var I="<span class='flc-undo' aria-live='polite' aria-relevant='all'><span class='flc-undo-undoContainer'>[<a href='#' class='flc-undo-undoControl'>undo</a>]</span><span class='flc-undo-redoContainer'>[<a href='#' class='flc-undo-redoControl'>redo</a>]</span></span>";var K=H(I);J.append(K);return K}function A(I){if(I.state===D){I.locate("undoContainer").hide();I.locate("redoContainer").hide()}else{if(I.state===C){I.locate("undoContainer").show();I.locate("redoContainer").hide()}else{if(I.state===B){I.locate("undoContainer").hide();I.locate("redoContainer").show()}}}}var E=function(I){I.locate("undoControl").click(function(){if(I.state!==B){F.model.copyModel(I.extremalModel,I.component.model);I.component.updateModel(I.initialModel,I);I.state=B;A(I);I.locate("redoControl").focus()}return false});I.locate("redoControl").click(function(){if(I.state!==C){I.component.updateModel(I.extremalModel,I);I.state=C;A(I);I.locate("undoControl").focus()}return false});return{modelChanged:function(J,L,K){if(K!==I){I.state=C;F.model.copyModel(I.initialModel,L);A(I)}}}};F.undoDecorator=function(I,L){var K=F.initView("undo",null,L);K.container=K.options.renderer(K,I.container);F.initDomBinder(K);F.tabindex(K.locate("undoControl"),0);F.tabindex(K.locate("redoControl"),0);K.component=I;K.initialModel={};K.extremalModel={};F.model.copyModel(K.initialModel,I.model);F.model.copyModel(K.extremalModel,I.model);K.state=D;A(K);var J=E(K);K.returnedOptions={listeners:J};return K};F.defaults("undo",{selectors:{undoContainer:".flc-undo-undoContainer",undoControl:".flc-undo-undoControl",redoContainer:".flc-undo-redoContainer",redoControl:".flc-undo-redoControl"},renderer:G})})(jQuery,fluid_1_1);fluid_1_1=fluid_1_1||{};(function(I,K){function N(h,g,d,f){var e=document.createEvent("KeyEvents");e.initKeyEvent(g,1,1,null,0,0,0,0,d,f);h.dispatchEvent(e)}K.setCaretToEnd=function(h,f){var i=f?f.length:0;try{h.focus();if(h.setSelectionRange){h.setSelectionRange(i,i);if(I.browser.mozilla&&i>0){N(h,"keypress",92,92);N(h,"keydown",8,0);N(h,"keypress",8,0)}}else{if(h.createTextRange){var d=h.createTextRange();d.move("character",i);d.select()}}}catch(g){}};K.deadMansBlur=function(h,e,g){var d=false;I(h).blur(function(){d=true;setTimeout(function(){if(d){g(h)}},150)});var f=function(){d=false};e.focus(f);e.click(f)};var D=function(e,f){e.editContainer=e.locate("editContainer");e.editField=e.locate("edit");if(e.editContainer.length!==1){if(e.editField.length===1){e.editContainer=e.editField}else{if(e.editContainer.length>1){K.fail("InlineEdit did not find a unique container for selector "+e.options.selectors.editContainer+": "+K.dumpEl(e.editContainer))}}}if(e.editContainer.length===1&&!e.editField){e.editField=e.locate("edit",e.editContainer)}if(!f){return }var d=e.options.editModeRenderer(e);if(d){e.editContainer=d.container;e.editField=d.field}if(e.editField.length===0){K.fail("InlineEdit improperly initialised - editField could not be located (selector "+e.options.selectors.edit+")")
}};var L=function(d){d.editContainer.hide();d.viewEl.show()};var E=function(d){if(d.isEditing()){setTimeout(function(){d.editView.value(d.model.value)},1);L(d);d.events.afterFinishEdit.fire(d.model.value,d.model.value,d.editField[0],d.viewEl[0])}};var R=function(h){var i=h.editView.value();var f=h.model.value;var d=h.viewEl[0];var g=h.editField[0];var e=h.events.onFinishEdit.fire(i,f,g,d);if(e===false){return }h.updateModelValue(i);h.events.afterFinishEdit.fire(i,f,g,d);L(h)};var W=function(f){if(f.options.submitOnEnter===undefined){f.options.submitOnEnter="textarea"!==K.unwrap(f.editField).nodeName.toLowerCase()}function g(h){return h.keyCode?h.keyCode:(h.which?h.which:0)}var d=function(h){var i=g(h);if(i===I.ui.keyCode.ESCAPE){E(f);return false}};var e=function(h){var i=g(h);if(i!==I.ui.keyCode.ENTER){return true}R(f);f.viewEl.focus();return false};if(f.options.submitOnEnter){f.editContainer.keypress(e)}f.editContainer.keydown(d)};var H=function(d){if(d.options.blurHandlerBinder){d.options.blurHandlerBinder(d)}else{var e=function(f){if(d.isEditing()){R(d)}return false};d.editField.blur(e)}};var Y=function(e,d){if(!e.editInitialized){D(e,!e.options.lazyEditView||!d);if(!e.options.lazyEditView||!d){e.editView=K.initSubcomponent(e,"editView",e.editField);I.extend(true,e.editView,K.initSubcomponent(e,"editAccessor",e.editField));W(e);H(e);e.editView.refreshView(e);e.editInitialized=true}}};var P=function(e){Y(e,false);var d=e.viewEl;var f=e.displayView.value();e.updateModelValue(e.model.value===""?"":f);if(e.options.applyEditPadding){e.editField.width(Math.max(d.width()+e.options.paddings.edit,e.options.paddings.minimumEdit))}d.removeClass(e.options.styles.invitation);d.removeClass(e.options.styles.focus);d.hide();e.editContainer.show();if(e.tooltipEnabled()){I("#"+e.options.tooltipId).hide()}setTimeout(function(){e.editField.focus();K.setCaretToEnd(e.editField[0],e.editView.value());if(e.options.selectOnEdit){e.editField[0].select()}},0);e.events.afterBeginEdit.fire()};var a=function(e,d,f){e.removeClass(d);e.css("padding-right",f)};var T=function(d){d.displayView.value(d.options.defaultViewText);d.viewEl.css("padding-right",d.existingPadding);d.viewEl.addClass(d.options.styles.defaultViewStyle)};var X=function(d){d.displayView.value("");if(I.browser.msie){if(d.viewEl.css("display")==="inline"){d.viewEl.css("display","inline-block")}}};var O=function(d){d.displayView.value(d.model.value);a(d.viewEl,d.options.styles.defaultViewStyle,d.existingPadding)};var S=function(d,e){d.displayView.refreshView(d,e);if(d.editView){d.editView.refreshView(d,e)}};var Z=function(d,e){d.model.value=e;d.refreshView()};var B=function(e,g,f){var d=e.options.modelComparator;var h=d?d(e.model.value,g):e.model.value===g;if(!h){var i=I.extend(true,{},e.model);e.model.value=g;e.events.modelChanged.fire(e.model,i,f);e.refreshView(f)}};var U=function(e,g){var f=function(h){e.addClass(g)};var d=function(h){e.removeClass(g)};e.hover(f,d)};var c=function(d){return function(){var e=d.events.onBeginEdit.fire();if(e===false){return false}P(d);return true}};function G(e){var d=K.unwrap(e.viewEl);return function(g){var f=K.findAncestor(g.target,function(h){if(/input|select|textarea|button|a/i.test(h.nodeName)||h===d){return true}});if(f===d){e.edit();return false}}}var b=function(d){U(d.viewEl,d.options.styles.invitation);d.viewEl.click(G(d))};var A=function(f,d,g){var h=function(){f.addClass(d);f.addClass(g)};var e=function(){f.removeClass(d);f.removeClass(g)};f.focus(h);f.blur(e)};var M=function(e){K.tabbable(e.viewEl);var d=G(e);K.activatable(e.viewEl,function(f){return d(f)})};var F=function(d,e){d.attr("role","button")};var V=function(h){if(h.editContainer.length>0&&h.editField.length>0){return{container:h.editContainer,field:h.editField}}var e="<span><input type='text' class='flc-inlineEdit-edit fl-inlineEdit-edit'/></span>";var j=I(e);var d=I("input",j);var g=h.container.attr("id");if(g){var i=g+"-edit-container";var f=g+"-edit";j.attr("id",i);d.attr("id",f)}h.viewEl.after(j);return{container:j,field:d}};var Q=function(e){var d=false;e.events.onBeginEdit.addListener(function(){d=true});e.events.afterFinishEdit.addListener(function(){d=false});return function(){return d}};var C=function(d,e){var f=e.viewEl.css("padding-right");e.existingPadding=f?parseFloat(f):0;Z(e,e.displayView.value());b(e);M(e);A(e.viewEl,e.options.styles.focus,e.options.styles.invitation);F(e.viewEl);if(e.editContainer){e.editContainer.hide()}var g=function(){if(e.tooltipEnabled()){e.viewEl.tooltip({delay:e.options.tooltipDelay,extraClass:e.options.styles.tooltip,bodyHandler:function(){return e.options.tooltipText},id:e.options.tooltipId})}};I(g);e.decorators=K.initSubcomponents(e,"componentDecorators",[e,K.COMPONENT_OPTIONS])};var J=function(f,d){var e=[];f.each(function(g,h){e.push(K.inlineEdit(I(h),d))});return e};K.inlineEdit=function(d,f){var e=K.initView("inlineEdit",d,f);e.viewEl=e.locate("text");e.displayView=K.initSubcomponent(e,"displayView",e.viewEl);I.extend(true,e.displayView,K.initSubcomponent(e,"displayAccessor",e.viewEl));e.model={value:""};e.edit=c(e);e.isEditing=Q(e);e.finish=function(){R(e)};e.cancel=function(){E(e)};e.tooltipEnabled=function(){return e.options.useTooltip&&I.fn.tooltip};e.refreshView=function(g){S(e,g)};e.updateModelValue=function(h,g){B(e,h,g)};e.updateModel=function(g,h){B(e,g.value,h)};Y(e,true);C(d,e);return e};K.inlineEdit.standardAccessor=function(d){var f=d.nodeName.toLowerCase();var e="input"===f||"textarea"===f?"val":"text";return{value:function(g){return I(d)[e](g)}}};K.inlineEdit.richTextViewAccessor=function(d){return{value:function(e){return I(d).html(e)}}};K.inlineEdit.standardDisplayView=function(e){var d={refreshView:function(f,g){if(f.model.value){O(f)}else{if(f.options.defaultViewText){T(f)}else{X(f)}}if((I.trim(f.viewEl.text()).length===0)&&(f.existingPadding<f.options.paddings.minimumView)){f.viewEl.css("padding-right",f.options.paddings.minimumView)}}};return d};K.inlineEdit.standardEditView=function(d){var e={refreshView:function(f,g){if(f.editField&&f.editField.index(g)===-1){f.editView.value(f.model.value)}}};I.extend(true,e,K.inlineEdit.standardAccessor(d));return e};K.inlineEdits=function(e,f){f=f||{};var g=I.extend({},K.defaults("inlineEdits").selectors,f.selectors);var d=K.container(e);var h=I(g.editables,d);return J(h,f)};K.defaults("inlineEdit",{selectors:{text:".flc-inlineEdit-text",editContainer:".flc-inlineEdit-editContainer",edit:".flc-inlineEdit-edit"},styles:{text:"fl-inlineEdit-text",edit:"fl-inlineEdit-edit",invitation:"fl-inlineEdit-invitation",defaultViewStyle:"fl-inlineEdit-invitation-text",tooltip:"fl-inlineEdit-tooltip",focus:"fl-inlineEdit-focus"},events:{modelChanged:null,onBeginEdit:"preventable",afterBeginEdit:null,onFinishEdit:"preventable",afterFinishEdit:null,afterInitEdit:null},paddings:{edit:10,minimumEdit:80,minimumView:60},applyEditPadding:true,blurHandlerBinder:null,submitOnEnter:undefined,modelComparator:null,displayAccessor:{type:"fluid.inlineEdit.standardAccessor"},displayView:{type:"fluid.inlineEdit.standardDisplayView"},editAccessor:{type:"fluid.inlineEdit.standardAccessor"},editView:{type:"fluid.inlineEdit.standardEditView"},editModeRenderer:V,lazyEditView:false,defaultViewText:"Click here to edit",tooltipText:"Click item to edit",tooltipId:"tooltip",useTooltip:false,tooltipDelay:1000,selectOnEdit:false});K.defaults("inlineEdits",{selectors:{editables:".flc-inlineEditable"}})})(jQuery,fluid_1_1);fluid_1_1=fluid_1_1||{};(function(C,B){var A=function(H,D,E){var G=B.defaults(H);var F=B.merge(G?G.mergePolicy:null,{},G,E);return B.inlineEdit(D,F)};B.inlineEdit.normalizeHTML=function(E){var D=C.trim(E.replace(/\s+/g," "));D=D.replace(/\s+<\//g,"</");D=D.replace(/\<(\S+)[^\>\s]*\>/g,function(F){return F.toLowerCase()});return D};B.inlineEdit.htmlComparator=function(E,D){return B.inlineEdit.normalizeHTML(E)===B.inlineEdit.normalizeHTML(D)};B.inlineEdit.tinyMCE=function(D,E){var F=A("fluid.inlineEdit.tinyMCE",D,E);tinyMCE.init(F.options.tinyMCE);return F};B.inlineEdit.tinyMCE.viewAccessor=function(D){return{value:function(F){var E=tinyMCE.get(D.id);if(!E){return""}if(F){C(D).val(F);E.setContent(F,{format:"raw"})}else{return E.getContent()}}}};B.inlineEdit.tinyMCE.blurHandlerBinder=function(D){function E(F){setTimeout(function(){tinyMCE.execCommand("mceFocus",false,D.editField[0].id);if(C.browser.mozilla&&C.browser.version.substring(0,3)==="1.8"){return }F.selection.select(F.getBody(),1);F.selection.collapse(0)},10)}D.events.afterInitEdit.addListener(function(F){E(F);var G=F.getBody();B.deadMansBlur(D.editField,C(G),function(){D.cancel()})});D.events.afterBeginEdit.addListener(function(){var F=tinyMCE.get(D.editField[0].id);if(F){E(F)}})};B.inlineEdit.tinyMCE.editModeRenderer=function(F){var E=F.options.tinyMCE;E.elements=B.allocateSimpleId(F.editField);var D=E.init_instance_callback;E.init_instance_callback=function(G){F.events.afterInitEdit.fire(G);if(D){D()}};tinyMCE.init(E)};B.defaults("fluid.inlineEdit.tinyMCE",{tinyMCE:{mode:"exact",theme:"simple"},useTooltip:true,selectors:{edit:"textarea"},styles:{invitation:"fl-inlineEdit-richText-invitation"},displayAccessor:{type:"fluid.inlineEdit.richTextViewAccessor"},editAccessor:{type:"fluid.inlineEdit.tinyMCE.viewAccessor"},lazyEditView:true,modelComparator:B.inlineEdit.htmlComparator,blurHandlerBinder:B.inlineEdit.tinyMCE.blurHandlerBinder,editModeRenderer:B.inlineEdit.tinyMCE.editModeRenderer});B.inlineEdit.FCKEditor=function(D,E){return A("fluid.inlineEdit.FCKEditor",D,E)};B.inlineEdit.FCKEditor.complete=B.event.getEventFirer();B.inlineEdit.FCKEditor.complete.addListener(function(E){var D=E.LinkedField;var F=C.data(D,"fluid.inlineEdit.FCKEditor");F.events.afterInitEdit.fire(E)});B.inlineEdit.FCKEditor.blurHandlerBinder=function(D){function E(F){F.Focus()}D.events.afterInitEdit.addListener(function(F){E(F);var G=F.EditingArea.TargetElement});D.events.afterBeginEdit.addListener(function(){var F=B.inlineEdit.FCKEditor.byId(D.editField[0].id);
if(F){E(F)}})};B.inlineEdit.FCKEditor.byId=function(E){var D=typeof (FCKeditorAPI)==="undefined"?null:FCKeditorAPI.GetInstance(E);return D};B.inlineEdit.FCKEditor.editModeRenderer=function(F){var G=B.allocateSimpleId(F.editField);C.data(B.unwrap(F.editField),"fluid.inlineEdit.FCKEditor",F);var E=new FCKeditor(G);var D=B.copy(F.options.FCKEditor);D.BasePath=D.BasePath+"editor/";C.extend(true,E.Config,D);C.extend(true,E,F.options.FCKEditor);E.Config.fluidInstance=F;E.ReplaceTextarea()};B.inlineEdit.FCKEditor.viewAccessor=function(D){return{value:function(F){var E=B.inlineEdit.FCKEditor.byId(D.id);if(!E){if(F){C(D).val(F)}return""}if(F){E.SetHTML(F)}else{return E.GetHTML()}}}};B.defaults("fluid.inlineEdit.FCKEditor",{selectors:{edit:"textarea"},styles:{invitation:"fl-inlineEdit-richText-invitation"},displayAccessor:{type:"fluid.inlineEdit.richTextViewAccessor"},editAccessor:{type:"fluid.inlineEdit.FCKEditor.viewAccessor"},lazyEditView:true,modelComparator:B.inlineEdit.htmlComparator,blurHandlerBinder:B.inlineEdit.FCKEditor.blurHandlerBinder,editModeRenderer:B.inlineEdit.FCKEditor.editModeRenderer,FCKEditor:{BasePath:"fckeditor/"}});B.inlineEdit.dropdown=function(D,E){return A("fluid.inlineEdit.dropdown",D,E)};B.inlineEdit.dropdown.editModeRenderer=function(D){var E=B.allocateSimpleId(D.editField);D.editField.selectbox({finishHandler:function(){D.finish()}});return{container:D.editContainer,field:C("input.selectbox",D.editContainer)}};B.inlineEdit.dropdown.blurHandlerBinder=function(D){B.deadMansBlur(D.editField,C("div.selectbox-wrapper li",D.editContainer),function(){D.cancel()})};B.defaults("fluid.inlineEdit.dropdown",{applyEditPadding:false,blurHandlerBinder:B.inlineEdit.dropdown.blurHandlerBinder,editModeRenderer:B.inlineEdit.dropdown.editModeRenderer})})(jQuery,fluid_1_1);function FCKeditor_OnComplete(A){fluid.inlineEdit.FCKEditor.complete.fire(A)}var fluid_1_1=fluid_1_1||{};(function(F,G){G.orientation={HORIZONTAL:4,VERTICAL:1};G.rectSides={4:["left","right"],1:["top","bottom"],8:"top",12:"bottom",2:"left",3:"right"};G.position={BEFORE:-1,AFTER:1,INSIDE:2,REPLACE:3};G.direction={NEXT:1,PREVIOUS:-1,UP:8,DOWN:12,LEFT:2,RIGHT:3};G.directionSign=function(K){return K===G.direction.UP||K===G.direction.LEFT?G.direction.PREVIOUS:G.direction.NEXT};G.directionAxis=function(K){return K===G.direction.LEFT||K===G.direction.RIGHT?0:1};G.directionOrientation=function(K){return G.directionAxis(K)?G.orientation.VERTICAL:G.orientation.HORIZONTAL};G.keycodeDirection={up:G.direction.UP,down:G.direction.DOWN,left:G.direction.LEFT,right:G.direction.RIGHT};G.moveDom=function(M,N,K){M=G.unwrap(M);N=G.unwrap(N);var L;if(K===G.position.INSIDE){N.appendChild(M)}else{if(K===G.position.BEFORE){for(L=N.previousSibling;;L=L.previousSibling){if(!L||!G.dom.isIgnorableNode(L)){if(L!==M){G.dom.cleanseScripts(M);N.parentNode.insertBefore(M,N)}break}}}else{if(K===G.position.AFTER){for(L=N.nextSibling;;L=L.nextSibling){if(!L||!G.dom.isIgnorableNode(L)){if(L!==M){G.dom.cleanseScripts(M);G.dom.insertAfter(M,N)}break}}}else{G.fail("Unrecognised position supplied to fluid.moveDom: "+K)}}}};G.normalisePosition=function(L,N,K,M){if(L===G.position.REPLACE){L=N&&K>=M?G.position.AFTER:G.position.BEFORE}return L};G.permuteDom=function(N,R,Q,L,O){N=G.unwrap(N);R=G.unwrap(R);var P=F.inArray(N,L);if(P===-1){G.fail("Error in permuteDom: source element "+G.dumpEl(N)+" not found in source list "+G.dumpEl(L))}var V=F.inArray(R,O);if(V===-1){G.fail("Error in permuteDom: target element "+G.dumpEl(R)+" not found in source list "+G.dumpEl(O))}var K=L===O;Q=G.normalisePosition(Q,K,V,P);var U={};U[G.position.AFTER]=N.nextSibling;U[G.position.BEFORE]=N.previousSibling;G.moveDom(L[P],O[V],Q);var T=K?V-1:L.length-2;var M;if(Q===G.position.BEFORE&&K){T--}if(!K||V>P){for(M=T;M>P;--M){G.moveDom(L[M+1],L[M],G.position.AFTER)}if(P+1<L.length){G.moveDom(L[P+1],U[G.position.AFTER],G.position.BEFORE)}}var S=K?P-1:O.length-1;if(Q===G.position.AFTER){V++}if(!K||V<P){for(M=V;M<S;++M){G.moveDom(O[M],O[M+1],G.position.BEFORE)}if(S>=0&&S<O.length-1){G.moveDom(O[S],U[G.position.BEFORE],G.position.AFTER)}}};var B=function(K,L){return window.getComputedStyle?window.getComputedStyle(K,null).getPropertyValue(L):K.currentStyle[L]};var H=function(K){while(K&&K.nodeName){if(K.nodeName==="BODY"){return true}K=K.parentNode}return false};var J=function(K){return"hidden"===K.type||B(K,"display")==="none"||B(K,"visibility")==="hidden"||!H(K)};var E=function(M,L,Q){var O={};O.element=M;O.orientation=L;if(Q===G.position.INSIDE){O.position=Q}if(J(M)){O.clazz="hidden"}var P=G.dom.computeAbsolutePosition(M)||[0,0];var N=M.offsetWidth;var K=M.offsetHeight;O.rect={left:P[0],top:P[1]};O.rect.right=P[0]+N;O.rect.bottom=P[1]+K;return O};var C=10000;function D(K){return"Rect top: "+K.top+" left: "+K.left+" bottom: "+K.bottom+" right: "+K.right}function I(K){if(!K||!K.rect){return"null"}else{return D(K.rect)+" position: "+K.position+" for "+G.dumpEl(K.element)}}G.dropManager=function(){var S=[];var L={};var R={};var N;function T(X){return F(X).data("")}function U(X,c,a,b,d,Z){var Y=F.extend(true,{},a);Y.rect[c[b]]=Y.rect[c[1-b]]+(b?1:-1);Y.rect[c[1-b]]=(b?-1:1)*C;Y.position=d===G.position.INSIDE?d:(b?G.position.BEFORE:G.position.AFTER);Y.clazz=Z;X[X.length]=Y}function Q(a,Y,Z,X,c,b){var f=F.extend(true,{},Z);var d=F.extend(true,{},Z);var e=(f.rect[Y[0]]+f.rect[Y[1]])/2;f.rect[Y[1]]=e;f.position=G.position.BEFORE;d.rect[Y[0]]=e;d.position=G.position.AFTER;f.clazz=c;d.clazz=b;a[a.length]=f;a[a.length]=d}function P(Z,Y,a,X,b){Y+=a;if(Y<0&&X==="locked"){return"locked"}if(Y>=Z.length||b===null){return null}else{a=Z[Y];return b(a)==="locked"&&X==="locked"?"locked":null}}var O;var M,K;R.updateGeometry=function(g){O=g;S=[];L={};var X=g.elementMapper;for(var f=0;f<g.extents.length;++f){var b=g.extents[f];var Y=b.orientation;var Z=G.rectSides[Y];var a=function(m,i,p,q,l){var k=E(m,Y,q);k.owner=b;if(k.clazz!=="hidden"&&X){k.clazz=X(m)}L[F.data(m)]=k;var n=P(b.elements,l,G.position.BEFORE,k.clazz,X);var o=P(b.elements,l,G.position.AFTER,k.clazz,X);if(q===G.position.INSIDE){S[S.length]=k}else{Q(S,Z,k,q,n,o)}if(i&&g.sentinelize){U(S,Z,k,1,q,n)}if(p&&g.sentinelize){U(S,Z,k,0,q,o)}return k};var h=true;for(var c=0;c<b.elements.length;++c){var e=b.elements[c];var d=a(e,c===0,c===b.elements.length-1,G.position.INTERLEAVED,c);if(d.clazz!=="hidden"){h=false}}if(h&&b.parentElement){a(b.parentElement,true,true,G.position.INSIDE)}}};R.startDrag=function(c,b,Z,a){var e=b[0]+Z/2;var d=b[1]+a/2;var Y=e-c.pageX;var X=d-c.pageY;R.updateGeometry(O);N=null;M=Y;K=X;F("").bind("mousemove.fluid-dropManager",R.mouseMove)};R.lastPosition=function(){return N};R.endDrag=function(){F("").unbind("mousemove.fluid-dropManager")};R.mouseMove=function(Y){var X=Y.pageX+M;var a=Y.pageY+K;var Z=R.closestTarget(X,a,N);if(Z&&Z!==G.dropManager.NO_CHANGE){N=Z;R.dropChangeFirer.fire(Z)}};R.dropChangeFirer=G.event.getEventFirer();var V={element:null};R.closestTarget=function(g,e,b){var a=Number.MAX_VALUE;var Y=V;var X=Number.MAX_VALUE;var f=V;for(var d=0;d<S.length;++d){var c=S[d];if(c.clazz==="hidden"){continue}var Z=G.geom.minPointRectangle(g,e,c.rect);if(c.clazz==="locked"){if(Z<X){X=Z;f=c}}else{if(Z<a){a=Z;Y=c}if(Z===0){break}}}if(!Y){return Y}if(X>=a){f=V}if(b&&b.position===Y.position&&G.unwrap(b.element)===G.unwrap(Y.element)&&G.unwrap(b.lockedelem)===G.unwrap(f.element)){return G.dropManager.NO_CHANGE}return{position:Y.position,element:Y.element,lockedelem:f.element}};R.shuffleProjectFrom=function(X,a,Z){var Y=R.projectFrom(X,a,Z);Y.position=G.position.REPLACE;return Y};R.projectFrom=function(a,c,b){R.updateGeometry(O);var Z=L[T(a)];var Y=G.geom.projectFrom(Z.rect,c,S,b);if(!Y.cacheelem){return null}var X=Y.cacheelem.position;return{element:Y.cacheelem.element,position:X?X:G.position.BEFORE}};function W(Y,a,Z){var b=G.directionSign(a);var X=F(Z).index(Y)+b;if(X<0){X+=Z.length}X%=Z.length;return Z[X]}R.logicalFrom=function(Y,a,Z){var X=R.getOwningSpan(Y,G.position.INTERLEAVED,Z);return{element:W(Y,a,X),position:G.position.REPLACE}};R.lockedWrapFrom=function(Z,d,c){var b=R.logicalFrom(Z,d,c);var X=R.getOwningSpan(Z,G.position.INTERLEAVED,c);var a=L[T(Z)].owner.elements;if(c||X[0]===a[0]){return b}var Y=W(Z,d,a);if(O.elementMapper(Y)==="locked"){b.element=null;b.clazz="locked"}return b};R.getOwningSpan=function(Z,Y,b){var X=L[T(Z)].owner;var a=Y===G.position.INSIDE?[X.parentElement]:X.elements;if(!b&&O.elementMapper){a=F.makeArray(a);G.remove_if(a,function(c){return O.elementMapper(c)==="locked"})}return a};R.geometricMove=function(a,b,X){var Y=R.getOwningSpan(a,null,true);var Z=R.getOwningSpan(b,X,true);G.permuteDom(a,b,X,Y,Z)};return R};G.dropManager.NO_CHANGE="no change";G.geom=G.geom||{};G.geom.minPointRectangle=function(K,O,N){var M=K<N.left?(N.left-K):(K>N.right?(K-N.right):0);var L=O<N.top?(N.top-O):(O>N.bottom?(O-N.bottom):0);return M*M+L*L};G.geom.minRectRect=function(N,L){var M=N.right<L.left?L.left-N.right:L.right<N.left?N.left-L.right:0;var K=N.bottom<L.top?L.top-N.bottom:L.bottom<N.top?N.top-L.bottom:0;return M*M+K*K};var A=function(){return{mindist:Number.MAX_VALUE,minrdist:Number.MAX_VALUE}};G.geom.projectFrom=function(O,a,b,U){var M=G.directionAxis(a);var X=G.rectSides[a];var V=G.rectSides[M*15+5-a];var R=G.directionSign(a);var K={left:(7*O.left+1*O.right)/8,right:(5*O.left+3*O.right)/8,top:(7*O.top+1*O.bottom)/8,bottom:(5*O.top+3*O.bottom)/8};K[X]=R*C;K[V]=-K[X];function c(g,e,h){var f=e.rect;var i=G.geom.minRectRect(K,f);var d=-R*h*(O[h===1?X:V]-f[h===1?V:X]);if(i<=g.mindist&&d>=0){if(i===g.mindist&&d*h>g.minrdist){return }g.minrdist=d*h;g.mindist=i;g.minelem=e}}var S=A();var W=A();var N=A();for(var Y=0;Y<b.length;++Y){var Z=b[Y];var L=Z.owner&&Z.element===Z.owner.parentElement;if(Z.clazz==="hidden"||U&&L){continue}else{if(!U&&Z.clazz==="locked"){c(N,Z,1)}else{c(S,Z,1);c(W,Z,-1)}}}var Q=!S.minelem||W.mindist<S.mindist;var T=Q?W:S;var P={wrapped:Q,cacheelem:T.minelem};if(N.mindist<T.mindist){P.lockedelem=N.minelem}return P}})(jQuery,fluid_1_1);
fluid_1_1=fluid_1_1||{};(function(C,D){var B=function(O,L,M){var N=C(O).clone();D.dom.iterateDom(N.get(0),function(P){if(P.tagName.toLowerCase()==="script"){return"delete"}P.removeAttribute("id");if(P.tagName.toLowerCase()==="input"){P.setAttribute("disabled","disabled")}});N.removeAttr("id");N.removeClass("ui-droppable");N.addClass(L);if(M){var K=C(document.createElement("div"));K.append(N);K.append(M);N=K}C("body").append(N);if(!C.browser.safari){N.css("display","block").width(O.offsetWidth).height(O.offsetHeight)}if(C.browser.opera){N.hide()}return N};function F(L){var K=L.dom.fastLocate("selectables");if(K.length<=0){return null}return K[0]}function G(L,N,O,K){var M=N;var P=false;if(C.browser.opera){L.keypress(function(Q){if(P){P=false;Q.preventDefault();return false}});M=function(R){var Q=N(R);if(Q===false){P=true}}}L.keydown(M);L.keyup(O)}function J(K){var L=K.dom.fastLocate("selectables")[0];K.container.attr("role",K.options.containerRole.container);K.container.attr("aria-multiselectable","false");K.container.attr("aria-readonly","false");K.container.attr("aria-disabled","false")}function A(K){return K+"_avatar"}var I=function(K){if(K.keysets&&!(K.keysets instanceof Array)){K.keysets=[K.keysets]}};D.reorderer=function(Z,M){if(!Z){D.fail("Reorderer initialised with no container")}var a=D.initView("fluid.reorderer",Z,M);M=a.options;var T=D.dropManager();a.layoutHandler=D.initSubcomponent(a,"layoutHandler",[a.container,M,T,a.dom]);a.activeItem=undefined;I(M);var K=a.locate("dropWarning");var X;if(K){X=K.clone()}var c=function(f){var h=M.keysets;for(var g=0;g<h.length;g++){if(h[g].modifier(f)){return true}}return false};var L=function(){return C.inArray(a.activeItem,a.dom.fastLocate("movables"))>=0};var N=function(f){a.dom.fastLocate("dropTargets").attr("aria-dropeffect",f)};var U=M.styles;var V=function(f){return(!f.ctrlKey&&!f.altKey&&!f.shiftKey&&!f.metaKey)};var d=function(n){var p=a.activeItem;if(!p){return true}var f=M.keysets;for(var j=0;j<f.length;j++){var h=f[j];var q=false;var m=D.keyForValue(h,n.keyCode);if(!m){continue}var o=h.modifier(n);var g=D.keycodeDirection[m];var k=a.layoutHandler.getRelativePosition(p,g,!o);if(!k){continue}if(o){var l=a.events.onBeginMove.fire(p);if(l===false){return false}if(K.length>0){if(k.clazz==="locked"){a.events.onShowKeyboardDropWarning.fire(p,K);K.show()}else{K.hide()}}if(k.element){a.requestMovement(k,p)}}else{if(V(n)){C(k.element).focus()}}return false}return true};a.handleKeyDown=function(f){if(!a.activeItem||a.activeItem!==f.target){return true}var g=C(a.activeItem);if(!g.hasClass(U.dragging)&&c(f)){if(L()){g.removeClass(U.selected);g.addClass(U.dragging);g.attr("aria-grabbed","true");N("move")}return false}return d(f)};a.handleKeyUp=function(f){if(!a.activeItem||a.activeItem!==f.target){return true}var g=C(a.activeItem);if(g.hasClass(U.dragging)&&!c(f)){if(K){K.hide()}g.removeClass(U.dragging);g.addClass(U.selected);g.attr("aria-grabbed","false");N("none");return false}return false};var O;var P=function(g){var f=C(document.createElement(g));f.addClass(M.styles.dropMarker);f.hide();return f};D.logEnabled=true;a.requestMovement=function(g,f){if(!g||D.unwrap(g.element)===D.unwrap(f)){return }a.events.onMove.fire(f,g);T.geometricMove(f,g.element,g.position);C(a.activeItem).focus();a.refresh();T.updateGeometry(a.layoutHandler.getGeometricInfo());a.events.afterMove.fire(f,g,a.dom.fastLocate("movables"))};var Y=function(f,g){a.dom.fastLocate("grabHandle",f)[g?"addClass":"removeClass"](U.hover)};function S(h){var g=M.styles;h.attr("aria-grabbed","false");h.mouseover(function(){a.events.onHover.fire(h,true)});h.mouseout(function(){a.events.onHover.fire(h,false)});var f;a.dom.fastLocate("grabHandle",h).draggable({refreshPositions:false,scroll:true,helper:function(){var i;if(X){i=X[0]}f=C(M.avatarCreator(h[0],g.avatar,i));f.attr("id",A(a.container.id));return f},start:function(o,n){var j=a.events.onBeginMove.fire(h);if(j===false){return false}var m=a.dom.fastLocate("grabHandle",h)[0];var l=D.dom.computeAbsolutePosition(m);var i=m.offsetWidth;var k=m.offsetHeight;h.focus();h.removeClass(M.styles.selected);h.addClass(M.styles.mouseDrag);h.attr("aria-grabbed","true");N("move");T.startDrag(o,l,i,k);f.show()},stop:function(k,j){h.removeClass(M.styles.mouseDrag);h.addClass(M.styles.selected);C(a.activeItem).attr("aria-grabbed","false");var i=D.unwrap(O);if(i.parentNode){i.parentNode.removeChild(i)}f.hide();j.helper=null;N("none");T.endDrag();a.requestMovement(T.lastPosition(),h);a.activeItem.focus()},handle:a.dom.fastLocate("grabHandle",h)})}function e(f,g){f.removeClass(g.selected);f.removeClass(g.dragging);f.addClass(g.defaultStyle);f.attr("aria-selected","false")}var R=function(h){a.events.onSelect.fire(h);var g=M.styles;if(a.activeItem&&a.activeItem!==h){e(C(a.activeItem),g)}a.activeItem=h;var f=C(h);f.removeClass(g.defaultStyle);f.addClass(g.selected);f.attr("aria-selected","true")};var b=function(){var j=function(i){e(C(this),M.styles);return i.stopPropagation()};var k=function(i){R(this);return i.stopPropagation()};var f=a.dom.fastLocate("selectables");for(var h=0;h<f.length;++h){var g=C(f[h]);if(!C.data(g[0],"fluid.reorderer.selectable-initialised")){g.addClass(U.defaultStyle);f.blur(j);f.focus(k);f.click(function(i){var l=D.unwrap(a.dom.fastLocate("grabHandle",this));if(D.dom.isContainer(l,i.target)){C(this).focus()}});f.attr("role",M.containerRole.item);f.attr("aria-selected","false");f.attr("aria-disabled","false");C.data(g[0],"fluid.reorderer.selectable-initialised",true)}}if(!a.selectableContext){a.selectableContext=D.selectable(a.container,{selectableElements:f,selectablesTabindex:a.options.selectablesTabindex,direction:null})}};var W=function(f){D.moveDom(O,f.element,f.position);O.css("display","");if(X){if(f.lockedelem){X.show()}else{X.hide()}}};var Q=function(){var j=a.dom.fastLocate("movables");var h=a.dom.fastLocate("dropTargets");b();for(var f=0;f<j.length;f++){var g=j[f];if(!C.data(g,"fluid.reorderer.movable-initialised")){S(C(g));C.data(g,"fluid.reorderer.movable-initialised",true)}}if(j.length>0&&!O){O=P(j[0].tagName)}T.updateGeometry(a.layoutHandler.getGeometricInfo());T.dropChangeFirer.addListener(W,"fluid.Reorderer");h.attr("aria-dropeffect","none")};if(a.container){G(a.container,a.handleKeyDown,a.handleKeyUp);J(a);D.tabbable(a.container);Q()}if(M.afterMoveCallbackUrl){a.events.afterMove.addListener(function(){var f=a.layoutHandler;var g=f.getModel?f.getModel():M.acquireModel(a);C.post(M.afterMoveCallbackUrl,JSON.stringify(g))},"postModel")}a.events.onHover.addListener(Y,"style");a.refresh=function(){a.dom.refresh("movables");a.dom.refresh("selectables");a.dom.refresh("grabHandle",a.dom.fastLocate("movables"));a.dom.refresh("stylisticOffset",a.dom.fastLocate("movables"));a.dom.refresh("dropTargets");a.events.onRefresh.fire();Q();a.selectableContext.selectables=a.dom.fastLocate("selectables");a.selectableContext.selectablesUpdated(a.activeItem)};a.refresh();return a};D.reorderer.keys={TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:19,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,i:73,j:74,k:75,m:77};D.reorderer.defaultKeysets=[{modifier:function(K){return K.ctrlKey},up:D.reorderer.keys.UP,down:D.reorderer.keys.DOWN,right:D.reorderer.keys.RIGHT,left:D.reorderer.keys.LEFT},{modifier:function(K){return K.ctrlKey},up:D.reorderer.keys.i,down:D.reorderer.keys.m,right:D.reorderer.keys.k,left:D.reorderer.keys.j}];D.reorderer.roles={GRID:{container:"grid",item:"gridcell"},LIST:{container:"list",item:"listitem"},REGIONS:{container:"main",item:"article"}};var E=function(K,L,M){M=M||{};M.layoutHandler=L;return D.reorderer(K,M)};D.reorderList=function(K,L){return E(K,"fluid.listLayoutHandler",L)};D.reorderGrid=function(K,L){return E(K,"fluid.gridLayoutHandler",L)};D.reorderer.SHUFFLE_GEOMETRIC_STRATEGY="shuffleProjectFrom";D.reorderer.GEOMETRIC_STRATEGY="projectFrom";D.reorderer.LOGICAL_STRATEGY="logicalFrom";D.reorderer.WRAP_LOCKED_STRATEGY="lockedWrapFrom";D.reorderer.NO_STRATEGY=null;D.reorderer.relativeInfoGetter=function(L,N,M,K,O){return function(Q,S,P){var R=D.directionOrientation(S);var T=R===L?N:M;return T!==null?K[T](Q,S,P):null}};D.defaults("fluid.reorderer",{styles:{defaultStyle:"fl-reorderer-movable-default",selected:"fl-reorderer-movable-selected",dragging:"fl-reorderer-movable-dragging",mouseDrag:"fl-reorderer-movable-dragging",hover:"fl-reorderer-movable-hover",dropMarker:"fl-reorderer-dropMarker",avatar:"fl-reorderer-avatar"},selectors:{dropWarning:".flc-reorderer-dropWarning",movables:".flc-reorderer-movable",grabHandle:"",stylisticOffset:""},avatarCreator:B,keysets:D.reorderer.defaultKeysets,layoutHandler:{type:"fluid.listLayoutHandler"},events:{onShowKeyboardDropWarning:null,onSelect:null,onBeginMove:"preventable",onMove:null,afterMove:null,onHover:null,onRefresh:null},mergePolicy:{keysets:"replace","selectors.selectables":"selectors.movables","selectors.dropTargets":"selectors.movables"}});function H(K,M,L){return function(){return{sentinelize:M,extents:[{orientation:K,elements:L.fastLocate("dropTargets")}],elementMapper:function(N){return C.inArray(N,L.fastLocate("movables"))===-1?"locked":null}}}}D.defaults(true,"fluid.listLayoutHandler",{orientation:D.orientation.VERTICAL,containerRole:D.reorderer.roles.LIST,selectablesTabindex:-1,sentinelize:true});D.listLayoutHandler=function(L,M,K,O){var N={};N.getRelativePosition=D.reorderer.relativeInfoGetter(M.orientation,D.reorderer.LOGICAL_STRATEGY,null,K,O);N.getGeometricInfo=H(M.orientation,M.sentinelize,O);return N};D.defaults(true,"fluid.gridLayoutHandler",{orientation:D.orientation.HORIZONTAL,containerRole:D.reorderer.roles.GRID,selectablesTabindex:-1,sentinelize:false});D.gridLayoutHandler=function(L,M,K,O){var N={};N.getRelativePosition=D.reorderer.relativeInfoGetter(M.orientation,D.reorderer.LOGICAL_STRATEGY,D.reorderer.SHUFFLE_GEOMETRIC_STRATEGY,K,O);N.getGeometricInfo=H(M.orientation,M.sentinelize,O);return N}})(jQuery,fluid_1_1);fluid_1_1=fluid_1_1||{};(function(D,F){var K=function(L,M){return L+"lightbox-cell:"+M+":"
};var J=function(L){var M=function(N){if(N.which===F.reorderer.keys.ENTER){var O=D("a",N.target);document.location=O.attr("href")}};L.keypress(M)};var B=function(P,R,N){var L=P.getElementsByTagName(R);var Q=[];for(var O=0;O<L.length;O+=1){var M=L[O];var S=M.id;if(S&&S.match(N)){Q.push(M)}}return Q};var H=function(L,M){L=F.unwrap(L);var N="^"+K(M,"[0-9]+")+"$";return function(){return B(L,"div",N)}};var A=function(L){return F.findAncestor(L,function(M){return D(M).is("form")})};var E=function(L,M){return B(M,"input","^"+K(L.attr("id"),"[^:]*")+"reorder-index$")};var C=function(M,Q){var L=E(M,Q);for(var P=0;P<L.length;P++){var N=L[P];var O=N.name;N.name=O||N.id}};var I=function(L){var M=A(L);C(L,M);return function(){var O,P;O=E(L,M);for(P=0;P<O.length;P+=1){O[P].value=P}if(M&&M.action){var N=D(M).serialize();D.post(M.action,N,function(R,S,Q){})}}};var G=function(P,O,N){var M=F.model.getBeanValue(P,O);var L=M||N;F.model.setBeanValue(P,O,L)};F.reorderImages=function(L,N){var O=F.initView("fluid.reorderImages",L,N);G(O,"options.listeners.afterMove",O.options.afterMoveCallback||I(O.container));G(O,"options.selectors.movables",H(O.container,O.container.attr("id")));var M=F.reorderer(O.container,O.options);F.transform(M.locate("movables"),function(P){F.reorderImages.addAriaRoles(O.options.selectors.imageTitle,P)});F.tabindex(D("a",O.container),-1);J(O.container);return M};F.reorderImages.addAriaRoles=function(M,L){L=D(L);L.attr("role","img");var P=D(M,L);if(P[0]===L[0]||P[0]===document){F.fail("Could not locate cell title using selector "+M+" in context "+F.dumpEl(L))}var N=F.allocateSimpleId(P);L.attr("aria-labelledby",N);var O=D("img",L);O.attr("role","presentation");O.attr("alt","")};F.lightbox=F.reorderImages;F.defaults("fluid.reorderImages",{layoutHandler:"fluid.gridLayoutHandler",selectors:{imageTitle:".flc-reorderer-imageTitle"}})})(jQuery,fluid_1_1);fluid_1_1=fluid_1_1||{};(function(C,B){B.moduleLayout=B.moduleLayout||{};var E=function(G,F){return B.find(F.columns,function(J,I){var H=C.inArray(G,J.elements);return H===-1?null:{columnIndex:I,itemIndex:H}},{columnIndex:-1,itemIndex:-1})};var A=function(G,F){return B.find(F.columns,function(I,H){return G===I.container?H:null},-1)};B.moduleLayout.updateLayout=function(I,K,G,H){I=B.unwrap(I);K=B.unwrap(K);var F=E(I,H);H.columns[F.columnIndex].elements.splice(F.itemIndex,1);var M;if(G===B.position.INSIDE){M=H.columns[A(K,H)].elements;M.splice(M.length,0,I)}else{var L=E(K,H);M=H.columns[L.columnIndex].elements;G=B.normalisePosition(G,F.columnIndex===L.columnIndex,L.itemIndex,F.itemIndex);var J=G===B.position.BEFORE?0:1;M.splice(L.itemIndex+J,0,I)}};B.moduleLayout.layoutFromFlat=function(F,H,G){var I={};I.container=F;I.columns=B.transform(H,function(J){return{container:J,elements:C.makeArray(G.filter(function(){return B.dom.isContainer(J,this)}))}});return I};B.moduleLayout.layoutFromIds=function(F){return{container:B.byId(F.id),columns:B.transform(F.columns,function(G){return{container:B.byId(G.id),elements:B.transform(G.children,B.byId)}})}};B.moduleLayout.layoutToIds=function(F){return{id:B.getId(F.container),columns:B.transform(F.columns,function(G){return{id:B.getId(G.container),children:B.transform(G.elements,B.getId)}})}};var D=function(G,F){if(F){var H=C(G).offset();F=C(F);F.css("position","absolute");F.css("top",H.top);F.css("left",H.left)}};B.defaults(true,"fluid.moduleLayoutHandler",{orientation:B.orientation.VERTICAL,containerRole:B.reorderer.roles.REGIONS,selectablesTabindex:0,sentinelize:true});B.moduleLayoutHandler=function(G,N,J,H){var K={};function M(){var P;if(N.selectors.modules){P=B.moduleLayout.layoutFromFlat(G,H.locate("columns"),H.locate("modules"))}if(!P){var O=B.model.getBeanValue(N,"moduleLayout.layout");B.moduleLayout.layoutFromIds(O)}return P}var I=M();K.layout=I;function F(O){var P=N.selectors.lockedModules?H.fastLocate("lockedModules"):[];return C.inArray(O,P)!==-1}K.getRelativePosition=B.reorderer.relativeInfoGetter(N.orientation,B.reorderer.WRAP_LOCKED_STRATEGY,B.reorderer.GEOMETRIC_STRATEGY,J,H);K.getGeometricInfo=function(){var S=[];var R={extents:S,sentinelize:N.sentinelize};R.elementMapper=function(T){return F(T)?"locked":null};for(var O=0;O<I.columns.length;O++){var Q=I.columns[O];var P={orientation:N.orientation,elements:C.makeArray(Q.elements),parentElement:Q.container};S.push(P)}return R};function L(O){return function(){var P=B.accumulate(I.columns,function(Q,R){return R.concat(Q.elements)},[]);if(!O){B.remove_if(P,F)}return P}}K.returnedOptions={selectors:{movables:L(false),dropTargets:L(false),selectables:L(true)},listeners:{onMove:function(O,P){B.moduleLayout.updateLayout(O,P.element,P.position,I)},onRefresh:function(){I=M();K.layout=I},"onShowKeyboardDropWarning.setPosition":D}};K.getModel=function(){return B.moduleLayout.layoutToIds(I)};return K}})(jQuery,fluid_1_1);fluid_1_1=fluid_1_1||{};(function(B,A){A.reorderLayout=function(C,F){var E={layoutHandler:"fluid.moduleLayoutHandler",selectors:{columns:".flc-reorderer-column",modules:".flc-reorderer-module"}};var D=B.extend(true,E,F);return A.reorderer(C,D)}})(jQuery,fluid_1_1);fluid_1_1=fluid_1_1||{};(function(D,H){function S(Y,Z,b){if(!Y.pageLinks){return }if(b.pageIndex!==undefined){var a=Y.pageLinks.eq(b.pageIndex);a.removeClass(Y.options.styles.currentPage)}var X=Y.pageLinks.eq(Z.pageIndex);X.addClass(Y.options.styles.currentPage)}function J(Y,X,Z){Y.unbind("click.fluid.pager");Y.bind("click.fluid.pager",function(){X.initiatePageChange.fire(Z)})}function B(X){X.pageCount=Math.max(1,Math.floor((X.totalRange-1)/X.pageSize)+1)}function L(X){return Math.min(X.totalRange,(X.pageIndex+1)*X.pageSize)}H.pager=function(){return H.pagerImpl.apply(null,arguments)};H.pager.directPageList=function(X,b,Z){var c=H.initView("fluid.pager.directPageList",X,Z);c.pageLinks=c.locate("pageLinks");for(var a=0;a<c.pageLinks.length;++a){var Y=c.pageLinks.eq(a);J(Y,b,{pageIndex:a})}b.onModelChange.addListener(function(d,e){S(c,d,e)});c.defaultModel={pageIndex:undefined,pageSize:1,totalRange:c.pageLinks.length};return c};H.iota=function(Z,a){a=a||0;var Y=[];for(var X=0;X<Z;++X){Y[Y.length]=a++}return Y};H.pager.everyPageStrategy=H.iota;H.pager.gappedPageStrategy=function(X,Y){if(!X){X=3}if(!Y){Y=X}return function(e,f,a){var d=[];var Z=0;var c=false;for(var b=0;b<e;++b){if(b<X||(e-b-1)<X||(b>=a-Y&&b<=a+Y)){d[Z++]=b;c=false}else{if(!c){d[Z++]=-1;c=true}}}return d}};H.pager.renderedPageList=function(X,f,Z,g,e){g=D.extend(true,Z,g);var b=H.initView("fluid.pager.renderedPageList",X,g);g=b.options;var Y={cutpoints:[{id:"page-link:link",selector:Z.selectors.pageLinks},{id:"page-link:skip",selector:Z.selectors.pageLinkSkip},{id:"page-link:disabled",selector:Z.selectors.pageLinkDisabled}]};if(g.linkBody){Y.cutpoints[Y.cutpoints.length]={id:"payload-component",selector:g.linkBody}}function a(h){return function(i){return i===-1?{ID:"page-link:skip"}:{ID:i===h?"page-link:link":"page-link:link",localID:i+1,value:i+1,pageIndex:i,decorators:[{type:"jQuery",func:"click",args:function(){f.initiatePageChange.fire({pageIndex:i})}},{type:i===h?"addClass":"",classes:b.options.styles.currentPage}]}}}var c=b.locate("root");H.expectFilledSelector(c,"Error finding root template for fluid.pager.renderedPageList");var d=H.selfRender(c,{},Y);f.onModelChange.addListener(function(i,k){var h=b.options.pageStrategy(i.pageCount,0,i.pageIndex);var j=H.transform(h,a(i.pageIndex));j[j.length-1].value=j[j.length-1].value+e.last;f.onRenderPageLinks.fire(j,i);H.reRender(d,c,j,Y);S(b,i,k)});return b};H.defaults("fluid.pager.renderedPageList",{selectors:{root:".flc-pager-links"},linkBody:"a",pageStrategy:H.pager.everyPageStrategy});var K=function(Z,X,Y){if(Y.pageIndex===0){Z.previous.addClass(X.styles.disabled)}else{Z.previous.removeClass(X.styles.disabled)}if(Y.pageIndex===Y.pageCount-1){Z.next.addClass(X.styles.disabled)}else{Z.next.removeClass(X.styles.disabled)}};H.pager.previousNext=function(X,Z,Y){var a=H.initView("fluid.pager.previousNext",X,Y);a.previous=a.locate("previous");J(a.previous,Z,{relativePage:-1});a.next=a.locate("next");J(a.next,Z,{relativePage:+1});Z.onModelChange.addListener(function(b,d,c){K(a,Y,b)});return a};H.pager.pagerBar=function(a,Y,Z,X){var b=H.initView("fluid.pager.pagerBar",Y,Z);b.pageList=H.initSubcomponent(b,"pageList",[Y,a,b.options,H.COMPONENT_OPTIONS,X]);b.previousNext=H.initSubcomponent(b,"previousNext",[Y,a,b.options,H.COMPONENT_OPTIONS,X]);return b};H.defaults("fluid.pager.pagerBar",{previousNext:{type:"fluid.pager.previousNext"},pageList:{type:"fluid.pager.directPageList"},selectors:{pageLinks:".flc-pager-pageLink",pageLinkSkip:".flc-pager-pageLink-skip",pageLinkDisabled:".flc-pager-pageLink-disabled",previous:".flc-pager-previous",next:".flc-pager-next"},styles:{currentPage:"fl-pager-currentPage",disabled:"fl-pager-disabled"}});function A(X){return X.options.columnDefs}H.pager.findColumnDef=function(Z,Y){var X=D.grep(Z,function(a){return a.key===Y})[0];return X};function R(a,Z,X){var Y=(Z.options.dataOffset?Z.options.dataOffset+".":"");a.shortRoot=X;a.longRoot=Y+a.shortRoot}function E(Y,Z,X){if(Y.charAt(0)==="*"){return X+Y.substring(1)}else{return Y.replace("*",Z)}}H.pager.fetchValue=function(a,Z,Y,c,X){R(X,a,Y);var b=E(c,X.shortRoot,X.longRoot);return H.model.getBeanValue(Z,b)};H.pager.basicSorter=function(g,Z){var d=g.options.dataModel;var f={};var a=A(g);var b=H.pager.findColumnDef(a,Z.sortKey);var X=[];for(var Y=0;Y<Z.totalRange;++Y){X[Y]={index:Y,value:H.pager.fetchValue(g,d,Y,b.valuebinding,f)}}var e=typeof X[0].value;function c(k,j){var i=k.value;var h=j.value;return i===h?0:(i>h?Z.sortDir:-Z.sortDir)}X.sort(c);return H.transform(X,function(h){return h.index})};H.pager.directModelFilter=function(a,Z,c){var d=[];var X=L(Z);for(var b=Z.pageIndex*Z.pageSize;b<X;++b){var Y=c?c[b]:b;d[d.length]={index:Y,row:a[Y]}}return d};function C(d,c){var b="";var Y=0;while(true){var Z=d.indexOf("${",Y);if(Z===-1){b+=d.substring(Y);break}else{b+=d.substring(Y,Z);var X=d.indexOf("}",Z+2);var a=d.substring(Z+2,X);
if(a==="VALUE"){a=c.EL}else{a=E(a,c.shortRoot,c.longRoot)}var e=H.model.getBeanValue(c.dataModel,a);b+=e;Y=X+1}}return b}function U(a,X,Z){for(var Y in X){var b=X[Y];if(b===H.VALUE){if(Y==="valuebinding"){a[Y]=Z.EL}else{a[Y]={valuebinding:Z.EL}}}else{if(Y==="valuebinding"){a[Y]=E(X[Y],Z)}else{if(typeof (b)==="object"){a[Y]=b.length!==undefined?[]:{};U(a[Y],b,Z)}else{if(typeof (b)==="string"){a[Y]=C(b,Z)}else{a[Y]=X[Y]}}}}}return a}function P(Z,d){var a=d.options;var c=Z.valuebinding;var b=Z.key;if(!c){H.fail("Error in definition for column with key "+b+": valuebinding is not set")}d.EL=E(c,d.shortRoot,d.longRoot);if(!b){var Y=H.model.parseEL(c);b=Y[Y.length-1]}var X=(a.keyPrefix?a.keyPrefix:"")+b;return X}function M(Y,Z){var X=H.transform(Z.columnDefs,function(b){var a=P(b,Z);var c;if(!b.components){return{ID:a,valuebinding:Z.EL}}else{if(typeof b.components==="function"){c=b.components(Y.row,Y.index)}else{c=b.components}}c=U({},c,Z);c.ID=a;return c});return X}function W(X){return H.model.getBeanValue(X.options.dataModel,X.options.dataOffset)}function Q(X,Z){var c=Z.options.renderOptions.idMap["header:"+X];var a=H.jById(c);if(a.length===0){return null}var b=Z.overallOptions.selectors.headerSortStylisticOffset;var Y=H.findAncestor(a,function(d){return D(d).is(b)});return Y}function N(Z,Y,X){Y=D(Y);Y.removeClass(Z.ascendingHeader);Y.removeClass(Z.descendingHeader);if(X!==0){Y.addClass(X===1?Z.ascendingHeader:Z.descendingHeader)}}function T(Z,Y){var X=Y.sortKey?H.pager.findColumnDef(Z,Y.sortKey):null;return X?X.sortable:false}function V(Y,a){var Z=a.overallOptions.styles;var X=T(a.columnDefs,Y)?Y.sortDir:0;N(Z,Q(Y.sortKey,a),X)}function O(a,Z,Y){B(Z);if(Z.pageIndex>=Z.pageCount){Z.pageIndex=Z.pageCount-1}if(Y||Z.pageIndex!==a.model.pageIndex||Z.pageSize!==a.model.pageSize||Z.sortKey!==a.model.sortKey||Z.sortDir!==a.model.sortDir){var X=T(A(a),Z)?a.options.sorter(a,Z):null;a.permutation=X;a.events.onModelChange.fire(Z,a.model,a);H.model.copyModel(a.model,Z)}}function G(Z,X,Y){return function(){if(X.sortable===true){var a=Z.model;var c=H.copy(a);var d=Z.options.styles;var e=a.sortKey;if(X.key!==a.sortKey){c.sortKey=X.key;c.sortDir=1;var b=Q(e,Y);if(b){N(d,b,0)}}else{if(c.sortKey===X.key){c.sortDir=-1*c.sortDir}else{return false}}c.pageIndex=0;O(Z,c,true);V(c,Y)}return false}}function F(Y,X){return Y[X.sortable?"sortableHeader":"unsortableHeader"]}function I(Z,X,a,Y){return{children:H.transform(a,function(b){return{ID:P(b,Y),value:b.label,decorators:[{jQuery:["click",G(Z,b,Y)]},{identify:"header:"+b.key}].concat(F(Y.overallOptions.decorators,b))}})}}H.pager.selfRender=function(f,Y){var a=H.initView("fluid.pager.selfRender",f.container,Y);var g=a.options;g.renderOptions.idMap=g.renderOptions.idMap||{};var e=g.renderOptions.idMap;var b=a.locate("root");var d=H.selfRender(b,{},g.renderOptions);b.addClass(g.styles.root);var Z=A(f);var X={options:g,columnDefs:Z,overallOptions:f.options,dataModel:f.options.dataModel,idMap:e};var c=W(f);return{returnedOptions:{listeners:{onModelChange:function(j,l){var i=f.options.modelFilter(c,j,f.permutation);var h=H.transform(i,function(m){var n=R(X,f,m.index);if(Z==="explode"){return H.explode(m.row,b)}else{if(Z.length){return M(m,X)}}});var k={};k[g.row]=h;if(typeof (Z)==="object"){k[g.header]=I(f,j,Z,X)}g.renderOptions=g.renderOptions||{};g.renderOptions.model=X.dataModel;H.reRender(d,b,k,g.renderOptions);V(j,X)}}}}};H.defaults("fluid.pager.selfRender",{selectors:{root:".flc-pager-body-template"},styles:{root:"fl-pager"},keyStrategy:"id",keyPrefix:"",row:"row:",header:"header:",renderOptions:{}});H.pager.summary=function(Z,X){var Y=Z.locate("summary");return{returnedOptions:{listeners:{onModelChange:function(a,c){var b=H.stringTemplate(X.message,{first:a.pageIndex*a.pageSize+1,last:L(a),total:a.totalRange});if(Y.length>0){Y.text(b)}}}}}};H.pager.directPageSize=function(Y){var X=Y.locate("pageSize");if(X.length>0){Y.events.onModelChange.addListener(function(Z,a){if(X.val()!==Z.pageSize){X.val(Z.pageSize)}});X.change(function(){Y.events.initiatePageSizeChange.fire(X.val())})}return Y};H.pager.rangeAnnotator=function(Z,Y){var X={};Z.events.onRenderPageLinks.addListener(function(a,d){var f=Z.options.annotateColumnRange;var c=Z.options.dataModel;var h=A(Z);if(!f||!c||!h){return }var b=H.pager.findColumnDef(h,f);function g(i){i=Z.permutation?Z.permutation[i]:i;return H.pager.fetchValue(Z,c,i,b.valuebinding,X)}var e={};H.model.copyModel(e,d);H.transform(a,function(i){if(i.ID==="page-link:link"){var m=i.pageIndex;var p=m*e.pageSize;e.pageIndex=m;var j=L(e);var o=g(p);var l=g(j-1);var n="<b>"+o+"</b><br/>&mdash;<br/><b>"+l+"</b>";var k={type:"jQuery",func:"tooltip",args:{delay:Z.options.tooltipDelay,extraClass:Z.options.styles.tooltip,bodyHandler:function(){return n},showURL:false,id:Z.options.tooltipId}};i.decorators.push(k)}})})};H.pagerImpl=function(X,Y){var a=H.initView("fluid.pager",X,Y);var c=function(e,f){if(f.value<0){f.value=0}};a.events.initiatePageChange.addListener(function(e){var f=H.copy(a.model);if(e.relativePage!==undefined){f.pageIndex=a.model.pageIndex+e.relativePage}else{f.pageIndex=e.pageIndex}if(f.pageIndex===undefined||f.pageIndex<0){f.pageIndex=0}O(a,f,e.forceUpdate)});a.events.initiatePageSizeChange.addListener(function(e){var f=H.copy(a.model);f.pageSize=e;O(a,f)});var b=a.locate("pagerBar");if(b.length>0){a.pagerBar=H.initSubcomponent(a,"pagerBar",[a.events,b,H.COMPONENT_OPTIONS,a.options.strings])}var d=a.locate("pagerBarSecondary");if(d.length>0){a.pagerBarSecondary=H.initSubcomponent(a,"pagerBar",[a.events,d,H.COMPONENT_OPTIONS,a.options.strings])}a.bodyRenderer=H.initSubcomponent(a,"bodyRenderer",[a,H.COMPONENT_OPTIONS]);a.summary=H.initSubcomponent(a,"summary",[a.dom,H.COMPONENT_OPTIONS]);a.pageSize=H.initSubcomponent(a,"pageSize",[a]);a.rangeAnnotator=H.initSubcomponent(a,"rangeAnnotator",[a,H.COMPONENT_OPTIONS]);a.model=H.copy(a.options.model);var Z=W(a);if(Z){a.model.totalRange=Z.length}if(a.model.totalRange===undefined){if(!a.pagerBar){H.fail("Error in Pager configuration - cannot determine total range,  since not configured in model.totalRange and no PagerBar is configured")}a.model=a.pagerBar.pageList.defaultModel}a.applier=H.makeChangeApplier(a.model);a.events.initiatePageChange.fire({pageIndex:a.model.pageIndex?a.model.pageIndex:0,forceUpdate:true});return a};H.defaults("fluid.pager",{pagerBar:{type:"fluid.pager.pagerBar",options:null},summary:{type:"fluid.pager.summary",options:{message:"%first-%last of %total items"}},pageSize:{type:"fluid.pager.directPageSize"},modelFilter:H.pager.directModelFilter,sorter:H.pager.basicSorter,bodyRenderer:{type:"fluid.emptySubcomponent"},model:{pageIndex:undefined,pageSize:10,totalRange:undefined},dataModel:undefined,dataOffset:"",columnDefs:"explode",annotateColumnRange:undefined,tooltipDelay:300,tooltipId:"tooltip",rangeAnnotator:{type:"fluid.pager.rangeAnnotator"},selectors:{pagerBar:".flc-pager-top",pagerBarSecondary:".flc-pager-bottom",summary:".flc-pager-summary",pageSize:".flc-pager-page-size",headerSortStylisticOffset:".flc-pager-sort-header"},styles:{tooltip:"fl-pager-tooltip",ascendingHeader:"fl-pager-asc",descendingHeader:"fl-pager-desc"},decorators:{sortableHeader:[],unsortableHeader:[]},strings:{last:" (last)"},events:{initiatePageChange:null,initiatePageSizeChange:null,onModelChange:null,onRenderPageLinks:null}})})(jQuery,fluid_1_1);